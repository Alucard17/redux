{"version":3,"file":"pubnub-redux.esm.js","sources":["../src/features/membership/MembershipActionType.enum.ts","../src/features/membership/commands/JoinSpaces.ts","../src/features/membership/commands/LeaveSpaces.ts","../src/features/membership/commands/FetchMemberships.ts","../src/features/membership/commands/UpdateMembership.ts","../src/features/members/MembersActionType.enum.ts","../src/features/members/commands/FetchMembers.ts","../src/features/members/commands/UpdateMembers.ts","../src/features/members/commands/AddMembers.ts","../src/features/members/commands/RemoveMembers.ts","../src/features/message/MessageActionType.enum.ts","../src/features/message/commands/SendMessage.ts","../src/features/signal/SignalActionType.enum.ts","../src/features/signal/commands/SendSignal.ts","../src/features/message/commands/FetchMessageHistory.ts","../src/features/space/SpaceActionType.enum.ts","../src/features/space/commands/CreateSpace.ts","../src/features/space/commands/DeleteSpace.ts","../src/features/space/commands/FetchSpaceById.ts","../src/features/space/commands/FetchSpaces.ts","../src/features/space/commands/UpdateSpace.ts","../src/features/user/UserActionType.enum.ts","../src/features/user/commands/CreateUser.ts","../src/features/user/commands/DeleteUser.ts","../src/features/user/commands/FetchUserById.ts","../src/features/user/commands/FetchUsers.ts","../src/features/user/commands/UpdateUser.ts","../src/features/presence/PresenceActionType.enum.ts","../src/features/presence/commands/FetchHereNow.ts","../src/features/presence/commands/FetchPresenceState.ts","../src/features/user/UserListener.ts","../src/features/space/SpaceListener.ts","../src/features/membership/MembershipListener.ts","../src/features/message/MessageListener.ts","../src/features/presence/PresenceCategory.enum.ts","../src/features/presence/PresenceListener.ts","../src/features/signal/SignalListener.ts","../src/features/errorStatus/ErrorStatusCategory.enum.ts","../src/features/errorStatus/ErrorStatusActionType.enum.ts","../src/features/errorStatus/ErrorStatusListener.ts","../src/features/networkStatus/NetworkStatusActionType.enum.ts","../src/features/networkStatus/NetworkStatusCategory.enum.ts","../src/features/networkStatus/NetworkStatusListener.ts","../src/features/subscriptionStatus/SubscriptionStatusActionType.enum.ts","../src/features/subscriptionStatus/SubscriptionStatusCategory.enum.ts","../src/features/subscriptionStatus/SubscriptionStatusListener.ts","../src/foundations/CombineListeners.ts","../src/features/helpers/PubNubListener.ts","../src/features/message/MessageReducer.ts","../src/features/signal/SignalReducer.ts","../src/features/presence/PresenceReducer.ts","../src/features/networkStatus/NetworkStatusReducer.ts","../src/features/user/UserReducer.ts","../src/features/user/UserListReducer.ts","../src/features/space/SpaceReducer.ts","../src/features/space/SpaceListReducer.ts","../src/features/membership/MembershipReducer.ts","../src/features/members/MembersReducer.ts"],"sourcesContent":["// tag::RDX-enum-memberships-action[]\r\nexport enum MembershipActionType {\r\n  FETCH_MEMBERSHIP_COMMAND = 'pubnub/FETCH_MEMBERSHIP_COMMAND',\r\n  JOIN_SPACES_COMMAND = 'pubnub/JOIN_SPACES_COMMAND',\r\n  LEAVE_SPACES_COMMAND = 'pubnub/LEAVE_SPACES_COMMAND',\r\n  UPDATE_MEMBERSHIP_COMMAND = 'pubnub/UPDATE_MEMBERSHIP_COMMAND',\r\n  USER_ADDED_TO_SPACE_EVENT = 'pubnub/USER_ADDED_TO_SPACE_EVENT',\r\n  USER_REMOVED_FROM_SPACE_EVENT = 'pubnub/USER_REMOVED_FROM_SPACE_EVENT',\r\n  USER_MEMBERSHIP_UPDATED_ON_SPACE_EVENT = 'pubnub/USER_MEMBERSHIP_UPDATED_ON_SPACE_EVENT',\r\n  UPDATING_MEMBERSHIP = 'pubnub/UPDATING_MEMBERSHIP',\r\n  MEMBERSHIP_UPDATED = 'pubnub/MEMBERSHIP_UPDATED',\r\n  ERROR_UPDATING_MEMBERSHIP = 'pubnub/ERROR_UPDATING_MEMBERSHIP',\r\n  FETCHING_MEMBERSHIP = 'pubnub/FETCHING_MEMBERSHIP',\r\n  MEMBERSHIP_RETRIEVED = 'pubnub/MEMBERSHIP_RETRIEVED',\r\n  ERROR_FETCHING_MEMBERSHIP = 'pubnub/ERROR_FETCHING_MEMBERSHIP',\r\n  JOINING_SPACES = 'pubnub/JOINING_SPACES',\r\n  SPACES_JOINED = 'pubnub/SPACES_JOINED',\r\n  ERROR_JOINING_SPACES = 'pubnub/ERROR_JOINING_SPACES',\r\n  LEAVING_SPACES = 'pubnub/LEAVING_SPACES',\r\n  SPACES_LEFT = 'pubnub/SPACES_LEFT',\r\n  ERROR_LEAVING_SPACES = 'pubnub/ERROR_LEAVING_SPACES',\r\n}\r\n// end::RDX-enum-memberships-action[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  JoiningSpacesAction,\r\n  SpacesJoinedAction,\r\n  MembershipSuccess,\r\n  ErrorJoiningSpacesAction,\r\n  MembershipError,\r\n  Membership,\r\n  MembershipRequest,\r\n  MembershipResponse,\r\n} from '../MembershipActions';\r\nimport { MembershipActionType } from '../MembershipActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\nimport { Space } from 'features/space/SpaceActions';\r\n\r\n// tag::RDX-function-spaces-join[]\r\nexport const joiningSpaces = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembershipRequest<MembershipType>,\r\n  meta?: Meta\r\n): JoiningSpacesAction<MembershipType, Meta> => ({\r\n  type: MembershipActionType.JOINING_SPACES,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-spaces-join[]\r\n\r\n// tag::RDX-function-spaces-join-success[]\r\nexport const spacesJoined = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembershipSuccess<MembershipType>,\r\n  meta?: Meta\r\n): SpacesJoinedAction<MembershipType, Meta> => ({\r\n  type: MembershipActionType.SPACES_JOINED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-spaces-join-success[]\r\n\r\n// tag::RDX-function-spaces-join-error[]\r\nexport const errorJoiningSpaces = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembershipError<MembershipType>,\r\n  meta?: Meta\r\n): ErrorJoiningSpacesAction<MembershipType, Meta> => ({\r\n  type: MembershipActionType.ERROR_JOINING_SPACES,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-spaces-join-error[]\r\n\r\n// tag::RDX-command-spaces-join[]\r\nexport const joinSpaces = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: MembershipRequest<MembershipType>,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(joiningSpaces<MembershipType, Meta>(request, meta));\r\n\r\n      pubnub.api.joinSpaces(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorJoiningSpaces<MembershipType, Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as MembershipResponse<MembershipType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(spacesJoined<MembershipType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = MembershipActionType.JOIN_SPACES_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-spaces-join[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  LeavingSpacesAction,\r\n  SpacesLeftAction,\r\n  MembershipSuccess,\r\n  ErrorLeavingSpacesAction,\r\n  MembershipError,\r\n  Membership,\r\n  MembershipRequest,\r\n  MembershipResponse,\r\n} from '../MembershipActions';\r\nimport { MembershipActionType } from '../MembershipActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\nimport { Space } from 'features/space/SpaceActions';\r\n\r\n// tag::RDX-function-spaces-leave[]\r\nexport const leavingSpaces = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembershipRequest<MembershipType>,\r\n  meta?: Meta\r\n): LeavingSpacesAction<MembershipType, Meta> => ({\r\n  type: MembershipActionType.LEAVING_SPACES,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-spaces-leave[]\r\n\r\n// tag::RDX-function-spaces-leave-success[]\r\nexport const spacesLeft = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembershipSuccess<MembershipType>,\r\n  meta?: Meta\r\n): SpacesLeftAction<MembershipType, Meta> => ({\r\n  type: MembershipActionType.SPACES_LEFT,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-spaces-leave-success[]\r\n\r\n// tag::RDX-function-spaces-leave-error[]\r\nexport const errorLeavingSpaces = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembershipError<MembershipType>,\r\n  meta?: Meta\r\n): ErrorLeavingSpacesAction<MembershipType, Meta> => ({\r\n  type: MembershipActionType.ERROR_LEAVING_SPACES,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-spaces-leave-error[]\r\n\r\n// tag::RDX-command-spaces-leave[]\r\nexport const leaveSpaces = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: MembershipRequest<MembershipType>,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(leavingSpaces<MembershipType, Meta>(request, meta));\r\n\r\n      pubnub.api.leaveSpaces(\r\n        {\r\n          ...request,\r\n          spaces: request.spaces.map((space) => space.id),\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorLeavingSpaces(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as MembershipResponse<MembershipType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(spacesLeft<MembershipType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = MembershipActionType.LEAVE_SPACES_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-spaces-leave[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  FetchingMembershipAction,\r\n  MembershipRetrievedAction,\r\n  FetchMembershipSuccess,\r\n  ErrorFetchingMembershipAction,\r\n  FetchMembershipError,\r\n  FetchMembershipRequest,\r\n  Membership,\r\n  MembershipResponse,\r\n} from '../MembershipActions';\r\nimport { MembershipActionType } from '../MembershipActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\nimport { Space } from 'features/space/SpaceActions';\r\n\r\n// tag::RDX-function-memberships-fetch[]\r\nexport const fetchingMembership = <Meta extends ActionMeta>(\r\n  payload: FetchMembershipRequest,\r\n  meta?: Meta\r\n): FetchingMembershipAction<Meta> => ({\r\n  type: MembershipActionType.FETCHING_MEMBERSHIP,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-memberships-fetch[]\r\n\r\n// tag::RDX-function-memberships-fetch-success[]\r\nexport const membershipRetrieved = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: FetchMembershipSuccess<MembershipType>,\r\n  meta?: Meta\r\n): MembershipRetrievedAction<MembershipType, Meta> => ({\r\n  type: MembershipActionType.MEMBERSHIP_RETRIEVED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-memberships-fetch-success[]\r\n\r\n// tag::RDX-function-memberships-fetch-error[]\r\nexport const errorFetchingMembership = <Meta extends ActionMeta>(\r\n  payload: FetchMembershipError,\r\n  meta?: Meta\r\n): ErrorFetchingMembershipAction<Meta> => ({\r\n  type: MembershipActionType.ERROR_FETCHING_MEMBERSHIP,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-memberships-fetch-error[]\r\n\r\n// tag::RDX-command-memberships-fetch[]\r\nexport const fetchMemberships = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: FetchMembershipRequest,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(fetchingMembership<Meta>(request, meta));\r\n\r\n      pubnub.api.getMemberships(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorFetchingMembership<Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as MembershipResponse<MembershipType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(membershipRetrieved<MembershipType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = MembershipActionType.FETCH_MEMBERSHIP_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-memberships-fetch[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  UpdatingMembershipAction,\r\n  MembershipUpdatedAction,\r\n  MembershipSuccess,\r\n  ErrorUpdatingMembershipAction,\r\n  MembershipError,\r\n  Membership,\r\n  MembershipRequest,\r\n  MembershipResponse,\r\n} from '../MembershipActions';\r\nimport { MembershipActionType } from '../MembershipActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\nimport { Space } from 'features/space/SpaceActions';\r\n\r\n// tag::RDX-function-memberships-update[]\r\nexport const updatingMemberships = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembershipRequest<MembershipType>,\r\n  meta?: Meta\r\n): UpdatingMembershipAction<MembershipType, Meta> => ({\r\n  type: MembershipActionType.UPDATING_MEMBERSHIP,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-memberships-update[]\r\n\r\n// tag::RDX-function-memberships-update-success[]\r\nexport const membershipUpdated = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembershipSuccess<MembershipType>,\r\n  meta?: Meta\r\n): MembershipUpdatedAction<MembershipType, Meta> => ({\r\n  type: MembershipActionType.MEMBERSHIP_UPDATED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-memberships-update-success[]\r\n\r\n// tag::RDX-function-memberships-update-error[]\r\nexport const errorUpdatingMembership = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembershipError<MembershipType>,\r\n  meta?: Meta\r\n): ErrorUpdatingMembershipAction<MembershipType, Meta> => ({\r\n  type: MembershipActionType.ERROR_UPDATING_MEMBERSHIP,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-memberships-update-error[]\r\n\r\n// tag::RDX-command-memberships-update[]\r\nexport const updateMembership = <\r\n  MembershipType extends Membership<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: MembershipRequest<MembershipType>,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(updatingMemberships<MembershipType, Meta>(request, meta));\r\n\r\n      pubnub.api.updateMemberships(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(\r\n              errorUpdatingMembership<MembershipType, Meta>(payload, meta)\r\n            );\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as MembershipResponse<MembershipType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(membershipUpdated<MembershipType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = MembershipActionType.UPDATE_MEMBERSHIP_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-memberships-update[]\r\n","// tag::RDX-enum-memmber-action[]\r\nexport enum MembersActionType {\r\n  FETCH_MEMBERS_COMMAND = 'pubnub/FETCH_MEMBERS_COMMAND',\r\n  UPDATE_MEMBERS_COMMAND = 'pubnub/UPDATE_MEMBERS_COMMAND',\r\n  ADD_MEMBERS_COMMAND = 'pubnub/ADD_MEMBERS_COMMAND',\r\n  REMOVE_MEMBERS_COMMAND = 'pubnub/REMOVE_MEMBERS_COMMAND',\r\n  FETCHING_MEMBERS = 'pubnub/FETCHING_MEMBERS',\r\n  MEMBERS_RETRIEVED = 'pubnub/MEMBERS_RETRIEVED',\r\n  ERROR_FETCHING_MEMBERS = 'pubnub/ERROR_FETCHING_MEMBERS',\r\n  UPDATING_MEMBERS = 'pubnub/UPDATING_MEMBERS',\r\n  MEMBERS_UPDATED = 'pubnub/MEMBERS_UPDATED',\r\n  ERROR_UPDATING_MEMBERS = 'pubnub/ERROR_UPDATING_MEMBERS',\r\n  ADDING_MEMBERS = 'pubnub/ADDING_MEMBERS',\r\n  MEMBERS_ADDED = 'pubnub/MEMBERS_ADDED',\r\n  ERROR_ADDING_MEMBERS = 'pubnub/ERROR_ADDING_MEMBERS',\r\n  REMOVING_MEMBERS = 'pubnub/REMOVING_MEMBERS',\r\n  MEMBERS_REMOVED = 'pubnub/MEMBERS_REMOVED',\r\n  ERROR_REMOVING_MEMBERS = 'pubnub/ERROR_REMOVING_MEMBERS',\r\n}\r\n// end::RDX-enum-memmber-action[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  MembersRetrievedAction,\r\n  ErrorFetchingMembersAction,\r\n  FetchingMembersAction,\r\n  FetchMembersError,\r\n  FetchMembersSuccess,\r\n  FetchMembersRequest,\r\n  Members,\r\n  MembersResponse,\r\n} from '../MembersActions';\r\nimport { MembersActionType } from '../MembersActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\nimport { Space } from 'features/space/SpaceActions';\r\n\r\n// tag::RDX-function-member-fetch[]\r\nexport const fetchingMembers = <Meta extends ActionMeta>(\r\n  payload: FetchMembersRequest,\r\n  meta?: Meta\r\n): FetchingMembersAction<Meta> => ({\r\n  type: MembersActionType.FETCHING_MEMBERS,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-member-fetch[]\r\n\r\n// tag::RDX-function-member-fetch-success[]\r\nexport const membersRetrieved = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: FetchMembersSuccess<MembersType>,\r\n  meta?: Meta\r\n): MembersRetrievedAction<MembersType, Meta> => ({\r\n  type: MembersActionType.MEMBERS_RETRIEVED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-member-fetch-success[]\r\n\r\n// tag::RDX-function-member-fetch-error[]\r\nexport const errorFetchingMembers = <Meta extends ActionMeta>(\r\n  payload: FetchMembersError,\r\n  meta?: Meta\r\n): ErrorFetchingMembersAction<Meta> => ({\r\n  type: MembersActionType.ERROR_FETCHING_MEMBERS,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-member-fetch-error[]\r\n\r\n// tag::RDX-command-member-fetch[]\r\nexport const fetchMembers = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: FetchMembersRequest,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(fetchingMembers<Meta>(request, meta));\r\n\r\n      pubnub.api.getMembers(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorFetchingMembers<Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as MembersResponse<MembersType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(membersRetrieved<MembersType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = MembersActionType.FETCH_MEMBERS_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-member-fetch[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  UpdatingMembersAction,\r\n  MembersUpdatedAction,\r\n  ErrorUpdatingMembersAction,\r\n  MembersError,\r\n  MembersSuccess,\r\n  Members,\r\n  MembersRequest,\r\n  MembersResponse,\r\n} from '../MembersActions';\r\nimport { MembersActionType } from '../MembersActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\nimport { Space } from 'features/space/SpaceActions';\r\n\r\n// tag::RDX-function-members-update[]\r\nexport const updatingMembers = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembersRequest<MembersType>,\r\n  meta?: Meta\r\n): UpdatingMembersAction<MembersType, Meta> => ({\r\n  type: MembersActionType.UPDATING_MEMBERS,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-members-update[]\r\n\r\n// tag::RDX-function-members-update-success[]\r\nexport const membersUpdated = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembersSuccess<MembersType>,\r\n  meta?: Meta\r\n): MembersUpdatedAction<MembersType, Meta> => ({\r\n  type: MembersActionType.MEMBERS_UPDATED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-members-update-success[]\r\n\r\n// tag::RDX-function-members-update-error[]\r\nexport const errorUpdatingMembers = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembersError<MembersType>,\r\n  meta?: Meta\r\n): ErrorUpdatingMembersAction<MembersType, Meta> => ({\r\n  type: MembersActionType.ERROR_UPDATING_MEMBERS,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-members-update-error[]\r\n\r\n// tag::RDX-command-members-update[]\r\nexport const updateMembers = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: MembersRequest<MembersType>,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(updatingMembers(request, meta));\r\n\r\n      pubnub.api.updateMembers(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorUpdatingMembers<MembersType, Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as MembersResponse<MembersType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(membersUpdated<MembersType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = MembersActionType.UPDATE_MEMBERS_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-members-update[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  AddingMembersAction,\r\n  MembersAddedAction,\r\n  ErrorAddingMembersAction,\r\n  MembersError,\r\n  MembersSuccess,\r\n  Members,\r\n  MembersRequest,\r\n  MembersResponse,\r\n} from '../MembersActions';\r\nimport { MembersActionType } from '../MembersActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\nimport { Space } from 'features/space/SpaceActions';\r\n\r\n// tag::RDX-function-member-add[]\r\nexport const addingMembers = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembersRequest<MembersType>,\r\n  meta?: Meta\r\n): AddingMembersAction<MembersType, Meta> => ({\r\n  type: MembersActionType.ADDING_MEMBERS,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-member-add[]\r\n\r\n// tag::RDX-function-member-add-success[]\r\nexport const membersAdded = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembersSuccess<MembersType>,\r\n  meta?: Meta\r\n): MembersAddedAction<MembersType, Meta> => ({\r\n  type: MembersActionType.MEMBERS_ADDED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-member-add-success[]\r\n\r\n// tag::RDX-function-member-add-error[]\r\nexport const errorAddingMembers = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembersError<MembersType>,\r\n  meta?: Meta\r\n): ErrorAddingMembersAction<MembersType, Meta> => ({\r\n  type: MembersActionType.ERROR_ADDING_MEMBERS,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-member-add-error[]\r\n\r\n// tag::RDX-command-member-add[]\r\nexport const addMembers = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: MembersRequest<MembersType>,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(addingMembers<MembersType, Meta>(request, meta));\r\n\r\n      pubnub.api.addMembers(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorAddingMembers<MembersType, Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as MembersResponse<MembersType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(membersAdded<MembersType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = MembersActionType.ADD_MEMBERS_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-member-add[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  RemovingMembersAction,\r\n  MembersRemovedAction,\r\n  ErrorRemovingMembersAction,\r\n  MembersError,\r\n  MembersSuccess,\r\n  Members,\r\n  MembersRequest,\r\n  MembersResponse,\r\n} from '../MembersActions';\r\nimport { MembersActionType } from '../MembersActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\nimport { Space } from 'features/space/SpaceActions';\r\n\r\n// tag::RDX-function-members-remove[]\r\nexport const removingMembers = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembersRequest<MembersType>,\r\n  meta?: Meta\r\n): RemovingMembersAction<MembersType, Meta> => ({\r\n  type: MembersActionType.REMOVING_MEMBERS,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-members-remove[]\r\n\r\n// tag::RDX-function-members-remove-success[]\r\nexport const membersRemoved = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembersSuccess<MembersType>,\r\n  meta?: Meta\r\n): MembersRemovedAction<MembersType, Meta> => ({\r\n  type: MembersActionType.MEMBERS_REMOVED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-members-remove-success[]\r\n\r\n// tag::RDX-function-members-remove-error[]\r\nexport const errorRemovingMembers = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: MembersError<MembersType>,\r\n  meta?: Meta\r\n): ErrorRemovingMembersAction<MembersType, Meta> => ({\r\n  type: MembersActionType.ERROR_REMOVING_MEMBERS,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-members-remove-error[]\r\n\r\n// tag::RDX-command-members-remove[]\r\nexport const removeMembers = <\r\n  MembersType extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: MembersRequest<MembersType>,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(removingMembers<MembersType, Meta>(request, meta));\r\n\r\n      pubnub.api.removeMembers(\r\n        {\r\n          ...request,\r\n          users: request.users.map((user) => user.id),\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorRemovingMembers<MembersType, Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as MembersResponse<MembersType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(membersRemoved<MembersType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = MembersActionType.REMOVE_MEMBERS_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-members-remove[]\r\n","// tag::RDX-enum-messages-action[]\r\nexport enum MessageActionType {\r\n  SEND_MESSAGE_COMMAND = 'pubnub/SEND_MESSAGE_COMMAND',\r\n  FETCH_MESSAGE_HISTORY_COMMAND = 'pubnub/FETCH_MESSAGE_HISTORY_COMMAND',\r\n  MESSAGE_RECEIVED = 'pubnub/MESSAGE_RECEIVED',\r\n  SENDING_MESSAGE = 'pubnub/SENDING_MESSAGE',\r\n  MESSAGE_SENT = 'pubnub/MESSAGE_SENT',\r\n  ERROR_SENDING_MESSAGE = 'pubnub/ERROR_SENDING_MESSAGE',\r\n  FETCHING_MESSAGE_HISTORY = 'pubnub/FETCHING_MESSAGE_HISTORY',\r\n  MESSAGE_HISTORY_RETRIEVED = 'pubnub/MESSAGE_HISTORY_RETRIEVED',\r\n  ERROR_FETCHING_MESSAGE_HISTORY = 'pubnub/ERROR_FETCHING_MESSAGE_HISTORY',\r\n}\r\n// end::RDX-enum-messages-action[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  SendMessageRequest,\r\n  SendingMessageAction,\r\n  MessageSentAction,\r\n  SendMessageSuccess,\r\n  ErrorSendingMessageAction,\r\n  SendMessageError,\r\n} from '../MessageActions';\r\nimport { MessageActionType } from '../MessageActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\n\r\n// tag::RDX-function-messages-send[]\r\nexport const sendingMessage = <\r\n  MessageContentType extends object,\r\n  MessageMeta extends object,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: SendMessageRequest<MessageContentType, MessageMeta>,\r\n  meta?: Meta\r\n): SendingMessageAction<MessageContentType, MessageMeta, Meta> => ({\r\n  type: MessageActionType.SENDING_MESSAGE,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-messages-send[]\r\n\r\n// tag::RDX-function-messages-send-success[]\r\nexport const messageSent = <\r\n  MessageContentType extends object,\r\n  MessageMeta extends object,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: SendMessageSuccess<MessageContentType, MessageMeta>,\r\n  meta?: Meta\r\n): MessageSentAction<MessageContentType, MessageMeta, Meta> => ({\r\n  type: MessageActionType.MESSAGE_SENT,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-messages-send-success[]\r\n\r\n// tag::RDX-function-messages-send-error[]\r\nexport const errorSendingMessage = <\r\n  MessageContentType extends object,\r\n  MessageMeta extends object,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: SendMessageError<MessageContentType, MessageMeta>,\r\n  meta?: Meta\r\n): ErrorSendingMessageAction<MessageContentType, MessageMeta, Meta> => ({\r\n  type: MessageActionType.ERROR_SENDING_MESSAGE,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-messages-send-error[]\r\n\r\n// tag::RDX-command-messages-send[]\r\nexport const sendMessage = <\r\n  MessageContentType extends object = {},\r\n  MessageMeta extends object = {},\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: SendMessageRequest<MessageContentType, MessageMeta>,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(sendingMessage(request, meta));\r\n\r\n      pubnub.api.publish(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(\r\n              errorSendingMessage<MessageContentType, MessageMeta, Meta>(\r\n                payload,\r\n                meta\r\n              )\r\n            );\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response,\r\n              status,\r\n            };\r\n\r\n            dispatch(\r\n              messageSent<MessageContentType, MessageMeta, Meta>(payload, meta)\r\n            );\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = MessageActionType.SEND_MESSAGE_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-messages-send[]\r\n","// tag::RDX-enum-signals-action[]\r\nexport enum SignalActionType {\r\n  SEND_SIGNAL_COMMAND = 'pubnub/SEND_SIGNAL_COMMAND',\r\n  SIGNAL_RECEIVED = 'pubnub/SIGNAL_RECEIVED',\r\n  SENDING_SIGNAL = 'pubnub/SENDING_SIGNAL',\r\n  SIGNAL_SENT = 'pubnub/SIGNAL_SENT',\r\n  ERROR_SENDING_SIGNAL = 'pubnub/ERROR_SENDING_SIGNAL',\r\n}\r\n// end::RDX-enum-signals-action[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  SendSignalRequest,\r\n  SendingSignalAction,\r\n  SignalSentAction,\r\n  SendSignalSuccess,\r\n  ErrorSendingSignalAction,\r\n  SendSignalError,\r\n} from '../SignalActions';\r\nimport { SignalActionType } from '../SignalActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\n\r\n// tag::RDX-function-signals-send[]\r\nexport const sendingSignal = <\r\n  SignalContentType extends object,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: SendSignalRequest<SignalContentType>,\r\n  meta?: Meta\r\n): SendingSignalAction<SignalContentType, Meta> => ({\r\n  type: SignalActionType.SENDING_SIGNAL,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-signals-send[]\r\n\r\n// tag::RDX-function-signals-send-success[]\r\nexport const signalSent = <\r\n  SignalContentType extends object,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: SendSignalSuccess<SignalContentType>,\r\n  meta?: Meta\r\n): SignalSentAction<SignalContentType, Meta> => ({\r\n  type: SignalActionType.SIGNAL_SENT,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-signals-send-success[]\r\n\r\n// tag::RDX-function-signals-send-error[]\r\nexport const errorSendingSignal = <\r\n  SignalContentType extends object,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: SendSignalError<SignalContentType>,\r\n  meta?: Meta\r\n): ErrorSendingSignalAction<SignalContentType, Meta> => ({\r\n  type: SignalActionType.ERROR_SENDING_SIGNAL,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-signals-send-error[]\r\n\r\n// tag::RDX-command-signals-send[]\r\nexport const sendSignal = <\r\n  SignalContentType extends object = {},\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: SendSignalRequest<SignalContentType>,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(sendingSignal(request, meta));\r\n\r\n      pubnub.api.signal(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(\r\n              errorSendingSignal<SignalContentType, Meta>(payload, meta)\r\n            );\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response,\r\n              status,\r\n            };\r\n\r\n            dispatch(signalSent<SignalContentType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = SignalActionType.SEND_SIGNAL_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-signals-send[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  FetchMessageHistoryRequest,\r\n  FetchMessageHistoryResponse,\r\n  FetchMessageHistoryError,\r\n  FetchingMessageHistoryAction,\r\n  ErrorFetchingMessageHistoryAction,\r\n  MessageHistoryRetrievedAction,\r\n  FetchMessageHistorySuccess,\r\n} from '../../message/MessageActions';\r\nimport { MessageActionType } from '../../message/MessageActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta } from '../../../foundations/ActionMeta';\r\nimport Pubnub from 'pubnub';\r\n\r\n// tag::RDX-function-presence-messagehistory[]\r\nexport const fetchingMessageHistory = <Meta extends ActionMeta>(\r\n  payload: FetchMessageHistoryRequest,\r\n  meta?: Meta\r\n): FetchingMessageHistoryAction<Meta> => ({\r\n  type: MessageActionType.FETCHING_MESSAGE_HISTORY,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-presence-messagehistory[]\r\n\r\n// tag::RDX-function-presence-messagehistory-success[]\r\nexport const messageHistoryRetrieved = <\r\n  MessageContentType,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: FetchMessageHistorySuccess<MessageContentType>,\r\n  meta?: Meta\r\n): MessageHistoryRetrievedAction<MessageContentType, Meta> => ({\r\n  type: MessageActionType.MESSAGE_HISTORY_RETRIEVED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-presence-messagehistory-success[]\r\n\r\n// tag::RDX-function-presence-messagehistory-error[]\r\nexport const errorFetchingMessageHistory = <Meta extends ActionMeta>(\r\n  payload: FetchMessageHistoryError,\r\n  meta?: Meta\r\n): ErrorFetchingMessageHistoryAction<Meta> => ({\r\n  type: MessageActionType.ERROR_FETCHING_MESSAGE_HISTORY,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-presence-messagehistory-error[]\r\n\r\n// tag::RDX-command-presence-messagehistory[]\r\nexport const fetchMessageHistory = <\r\n  MessageContentType,\r\n  Meta extends ActionMeta\r\n>(\r\n  request: FetchMessageHistoryRequest,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(fetchingMessageHistory(request, meta));\r\n\r\n      pubnub.api.history(\r\n        {\r\n          ...(request as Pubnub.HistoryParameters),\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorFetchingMessageHistory<Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as FetchMessageHistoryResponse<\r\n                MessageContentType\r\n              >,\r\n              status,\r\n            };\r\n\r\n            dispatch(\r\n              messageHistoryRetrieved<MessageContentType, Meta>(payload, meta)\r\n            );\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = MessageActionType.FETCH_MESSAGE_HISTORY_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-presence-messagehistory[]\r\n","// tag::RDX-enum-space-action[]\r\nexport enum SpaceActionType {\r\n  FETCH_SPACES_COMMAND = 'pubnub/FETCH_SPACES_COMMAND',\r\n  FETCH_SPACE_BY_ID_COMMAND = 'pubnub/FETCH_SPACE_BY_ID_COMMAND',\r\n  CREATE_SPACE_COMMAND = 'pubnub/CREATE_SPACE_COMMAND',\r\n  UPDATE_SPACE_COMMAND = 'pubnub/UPDATE_SPACE_COMMAND',\r\n  DELETE_SPACE_COMMAND = 'pubnub/DELETE_SPACE_COMMAND',\r\n  UPDATING_SPACE = 'pubnub/UPDATING_SPACE',\r\n  SPACE_UPDATED = 'pubnub/SPACE_UPDATED',\r\n  ERROR_UPDATING_SPACE = 'pubnub/ERROR_UPDATING_SPACE',\r\n  DELETING_SPACE = 'pubnub/DELETING_SPACE',\r\n  SPACE_DELETED = 'pubnub/SPACE_DELETED',\r\n  ERROR_DELETING_SPACE = 'pubnub/ERROR_DELETING_SPACE',\r\n  CREATING_SPACE = 'pubnub/CREATING_SPACE',\r\n  SPACE_CREATED = 'pubnub/SPACE_CREATED',\r\n  ERROR_CREATING_SPACE = 'pubnub/ERROR_CREATING_SPACE',\r\n  FETCHING_SPACES = 'pubnub/FETCHING_SPACES',\r\n  SPACES_RETRIEVED = 'pubnub/SPACES_RETRIEVED',\r\n  ERROR_FETCHING_SPACES = 'pubnub/ERROR_FETCHING_SPACES',\r\n  FETCHING_SPACE_BY_ID = 'pubnub/FETCHING_SPACE_BY_ID',\r\n  SPACE_RETRIEVED = 'pubnub/SPACE_RETRIEVED',\r\n  ERROR_FETCHING_SPACE_BY_ID = 'pubnub/ERROR_FETCHING_SPACE_BY_ID',\r\n  SPACE_UPDATED_EVENT = 'pubnub/SPACE_UPDATED_EVENT',\r\n  SPACE_DELETED_EVENT = 'pubnub/SPACE_DELETED_EVENT',\r\n}\r\n// end::RDX-enum-space-action[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  ErrorCreatingSpaceAction,\r\n  SpaceCreatedAction,\r\n  CreatingSpaceAction,\r\n  SpaceError,\r\n  SpaceSuccess,\r\n  SpaceRequest,\r\n  Space,\r\n  SpaceResponse,\r\n} from '../SpaceActions';\r\nimport { SpaceActionType } from '../SpaceActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\n\r\n// tag::RDX-function-space-create[]\r\nexport const creatingSpace = <Meta extends ActionMeta>(\r\n  payload: SpaceRequest,\r\n  meta?: Meta\r\n): CreatingSpaceAction<Meta> => ({\r\n  type: SpaceActionType.CREATING_SPACE,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-space-create[]\r\n\r\n// tag::RDX-function-space-create-success[]\r\nexport const spaceCreated = <\r\n  SpaceType extends Space<ObjectsCustom>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: SpaceSuccess<SpaceType>,\r\n  meta?: Meta\r\n): SpaceCreatedAction<SpaceType, Meta> => ({\r\n  type: SpaceActionType.SPACE_CREATED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-space-create-success[]\r\n\r\n// tag::RDX-function-space-create-error[]\r\nexport const errorCreatingSpace = <Meta extends ActionMeta>(\r\n  payload: SpaceError,\r\n  meta?: Meta\r\n): ErrorCreatingSpaceAction<Meta> => ({\r\n  type: SpaceActionType.ERROR_CREATING_SPACE,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-space-create-error[]\r\n\r\n// tag::RDX-command-space-create[]\r\nexport const createSpace = <\r\n  SpaceType extends Space<ObjectsCustom>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: SpaceRequest,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(creatingSpace<Meta>(request, meta));\r\n\r\n      pubnub.api.createSpace(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorCreatingSpace<Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as SpaceResponse<SpaceType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(spaceCreated<SpaceType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = SpaceActionType.CREATE_SPACE_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-space-create[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  SpaceDeletedAction,\r\n  DeletingSpaceAction,\r\n  ErrorDeletingSpaceAction,\r\n  DeleteSpaceRequest,\r\n  DeleteSpaceError,\r\n  DeleteSpaceSuccess,\r\n} from '../SpaceActions';\r\nimport { SpaceActionType } from '../SpaceActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\n\r\n// tag::RDX-function-space-delete[]\r\nexport const deletingSpace = <Meta extends ActionMeta>(\r\n  payload: DeleteSpaceRequest,\r\n  meta?: Meta\r\n): DeletingSpaceAction<Meta> => ({\r\n  type: SpaceActionType.DELETING_SPACE,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-space-delete[]\r\n\r\n// tag::RDX-function-space-delete-success[]\r\nexport const spaceDeleted = <Meta extends ActionMeta>(\r\n  payload: DeleteSpaceSuccess,\r\n  meta?: Meta\r\n): SpaceDeletedAction<Meta> => ({\r\n  type: SpaceActionType.SPACE_DELETED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-space-delete-success[]\r\n\r\n// tag::RDX-function-space-delete-error[]\r\nexport const errorDeletingSpace = <Meta extends ActionMeta>(\r\n  payload: DeleteSpaceError,\r\n  meta?: Meta\r\n): ErrorDeletingSpaceAction<Meta> => ({\r\n  type: SpaceActionType.ERROR_DELETING_SPACE,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-space-delete-error[]\r\n\r\n// tag::RDX-command-space-delete[]\r\nexport const deleteSpace = <Meta extends ActionMeta = AnyMeta>(\r\n  request: DeleteSpaceRequest,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(deletingSpace<Meta>(request, meta));\r\n\r\n      pubnub.api.deleteSpace(request.spaceId, (status) => {\r\n        if (status.error) {\r\n          const payload = {\r\n            request,\r\n            status,\r\n          };\r\n\r\n          dispatch(errorDeletingSpace<Meta>(payload, meta));\r\n          reject(payload);\r\n        } else {\r\n          const payload = {\r\n            request,\r\n            status,\r\n          };\r\n\r\n          dispatch(spaceDeleted<Meta>(payload, meta));\r\n          resolve();\r\n        }\r\n      });\r\n    });\r\n\r\n  thunkFunction.type = SpaceActionType.DELETE_SPACE_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-space-delete[]\r\n","import { Dispatch } from 'redux';\r\nimport { SpaceActionType } from '../SpaceActionType.enum';\r\nimport {\r\n  ErrorFetchingSpaceByIdAction,\r\n  SpaceRetrievedAction,\r\n  FetchingSpaceByIdAction,\r\n  FetchSpaceByIdError,\r\n  FetchSpaceByIdSuccess,\r\n  FetchSpaceByIdRequest,\r\n  Space,\r\n  SpaceResponse,\r\n} from '../SpaceActions';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\n\r\n// tag::RDX-function-space-fetchbyid[]\r\nexport const fetchingSpaceById = <Meta extends ActionMeta>(\r\n  payload: FetchSpaceByIdRequest,\r\n  meta?: Meta\r\n): FetchingSpaceByIdAction<Meta> => ({\r\n  type: SpaceActionType.FETCHING_SPACE_BY_ID,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-space-fetchbyid[]\r\n\r\n// tag::RDX-function-space-fetchbyid-success[]\r\nexport const spaceRetrieved = <\r\n  SpaceType extends Space<ObjectsCustom>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: FetchSpaceByIdSuccess<SpaceType>,\r\n  meta?: Meta\r\n): SpaceRetrievedAction<SpaceType, Meta> => ({\r\n  type: SpaceActionType.SPACE_RETRIEVED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-space-fetchbyid-success[]\r\n\r\n// tag::RDX-function-space-fetchbyid-error[]\r\nexport const errorFetchingSpaceById = <Meta extends ActionMeta>(\r\n  payload: FetchSpaceByIdError,\r\n  meta?: Meta\r\n): ErrorFetchingSpaceByIdAction<Meta> => ({\r\n  type: SpaceActionType.ERROR_FETCHING_SPACE_BY_ID,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-space-fetchbyid-error[]\r\n\r\n// tag::RDX-command-space-fetchbyid[]\r\nexport const fetchSpaceById = <\r\n  SpaceType extends Space<ObjectsCustom>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: FetchSpaceByIdRequest,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(\r\n        fetchingSpaceById<Meta>(\r\n          {\r\n            ...request,\r\n          },\r\n          meta\r\n        )\r\n      );\r\n\r\n      pubnub.api.getSpace(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorFetchingSpaceById<Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as SpaceResponse<SpaceType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(spaceRetrieved<SpaceType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = SpaceActionType.FETCH_SPACE_BY_ID_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-space-fetchbyid[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  ErrorFetchingSpacesAction,\r\n  SpacesRetrievedAction,\r\n  FetchingSpacesAction,\r\n  FetchSpacesError,\r\n  FetchSpacesSuccess,\r\n  FetchSpacesRequest,\r\n  Space,\r\n  FetchSpacesResponse,\r\n} from '../SpaceActions';\r\nimport { SpaceActionType } from '../SpaceActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\n\r\n// tag::RDX-function-space-fetch[]\r\nexport const fetchingSpaces = <Meta extends ActionMeta>(\r\n  payload: FetchSpacesRequest,\r\n  meta?: Meta\r\n): FetchingSpacesAction<Meta> => ({\r\n  type: SpaceActionType.FETCHING_SPACES,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-space-fetch[]\r\n\r\n// tag::RDX-function-space-fetch-success[]\r\nexport const spacesRetrieved = <\r\n  SpaceType extends Space<ObjectsCustom>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: FetchSpacesSuccess<SpaceType>,\r\n  meta?: Meta\r\n): SpacesRetrievedAction<SpaceType, Meta> => ({\r\n  type: SpaceActionType.SPACES_RETRIEVED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-space-fetch-success[]\r\n\r\n// tag::RDX-function-space-fetch-error[]\r\nexport const errorFetchingSpaces = <Meta extends ActionMeta>(\r\n  payload: FetchSpacesError,\r\n  meta?: Meta\r\n): ErrorFetchingSpacesAction<Meta> => ({\r\n  type: SpaceActionType.ERROR_FETCHING_SPACES,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-space-fetch-error[]\r\n\r\n// tag::RDX-command-space-fetch[]\r\nexport const fetchSpaces = <\r\n  SpaceType extends Space<ObjectsCustom>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: FetchSpacesRequest = {},\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(fetchingSpaces<Meta>(request, meta));\r\n\r\n      pubnub.api.getSpaces(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorFetchingSpaces<Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as FetchSpacesResponse<SpaceType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(spacesRetrieved<SpaceType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = SpaceActionType.FETCH_SPACES_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-space-fetch[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  UpdatingSpaceAction,\r\n  SpaceUpdatedAction,\r\n  ErrorUpdatingSpaceAction,\r\n  SpaceError,\r\n  SpaceSuccess,\r\n  SpaceRequest,\r\n  Space,\r\n  SpaceResponse,\r\n} from '../SpaceActions';\r\nimport { SpaceActionType } from '../SpaceActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\n\r\n// tag::RDX-function-space-update[]\r\nexport const updatingSpace = <Meta extends ActionMeta>(\r\n  payload: SpaceRequest,\r\n  meta?: Meta\r\n): UpdatingSpaceAction<Meta> => ({\r\n  type: SpaceActionType.UPDATING_SPACE,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-space-update[]\r\n\r\n// tag::RDX-function-space-update-success[]\r\nexport const spaceUpdated = <\r\n  SpaceType extends Space<ObjectsCustom>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: SpaceSuccess<SpaceType>,\r\n  meta?: Meta\r\n): SpaceUpdatedAction<SpaceType, Meta> => ({\r\n  type: SpaceActionType.SPACE_UPDATED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-space-update-success[]\r\n\r\n// tag::RDX-function-space-update-error[]\r\nexport const errorUpdatingSpace = <Meta extends ActionMeta>(\r\n  payload: SpaceError,\r\n  meta?: Meta\r\n): ErrorUpdatingSpaceAction<Meta> => ({\r\n  type: SpaceActionType.ERROR_UPDATING_SPACE,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-space-update-error[]\r\n\r\n// tag::RDX-command-space-update[]\r\nexport const updateSpace = <\r\n  SpaceType extends Space<ObjectsCustom>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: SpaceRequest,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(updatingSpace<Meta>(request, meta));\r\n\r\n      pubnub.api.updateSpace(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorUpdatingSpace<Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as SpaceResponse<SpaceType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(spaceUpdated<SpaceType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = SpaceActionType.UPDATE_SPACE_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-space-update[]\r\n","// tag::RDX-enum-user-action[]\r\nexport enum UserActionType {\r\n  FETCH_USERS_COMMAND = 'pubnub/FETCH_USERS_COMMAND',\r\n  FETCH_USER_BY_ID_COMMAND = 'pubnub/FETCH_USER_BY_ID_COMMAND',\r\n  CREATE_USER_COMMAND = 'pubnub/CREATE_USER_COMMAND',\r\n  UPDATE_USER_COMMAND = 'pubnub/UPDATE_USER_COMMAND',\r\n  DELETE_USER_COMMAND = 'pubnub/DELETE_USER_COMMAND',\r\n  UPDATING_USER = 'pubnub/UPDATING_USER',\r\n  USER_UPDATED = 'pubnub/USER_UPDATED',\r\n  ERROR_UPDATING_USER = 'pubnub/ERROR_UPDATING_USER',\r\n  DELETING_USER = 'pubnub/DELETING_USER',\r\n  USER_DELETED = 'pubnub/USER_DELETED',\r\n  ERROR_DELETING_USER = 'pubnub/ERROR_DELETING_USER',\r\n  CREATING_USER = 'pubnub/CREATING_USER',\r\n  USER_CREATED = 'pubnub/USER_CREATED',\r\n  ERROR_CREATING_USER = 'pubnub/ERROR_CREATING_USER',\r\n  FETCHING_USERS = 'pubnub/FETCHING_USERS',\r\n  USERS_RETRIEVED = 'pubnub/USERS_RETRIEVED',\r\n  ERROR_FETCHING_USERS = 'pubnub/ERROR_FETCHING_USERS',\r\n  FETCHING_USER_BY_ID = 'pubnub/FETCHING_USER_BY_ID',\r\n  USER_RETRIEVED = 'pubnub/USER_RETRIEVED',\r\n  ERROR_FETCHING_USER_BY_ID = 'pubnub/ERROR_FETCHING_USER_BY_ID',\r\n  USER_UPDATED_EVENT = 'pubnub/USER_UPDATED_EVENT',\r\n  USER_DELETED_EVENT = 'pubnub/USER_DELETED_EVENT',\r\n}\r\n// end::RDX-enum-user-action[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  ErrorCreatingUserAction,\r\n  UserCreatedAction,\r\n  CreatingUserAction,\r\n  UserSuccess,\r\n  UserError,\r\n  UserResponse,\r\n  UserRequest,\r\n  User,\r\n} from '../UserActions';\r\nimport { UserActionType } from '../UserActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\n\r\n// tag::RDX-function-user-create[]\r\nexport const creatingUser = <Meta extends ActionMeta>(\r\n  payload: UserRequest,\r\n  meta?: Meta\r\n): CreatingUserAction<Meta> => ({\r\n  type: UserActionType.CREATING_USER,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-user-create[]\r\n\r\n// tag::RDX-function-user-create-success[]\r\nexport const userCreated = <\r\n  UserType extends User<ObjectsCustom>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: UserSuccess<UserType>,\r\n  meta?: Meta\r\n): UserCreatedAction<UserType, Meta> => ({\r\n  type: UserActionType.USER_CREATED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-user-create-success[]\r\n\r\n// tag::RDX-function-user-create-error[]\r\nexport const errorCreatingUser = <Meta extends ActionMeta>(\r\n  payload: UserError,\r\n  meta?: Meta\r\n): ErrorCreatingUserAction<Meta> => ({\r\n  type: UserActionType.ERROR_CREATING_USER,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-user-create-error[]\r\n\r\n// tag::RDX-command-user-create[]\r\nexport const createUser = <\r\n  UserType extends User<ObjectsCustom>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: UserRequest,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(creatingUser<Meta>(request, meta));\r\n\r\n      pubnub.api.createUser(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorCreatingUser<Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as UserResponse<UserType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(userCreated<UserType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = UserActionType.CREATE_USER_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-user-create[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  UserDeletedAction,\r\n  DeletingUserAction,\r\n  ErrorDeletingUserAction,\r\n  DeleteUserRequest,\r\n  DeleteUserError,\r\n  DeleteUserSuccess,\r\n} from '../UserActions';\r\nimport { UserActionType } from '../UserActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\n\r\n// tag::RDX-function-user-delete[]\r\nexport const deletingUser = <Meta extends ActionMeta>(\r\n  payload: DeleteUserRequest,\r\n  meta?: Meta\r\n): DeletingUserAction<Meta> => ({\r\n  type: UserActionType.DELETING_USER,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-user-delete[]\r\n\r\n// tag::RDX-function-user-delete-success[]\r\nexport const userDeleted = <Meta extends ActionMeta>(\r\n  payload: DeleteUserSuccess,\r\n  meta?: Meta\r\n): UserDeletedAction<Meta> => ({\r\n  type: UserActionType.USER_DELETED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-user-delete-success[]\r\n\r\n// tag::RDX-function-user-delete-error[]\r\nexport const errorDeletingUser = <Meta extends ActionMeta>(\r\n  payload: DeleteUserError,\r\n  meta?: Meta\r\n): ErrorDeletingUserAction<Meta> => ({\r\n  type: UserActionType.ERROR_DELETING_USER,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-user-delete-error[]\r\n\r\n// tag::RDX-command-user-delete[]\r\nexport const deleteUser = <Meta extends ActionMeta = AnyMeta>(\r\n  request: DeleteUserRequest,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(deletingUser<Meta>(request, meta));\r\n\r\n      pubnub.api.deleteUser(request.userId, (status) => {\r\n        if (status.error) {\r\n          const payload = {\r\n            request,\r\n            status,\r\n          };\r\n\r\n          dispatch(errorDeletingUser<Meta>(payload, meta));\r\n          reject(payload);\r\n        } else {\r\n          const payload = {\r\n            request,\r\n            status,\r\n          };\r\n\r\n          dispatch(userDeleted<Meta>(payload, meta));\r\n          resolve();\r\n        }\r\n      });\r\n    });\r\n\r\n  thunkFunction.type = UserActionType.DELETE_USER_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-user-delete[]\r\n","import { Dispatch } from 'redux';\r\nimport { UserActionType } from '../UserActionType.enum';\r\nimport {\r\n  ErrorFetchingUserByIdAction,\r\n  UserRetrievedAction,\r\n  FetchingUserByIdAction,\r\n  FetchUserByIdError,\r\n  FetchUserByIdSuccess,\r\n  FetchUserByIdRequest,\r\n  User,\r\n  UserResponse,\r\n} from '../UserActions';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\n\r\n// tag::RDX-function-user-fetchbyid[]\r\nexport const fetchingUserById = <Meta extends ActionMeta>(\r\n  payload: FetchUserByIdRequest,\r\n  meta?: Meta\r\n): FetchingUserByIdAction<Meta> => ({\r\n  type: UserActionType.FETCHING_USER_BY_ID,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-user-fetchbyid[]\r\n\r\n// tag::RDX-function-user-fetchbyid-success[]\r\nexport const userRetrieved = <\r\n  UserType extends User<ObjectsCustom>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: FetchUserByIdSuccess<UserType>,\r\n  meta?: Meta\r\n): UserRetrievedAction<UserType, Meta> => ({\r\n  type: UserActionType.USER_RETRIEVED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-user-fetchbyid-success[]\r\n\r\n// tag::RDX-function-user-fetchbyid-error[]\r\nexport const errorFetchingUserById = <Meta extends ActionMeta>(\r\n  payload: FetchUserByIdError,\r\n  meta?: Meta\r\n): ErrorFetchingUserByIdAction<Meta> => ({\r\n  type: UserActionType.ERROR_FETCHING_USER_BY_ID,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-user-fetchbyid-error[]\r\n\r\n// tag::RDX-command-user-fetchbyid[]\r\nexport const fetchUserById = <\r\n  UserType extends User<ObjectsCustom>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: FetchUserByIdRequest,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(\r\n        fetchingUserById<Meta>(\r\n          {\r\n            ...request,\r\n          },\r\n          meta\r\n        )\r\n      );\r\n\r\n      pubnub.api.getUser(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorFetchingUserById<Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as UserResponse<UserType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(userRetrieved<UserType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = UserActionType.FETCH_USER_BY_ID_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-user-fetchbyid[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  ErrorFetchingUsersAction,\r\n  UsersRetrievedAction,\r\n  FetchingUsersAction,\r\n  FetchUsersError,\r\n  FetchUsersSuccess,\r\n  FetchUsersRequest,\r\n  User,\r\n  FetchUsersResponse,\r\n} from '../UserActions';\r\nimport { UserActionType } from '../UserActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\n\r\n// tag::RDX-function-user-fetch[]\r\nexport const fetchingUsers = <Meta extends ActionMeta>(\r\n  payload: FetchUsersRequest,\r\n  meta?: Meta\r\n): FetchingUsersAction<Meta> => ({\r\n  type: UserActionType.FETCHING_USERS,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-user-fetch[]\r\n\r\n// tag::RDX-function-user-fetch-success[]\r\nexport const usersRetrieved = <\r\n  UserType extends User<ObjectsCustom>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: FetchUsersSuccess<UserType>,\r\n  meta?: Meta\r\n): UsersRetrievedAction<UserType, Meta> => ({\r\n  type: UserActionType.USERS_RETRIEVED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-user-fetch-success[]\r\n\r\n// tag::RDX-function-user-fetch-error[]\r\nexport const errorFetchingUsers = <Meta extends ActionMeta = AnyMeta>(\r\n  payload: FetchUsersError,\r\n  meta?: Meta\r\n): ErrorFetchingUsersAction<Meta> => ({\r\n  type: UserActionType.ERROR_FETCHING_USERS,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-user-fetch-error[]\r\n\r\n// tag::RDX-command-user-fetch[]\r\nexport const fetchUsers = <\r\n  UserType extends User<ObjectsCustom>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: FetchUsersRequest = {},\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(fetchingUsers<Meta>(request, meta));\r\n\r\n      pubnub.api.getUsers(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorFetchingUsers<Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as FetchUsersResponse<UserType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(usersRetrieved<UserType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = UserActionType.FETCH_USERS_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-user-fetch[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  UpdatingUserAction,\r\n  UserUpdatedAction,\r\n  ErrorUpdatingUserAction,\r\n  UserError,\r\n  UserSuccess,\r\n  UserRequest,\r\n  User,\r\n  UserResponse,\r\n} from '../UserActions';\r\nimport { UserActionType } from '../UserActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta, AnyMeta } from '../../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\n\r\n// tag::RDX-function-user-update[]\r\nexport const updatingUser = <Meta extends ActionMeta>(\r\n  payload: UserRequest,\r\n  meta?: Meta\r\n): UpdatingUserAction<Meta> => ({\r\n  type: UserActionType.UPDATING_USER,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-user-update[]\r\n\r\n// tag::RDX-function-user-update-success[]\r\nexport const userUpdated = <\r\n  UserType extends User<ObjectsCustom>,\r\n  Meta extends ActionMeta\r\n>(\r\n  payload: UserSuccess<UserType>,\r\n  meta?: Meta\r\n): UserUpdatedAction<UserType, Meta> => ({\r\n  type: UserActionType.USER_UPDATED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-user-update-success[]\r\n\r\n// tag::RDX-function-user-update-error[]\r\nexport const errorUpdatingUser = <Meta extends ActionMeta>(\r\n  payload: UserError,\r\n  meta?: Meta\r\n): ErrorUpdatingUserAction<Meta> => ({\r\n  type: UserActionType.ERROR_UPDATING_USER,\r\n  payload,\r\n  meta,\r\n  error: true,\r\n});\r\n// end::RDX-function-user-update-error[]\r\n\r\n// tag::RDX-command-user-update[]\r\nexport const updateUser = <\r\n  UserType extends User<ObjectsCustom>,\r\n  Meta extends ActionMeta = AnyMeta\r\n>(\r\n  request: UserRequest,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(updatingUser<Meta>(request, meta));\r\n\r\n      pubnub.api.updateUser(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorUpdatingUser<Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response: response as UserResponse<UserType>,\r\n              status,\r\n            };\r\n\r\n            dispatch(userUpdated<UserType, Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = UserActionType.UPDATE_USER_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-user-update[]\r\n","// tag::RDX-enum-presence-action[]\r\nexport enum PresenceActionType {\r\n  HERE_NOW_COMMAND = 'pubnub/HERE_NOW_COMMAND',\r\n  PRESENCE_STATE_COMMAND = 'pubnub/PRESENCE_STATE_COMMAND',\r\n  FETCHING_HERE_NOW = 'pubnub/FETCHING_HERE_NOW',\r\n  HERE_NOW_RETRIEVED = 'pubnub/HERE_NOW_RETRIEVED',\r\n  ERROR_FETCHING_HERE_NOW = 'pubnub/ERROR_FETCHING_HERE_NOW',\r\n  FETCHING_PRESENCE_STATE = 'pubnub/FETCHING_PRESENCE_STATE',\r\n  PRESENCE_STATE_RETRIEVED = 'pubnub/PRESENCE_STATE_RETRIEVED',\r\n  ERROR_FETCHING_PRESENCE_STATE = 'pubnub/ERROR_FETCHING_PRESENCE_STATE',\r\n  JOIN_EVENT = 'pubnub/JOIN_EVENT',\r\n  LEAVE_EVENT = 'pubnub/LEAVE_EVENT',\r\n  TIMEOUT_EVENT = 'pubnub/TIMEOUT_EVENT',\r\n  STATE_CHANGE_EVENT = 'pubnub/STATE_CHANGE_EVENT',\r\n}\r\n// end::RDX-enum-presence-action[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  HereNowRequest,\r\n  HereNowError,\r\n  FetchingHereNowAction,\r\n  ErrorFetchingHereNowAction,\r\n  HereNowRetrievedAction,\r\n  HereNowSuccess,\r\n} from '../PresenceActions';\r\nimport { PresenceActionType } from '../PresenceActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta } from '../../../foundations/ActionMeta';\r\n\r\n// tag::RDX-function-presence-herenow[]\r\nexport const fetchingHereNow = <Meta extends ActionMeta>(\r\n  payload: HereNowRequest,\r\n  meta?: Meta\r\n): FetchingHereNowAction<Meta> => ({\r\n  type: PresenceActionType.FETCHING_HERE_NOW,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-presence-herenow[]\r\n\r\n// tag::RDX-function-presence-herenow-success[]\r\nexport const hereNowRetrieved = <Meta extends ActionMeta>(\r\n  payload: HereNowSuccess,\r\n  meta?: Meta\r\n): HereNowRetrievedAction<Meta> => ({\r\n  type: PresenceActionType.HERE_NOW_RETRIEVED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-presence-herenow-success[]\r\n\r\n// tag::RDX-function-presence-herenow-error[]\r\nexport const errorFetchingHereNow = <Meta extends ActionMeta>(\r\n  payload: HereNowError,\r\n  meta?: Meta\r\n): ErrorFetchingHereNowAction<Meta> => ({\r\n  type: PresenceActionType.ERROR_FETCHING_HERE_NOW,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-presence-herenow-error[]\r\n\r\n// tag::RDX-command-presence-herenow[]\r\nexport const fetchHereNow = <Meta extends ActionMeta>(\r\n  request: HereNowRequest,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(fetchingHereNow(request, meta));\r\n\r\n      pubnub.api.hereNow(\r\n        {\r\n          ...request,\r\n          includeUUIDs: true,\r\n          includeState: false,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorFetchingHereNow<Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response,\r\n              status,\r\n            };\r\n\r\n            dispatch(hereNowRetrieved<Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = PresenceActionType.HERE_NOW_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-presence-herenow[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  PresenceStateRequest,\r\n  PresenceStateError,\r\n  FetchingPresenceStateAction,\r\n  ErrorFetchingPresenceStateAction,\r\n  PresenceStateRetrievedAction,\r\n  PresenceStateSuccess,\r\n} from '../PresenceActions';\r\nimport { PresenceActionType } from '../PresenceActionType.enum';\r\nimport { PubnubThunkContext } from '../../../foundations/ThunkTypes';\r\nimport { ActionMeta } from '../../../foundations/ActionMeta';\r\n\r\n// tag::RDX-function-presence-fetch[]\r\nexport const fetchingPresenceState = <Meta extends ActionMeta>(\r\n  payload: PresenceStateRequest,\r\n  meta?: Meta\r\n): FetchingPresenceStateAction<Meta> => ({\r\n  type: PresenceActionType.FETCHING_PRESENCE_STATE,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-presence-fetch[]\r\n\r\n// tag::RDX-function-presence-fetch-success[]\r\nexport const presenceStateRetrieved = <Meta extends ActionMeta>(\r\n  payload: PresenceStateSuccess,\r\n  meta?: Meta\r\n): PresenceStateRetrievedAction<Meta> => ({\r\n  type: PresenceActionType.PRESENCE_STATE_RETRIEVED,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-presence-fetch-success[]\r\n\r\n// tag::RDX-function-presence-fetch-error[]\r\nexport const errorFetchingPresenceState = <Meta extends ActionMeta>(\r\n  payload: PresenceStateError,\r\n  meta?: Meta\r\n): ErrorFetchingPresenceStateAction<Meta> => ({\r\n  type: PresenceActionType.ERROR_FETCHING_PRESENCE_STATE,\r\n  payload,\r\n  meta,\r\n});\r\n// end::RDX-function-presence-fetch-error[]\r\n\r\n// tag::RDX-command-presence-fetch[]\r\nexport const fetchPresenceState = <Meta extends ActionMeta>(\r\n  request: PresenceStateRequest,\r\n  meta?: Meta\r\n) => {\r\n  const thunkFunction = (\r\n    dispatch: Dispatch,\r\n    _getState: any,\r\n    { pubnub }: PubnubThunkContext\r\n  ) =>\r\n    new Promise<void>((resolve, reject) => {\r\n      dispatch(fetchingPresenceState(request, meta));\r\n\r\n      pubnub.api.getState(\r\n        {\r\n          ...request,\r\n        },\r\n        (status, response) => {\r\n          if (status.error) {\r\n            const payload = {\r\n              request,\r\n              status,\r\n            };\r\n\r\n            dispatch(errorFetchingPresenceState<Meta>(payload, meta));\r\n            reject(payload);\r\n          } else {\r\n            const payload = {\r\n              request,\r\n              response,\r\n              status,\r\n            };\r\n\r\n            dispatch(presenceStateRetrieved<Meta>(payload, meta));\r\n            resolve();\r\n          }\r\n        }\r\n      );\r\n    });\r\n\r\n  thunkFunction.type = PresenceActionType.PRESENCE_STATE_COMMAND;\r\n\r\n  return thunkFunction;\r\n};\r\n// end::RDX-command-presence-fetch[]\r\n","import Pubnub from 'pubnub';\r\nimport { Dispatch } from 'redux';\r\nimport {\r\n  UserUpdatedEventAction,\r\n  UserDeletedEventAction,\r\n  UserListenerActions,\r\n  User,\r\n  UserEventMessage,\r\n  UserListenerPayload,\r\n} from './UserActions';\r\nimport { UserActionType } from './UserActionType.enum';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\n\r\n// tag::RDX-event-user-updated[]\r\nexport const userUpdated = <UserType extends User<ObjectsCustom>>(\r\n  payload: UserEventMessage<UserType>\r\n): UserUpdatedEventAction<UserType> => ({\r\n  type: UserActionType.USER_UPDATED_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-event-user-updated[]\r\n\r\n// tag::RDX-event-user-deleted[]\r\nexport const userDeleted = <UserType extends User<ObjectsCustom>>(\r\n  payload: UserEventMessage<UserType>\r\n): UserDeletedEventAction<UserType> => ({\r\n  type: UserActionType.USER_DELETED_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-event-user-deleted[]\r\n\r\n// tag::RDX-method-listener-user[]\r\nexport const createUserListener = <UserType extends User<ObjectsCustom> = User>(\r\n  dispatch: Dispatch<UserListenerActions<UserType>>\r\n) => ({\r\n  user: (payload: Pubnub.UserEvent) => {\r\n    switch (payload.message.event) {\r\n      case 'update':\r\n        dispatch(\r\n          userUpdated<UserType>(\r\n            ((payload as unknown) as UserListenerPayload<UserType>).message\r\n          )\r\n        );\r\n        break;\r\n      case 'delete':\r\n        dispatch(\r\n          userDeleted<UserType>(\r\n            ((payload as unknown) as UserListenerPayload<UserType>).message\r\n          )\r\n        );\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  },\r\n});\r\n// end::RDX-method-listener-user[]\r\n","import Pubnub from 'pubnub';\r\nimport { Dispatch } from 'redux';\r\nimport {\r\n  SpaceUpdatedEventAction,\r\n  SpaceDeletedEventAction,\r\n  SpaceListenerActions,\r\n  SpaceEventMessage,\r\n  Space,\r\n  SpaceListenerPayload,\r\n} from './SpaceActions';\r\nimport { SpaceActionType } from './SpaceActionType.enum';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\n\r\n// tag::RDX-type-event-space-updated[]\r\nexport const spaceUpdated = <ReceivedSpace extends Space<ObjectsCustom>>(\r\n  payload: SpaceEventMessage<ReceivedSpace>\r\n): SpaceUpdatedEventAction<ReceivedSpace> => ({\r\n  type: SpaceActionType.SPACE_UPDATED_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-type-event-space-updated[]\r\n\r\n// tag::RDX-type-event-space-deleted[]\r\nexport const spaceDeleted = <ReceivedSpace extends Space<ObjectsCustom>>(\r\n  payload: SpaceEventMessage<ReceivedSpace>\r\n): SpaceDeletedEventAction<ReceivedSpace> => ({\r\n  type: SpaceActionType.SPACE_DELETED_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-type-event-space-deleted[]\r\n\r\n// tag::RDX-method-listener-space[]\r\nexport const createSpaceListener = <ReceivedSpace extends Space<ObjectsCustom>>(\r\n  dispatch: Dispatch<SpaceListenerActions<ReceivedSpace>>\r\n) => ({\r\n  space: (payload: Pubnub.SpaceEvent) => {\r\n    switch (payload.message.event) {\r\n      case 'update':\r\n        dispatch(\r\n          spaceUpdated<ReceivedSpace>(\r\n            ((payload as unknown) as SpaceListenerPayload<ReceivedSpace>)\r\n              .message\r\n          )\r\n        );\r\n        break;\r\n      case 'delete':\r\n        dispatch(\r\n          spaceDeleted<ReceivedSpace>(\r\n            ((payload as unknown) as SpaceListenerPayload<ReceivedSpace>)\r\n              .message\r\n          )\r\n        );\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  },\r\n});\r\n// end::RDX-method-listener-space[]\r\n","import Pubnub from 'pubnub';\r\nimport { Dispatch } from 'redux';\r\nimport {\r\n  MembershipListenerActions,\r\n  UserMembershipUpdatedOnSpaceEventAction,\r\n  UserAddedToSpaceEventAction,\r\n  UserRemovedFromSpaceEventAction,\r\n  Membership,\r\n  MembershipEventMessage,\r\n  MembershipListenerPayload,\r\n} from './MembershipActions';\r\nimport { MembershipActionType } from './MembershipActionType.enum';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\nimport { Space } from 'features/space/SpaceActions';\r\n\r\nconst userMembershipUpdatedOnSpace = <\r\n  ReceivedMembership extends Membership<ObjectsCustom, Space<ObjectsCustom>>\r\n>(\r\n  payload: MembershipEventMessage<ReceivedMembership>\r\n): UserMembershipUpdatedOnSpaceEventAction<ReceivedMembership> => ({\r\n  type: MembershipActionType.USER_MEMBERSHIP_UPDATED_ON_SPACE_EVENT,\r\n  payload,\r\n});\r\n\r\nconst userAddedToSpace = <\r\n  ReceivedMembership extends Membership<ObjectsCustom, Space<ObjectsCustom>>\r\n>(\r\n  payload: MembershipEventMessage<ReceivedMembership>\r\n): UserAddedToSpaceEventAction<ReceivedMembership> => ({\r\n  type: MembershipActionType.USER_ADDED_TO_SPACE_EVENT,\r\n  payload,\r\n});\r\n\r\nconst userRemovedFromSpace = <\r\n  ReceivedMembership extends Membership<ObjectsCustom, Space<ObjectsCustom>>\r\n>(\r\n  payload: MembershipEventMessage<ReceivedMembership>\r\n): UserRemovedFromSpaceEventAction<ReceivedMembership> => ({\r\n  type: MembershipActionType.USER_REMOVED_FROM_SPACE_EVENT,\r\n  payload,\r\n});\r\n\r\n// tag::RDX-method-listener-membership[]\r\nexport const createMembershipListener = <\r\n  ReceivedMembership extends Membership<\r\n    ObjectsCustom,\r\n    Space<ObjectsCustom>\r\n  > = Membership\r\n>(\r\n  dispatch: Dispatch<MembershipListenerActions<ReceivedMembership>>\r\n) => ({\r\n  membership: (payload: Pubnub.MembershipEvent) => {\r\n    switch (payload.message.event) {\r\n      case 'create':\r\n        dispatch(\r\n          userAddedToSpace(\r\n            ((payload as unknown) as MembershipListenerPayload<\r\n              ReceivedMembership\r\n            >).message\r\n          )\r\n        );\r\n        break;\r\n      case 'update':\r\n        dispatch(\r\n          userMembershipUpdatedOnSpace(\r\n            ((payload as unknown) as MembershipListenerPayload<\r\n              ReceivedMembership\r\n            >).message\r\n          )\r\n        );\r\n        break;\r\n      case 'delete':\r\n        dispatch(\r\n          userRemovedFromSpace(\r\n            ((payload as unknown) as MembershipListenerPayload<\r\n              ReceivedMembership\r\n            >).message\r\n          )\r\n        );\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  },\r\n});\r\n// end::RDX-method-listener-membership[]\r\n","import Pubnub from 'pubnub';\r\nimport { Dispatch } from 'redux';\r\nimport { MessageReceivedAction, Message } from './MessageActions';\r\nimport { MessageActionType } from './MessageActionType.enum';\r\n\r\n// tag::RDX-type-messages[]\r\nexport const messageReceived = <MessageType extends Message>(\r\n  payload: MessageType\r\n): MessageReceivedAction<MessageType> => ({\r\n  type: MessageActionType.MESSAGE_RECEIVED,\r\n  payload,\r\n});\r\n// end::RDX-type-messages[]\r\n\r\n// tag::RDX-method-listener-messages[]\r\nexport const createMessageListener = <MessageType extends Message>(\r\n  dispatch: Dispatch<MessageReceivedAction<MessageType>>\r\n) => ({\r\n  message: (payload: Pubnub.MessageEvent) =>\r\n    dispatch(messageReceived<MessageType>((payload as unknown) as MessageType)),\r\n});\r\n// end::RDX-method-listener-messages[]\r\n","// tag::RDX-enum-presence-category[]\r\nexport enum PresenceCategory {\r\n  JOIN = 'join',\r\n  STATE_CHANGE = 'state-change',\r\n  LEAVE = 'leave',\r\n  TIMEOUT = 'timeout',\r\n}\r\n// end::RDX-enum-presence-category[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  PresenceListenerActions,\r\n  JoinEventAction,\r\n  LeaveEventAction,\r\n  TimeoutEventAction,\r\n  StateChangeEventAction,\r\n  PresenceEventMessage,\r\n} from './PresenceActions';\r\nimport { PresenceActionType } from './PresenceActionType.enum';\r\nimport { PresenceCategory } from './PresenceCategory.enum';\r\n\r\n// tag::RDX-type-presence-user-join[]\r\nexport const userJoin = (payload: PresenceEventMessage): JoinEventAction => ({\r\n  type: PresenceActionType.JOIN_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-type-presence-user-join[]\r\n\r\n// tag::RDX-type-presence-user-leave[]\r\nexport const userLeave = (payload: PresenceEventMessage): LeaveEventAction => ({\r\n  type: PresenceActionType.LEAVE_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-type-presence-user-leave[]\r\n\r\n// tag::RDX-type-presence-user-timeout[]\r\nexport const userTimeout = (\r\n  payload: PresenceEventMessage\r\n): TimeoutEventAction => ({\r\n  type: PresenceActionType.TIMEOUT_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-type-presence-user-timeout[]\r\n\r\n// tag::RDX-type-presence-user-change[]\r\nexport const userStateChange = (\r\n  payload: PresenceEventMessage\r\n): StateChangeEventAction => ({\r\n  type: PresenceActionType.STATE_CHANGE_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-type-presence-user-change[]\r\n\r\n// tag::RDX-method-listener-presence[]\r\nexport const createPresenceListener = (\r\n  dispatch: Dispatch<PresenceListenerActions>\r\n) => ({\r\n  presence: (payload: PresenceEventMessage) => {\r\n    switch (payload.action) {\r\n      case PresenceCategory.JOIN:\r\n        dispatch(userJoin(payload));\r\n        break;\r\n      case PresenceCategory.LEAVE:\r\n        dispatch(userLeave(payload));\r\n        break;\r\n      case PresenceCategory.TIMEOUT:\r\n        dispatch(userTimeout(payload));\r\n        break;\r\n      case PresenceCategory.STATE_CHANGE:\r\n        dispatch(userStateChange(payload));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  },\r\n});\r\n// end::RDX-method-listener-presence[]\r\n","import Pubnub from 'pubnub';\r\nimport { Dispatch } from 'redux';\r\nimport { SignalReceivedAction, Signal } from './SignalActions';\r\nimport { SignalActionType } from './SignalActionType.enum';\r\n\r\n// tag::RDX-type-signals[]\r\nexport const signalReceived = <SignalType extends Signal>(\r\n  payload: SignalType\r\n): SignalReceivedAction<SignalType> => ({\r\n  type: SignalActionType.SIGNAL_RECEIVED,\r\n  payload,\r\n});\r\n// end::RDX-type-signals[]\r\n\r\n// tag::RDX-method-listener-signals[]\r\nexport const createSignalListener = <SignalType extends Signal>(\r\n  dispatch: Dispatch<SignalReceivedAction<SignalType>>\r\n) => ({\r\n  signal: (payload: Pubnub.SignalEvent) =>\r\n    dispatch(signalReceived<SignalType>((payload as unknown) as SignalType)),\r\n});\r\n// end::RDX-method-listener-signals[]\r\n","// tag::RDX-enum-error-category[]\r\nexport enum ErrorStatusCategory {\r\n  PN_NETWORK_ISSUES_CATEGORY = 'PNNetworkIssuesCategory',\r\n  PN_ACCES_DENIED_CATEGORY = 'PNAccessDeniedCategory',\r\n  PN_MALFORMED_RESPONSE_CATEGORY = 'PNMalformedResponseCategory',\r\n  PN_BAD_REQUEST_CATEGORY = 'PNBadRequestCategory',\r\n  PN_DECRYPTION_ERROR_CATEGORY = 'PNDecryptionErrorCategory',\r\n  PN_REQUEST_MESSAGE_COUNT_EXCEEDED_CATEGORY = 'PNRequestMessageCountExceedCategory',\r\n  PN_UNKNOWN_CATEGORY = 'PNUnknownCategory',\r\n}\r\n// end::RDX-enum-error-category[]\r\n","// tag::RDX-enum-error-action[]\r\nexport enum ErrorStatusActionType {\r\n  NETWORK_ISSUES_EVENT = 'pubnub/NETWORK_ISSUES_EVENT',\r\n  ACCESS_DENIED_EVENT = 'pubnub/ACCESS_DENIED_EVENT',\r\n  MALFORMED_RESPONSE_EVENT = 'pubnub/MALFORMED_RESPONSE_EVENT',\r\n  BAD_REQUEST_EVENT = 'pubnub/BAD_REQUEST_EVENT',\r\n  DECRYPTION_ERROR_EVENT = 'pubnub/DECRYPTION_ERROR_EVENT',\r\n  TIMEOUT_CONNECTION_EVENT = 'pubnub/TIMEOUT_CONNECTION_EVENT',\r\n  REQUEST_MESSAGE_COUNT_EXCEED_EVENT = 'pubnub/REQUEST_MESSAGE_COUNT_EXCEED_EVENT',\r\n  UNKNOWN_EVENT = 'pubnub/UNKNOWN_EVENT',\r\n}\r\n// end::RDX-enum-error-action[]\r\n","import { Dispatch } from 'redux';\r\nimport { ErrorStatusCategory } from './ErrorStatusCategory.enum';\r\nimport { ErrorStatusActionType } from './ErrorStatusActionType.enum';\r\nimport {\r\n  NetworkIssuesEventAction,\r\n  AccessDeniedEventAction,\r\n  MalformedResponseEventAction,\r\n  BadRequestEventAction,\r\n  DecryptionErrorEventAction,\r\n  TimeoutConnectionEventAction,\r\n  RequestMessageCountExceedEventAction,\r\n  UnknownEventAction,\r\n  ErrorStatusResponse,\r\n} from './ErrorStatusActions';\r\n\r\n// tag::RDX-event-error-network[]\r\nexport const networkIssues = (\r\n  payload: ErrorStatusResponse\r\n): NetworkIssuesEventAction => ({\r\n  type: ErrorStatusActionType.NETWORK_ISSUES_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-event-error-network[]\r\n\r\n// tag::RDX-event-error-accessdenied[]\r\nexport const accessDenied = (\r\n  payload: ErrorStatusResponse\r\n): AccessDeniedEventAction => ({\r\n  type: ErrorStatusActionType.ACCESS_DENIED_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-event-error-accessdenied[]\r\n\r\n// tag::RDX-event-error-malformed[]\r\nexport const malformedResponse = (\r\n  payload: ErrorStatusResponse\r\n): MalformedResponseEventAction => ({\r\n  type: ErrorStatusActionType.MALFORMED_RESPONSE_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-event-error-malformed[]\r\n\r\n// tag::RDX-event-error-badrequest[]\r\nexport const badRequest = (\r\n  payload: ErrorStatusResponse\r\n): BadRequestEventAction => ({\r\n  type: ErrorStatusActionType.BAD_REQUEST_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-event-error-badrequest[]\r\n\r\n// tag::RDX-event-error-decrypt[]\r\nexport const decryptionError = (\r\n  payload: ErrorStatusResponse\r\n): DecryptionErrorEventAction => ({\r\n  type: ErrorStatusActionType.DECRYPTION_ERROR_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-event-error-decrypt[]\r\n\r\n// tag::RDX-event-error-timeout[]\r\nexport const timeoutConnection = (\r\n  payload: ErrorStatusResponse\r\n): TimeoutConnectionEventAction => ({\r\n  type: ErrorStatusActionType.TIMEOUT_CONNECTION_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-event-error-timeout[]\r\n\r\n// tag::RDX-event-error-requestcount[]\r\nexport const requestMessageCountExceeded = (\r\n  payload: ErrorStatusResponse\r\n): RequestMessageCountExceedEventAction => ({\r\n  type: ErrorStatusActionType.REQUEST_MESSAGE_COUNT_EXCEED_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-event-error-requestcount[]\r\n\r\n// tag::RDX-event-error-unknown[]\r\nexport const unknown = (payload: ErrorStatusResponse): UnknownEventAction => ({\r\n  type: ErrorStatusActionType.UNKNOWN_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-event-error-unknown[]\r\n\r\nexport type ErrorStatusListenerActions =\r\n  | NetworkIssuesEventAction\r\n  | AccessDeniedEventAction\r\n  | MalformedResponseEventAction\r\n  | BadRequestEventAction\r\n  | RequestMessageCountExceedEventAction\r\n  | DecryptionErrorEventAction\r\n  | TimeoutConnectionEventAction\r\n  | UnknownEventAction;\r\n\r\n// tag::RDX-listener-error[]\r\nexport const createErrorStatusListener = (\r\n  dispatch: Dispatch<ErrorStatusListenerActions>\r\n) => ({\r\n  status: (payload: ErrorStatusResponse) => {\r\n    switch (payload.category) {\r\n      case ErrorStatusCategory.PN_ACCES_DENIED_CATEGORY:\r\n        dispatch(accessDenied(payload));\r\n        break;\r\n      case ErrorStatusCategory.PN_MALFORMED_RESPONSE_CATEGORY:\r\n        dispatch(malformedResponse(payload));\r\n        break;\r\n      case ErrorStatusCategory.PN_BAD_REQUEST_CATEGORY:\r\n        dispatch(badRequest(payload));\r\n        break;\r\n      case ErrorStatusCategory.PN_DECRYPTION_ERROR_CATEGORY:\r\n        dispatch(decryptionError(payload));\r\n        break;\r\n      case ErrorStatusCategory.PN_REQUEST_MESSAGE_COUNT_EXCEEDED_CATEGORY:\r\n        dispatch(requestMessageCountExceeded(payload));\r\n        break;\r\n      case ErrorStatusCategory.PN_UNKNOWN_CATEGORY:\r\n        dispatch(unknown(payload));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  },\r\n});\r\n// end::RDX-listener-error[]\r\n","// tag::RDX-enum-networkstatus-action[]\r\nexport enum NetworkStatusActionType {\r\n  NETWORK_UP_EVENT = 'pubnub/NETWORK_UP_EVENT',\r\n  NETWORK_DOWN_EVENT = 'pubnub/NETWORK_DOWN_EVENT',\r\n}\r\n// end::RDX-enum-networkstatus-action[]\r\n","// tag::RDX-enum-networkstatus-category[]\r\nexport enum NetworkStatusCategory {\r\n  PN_NETWORK_UP_CATEGORY = 'PNNetworkUpCategory',\r\n  PN_NETWORK_DOWN_CATEGORY = 'PNNetworkDownCategory',\r\n  PN_RECONNECTED_CATEGORY = 'PNReconnectedCategory',\r\n  PN_CONNECTED_CATEGORY = 'PNConnectedCategory',\r\n  PN_TIMEOUT_CATEGORY = 'PNTimeoutCategory',\r\n}\r\n// end::RDX-enum-networkstatus-category[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  NetworkUpEventAction,\r\n  NetworkDownEventAction,\r\n  NetworkStatusResponse,\r\n} from './NetworkStatusActions';\r\nimport { NetworkStatusActionType } from './NetworkStatusActionType.enum';\r\nimport { NetworkStatusCategory } from './NetworkStatusCategory.enum';\r\n\r\n// tag::RDX-type-networkup[]\r\nexport const networkUp = (): NetworkUpEventAction => ({\r\n  type: NetworkStatusActionType.NETWORK_UP_EVENT,\r\n});\r\n// end::RDX-type-networkup[]\r\n\r\n// tag::RDX-type-networkdown[]\r\nexport const networkDown = (): NetworkDownEventAction => ({\r\n  type: NetworkStatusActionType.NETWORK_DOWN_EVENT,\r\n});\r\n// end::RDX-type-networkdown[]\r\n\r\n// tag::RDX-type-networkstatus[]\r\nexport type NetworkStatusListenerActions =\r\n  | NetworkUpEventAction\r\n  | NetworkDownEventAction;\r\n// end::RDX-type-networkstatus[]\r\n\r\n// tag::RDX-method-listener-networkstatus[]\r\nexport const createNetworkStatusListener = (\r\n  dispatch: Dispatch<NetworkStatusListenerActions>\r\n) => ({\r\n  status: (payload: NetworkStatusResponse) => {\r\n    switch (payload.category) {\r\n      case NetworkStatusCategory.PN_NETWORK_UP_CATEGORY:\r\n        dispatch(networkUp());\r\n        break;\r\n      case NetworkStatusCategory.PN_NETWORK_DOWN_CATEGORY:\r\n        dispatch(networkDown());\r\n        break;\r\n      case NetworkStatusCategory.PN_RECONNECTED_CATEGORY:\r\n        dispatch(networkUp());\r\n        break;\r\n      case NetworkStatusCategory.PN_CONNECTED_CATEGORY:\r\n        dispatch(networkUp());\r\n        break;\r\n      case NetworkStatusCategory.PN_TIMEOUT_CATEGORY:\r\n        dispatch(networkDown());\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  },\r\n});\r\n// end::RDX-method-listener-networkstatus[]\r\n","// tag::RDX-enum-subscription-action[]\r\nexport enum SubscriptionStatusActionType {\r\n  RECONNECTED_EVENT = 'pubnub/RECONNECTED_EVENT',\r\n  CONNECTED_EVENT = 'pubnub/CONNECTED_EVENT',\r\n}\r\n// end::RDX-enum-subscription-action[]\r\n","// tag::RDX-enum-subscription-category[]\r\nexport enum SubscriptionStatusCategory {\r\n  PN_CONNECTED_CATEGORY = 'PNConnectedCategory',\r\n  PN_RECONNECTED_CATEGORY = 'PNReconnectedCategory',\r\n}\r\n// end::RDX-enum-subscription-category[]\r\n","import { Dispatch } from 'redux';\r\nimport {\r\n  ReconnectedAction,\r\n  ConnectedAction,\r\n  SubscriptionStatusResponse,\r\n} from './SubscribeStatusActions';\r\nimport { SubscriptionStatusActionType } from './SubscriptionStatusActionType.enum';\r\nimport { SubscriptionStatusCategory } from './SubscriptionStatusCategory.enum';\r\n\r\n// tag::RDX-event-subscription-reconnect[]\r\nexport const reconnected = (\r\n  payload: SubscriptionStatusResponse\r\n): ReconnectedAction => ({\r\n  type: SubscriptionStatusActionType.RECONNECTED_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-event-subscription-reconnect[]\r\n\r\n// tag::RDX-event-subscription-connect[]\r\nexport const connected = (\r\n  payload: SubscriptionStatusResponse\r\n): ConnectedAction => ({\r\n  type: SubscriptionStatusActionType.CONNECTED_EVENT,\r\n  payload,\r\n});\r\n// end::RDX-event-subscription-connect[]\r\n\r\n// tag::RDX-event-subscription-status[]\r\nexport type SubscriptionStatusListenerActions =\r\n  | ReconnectedAction\r\n  | ConnectedAction;\r\n// end::RDX-event-subscription-status[]\r\n\r\n// tag::RDX-method-listener-subscription[]\r\nexport const createSubscriptionStatusListener = (\r\n  dispatch: Dispatch<SubscriptionStatusListenerActions>\r\n) => ({\r\n  status: (payload: SubscriptionStatusResponse) => {\r\n    switch (payload.category) {\r\n      case SubscriptionStatusCategory.PN_CONNECTED_CATEGORY:\r\n        dispatch(connected(payload));\r\n        break;\r\n      case SubscriptionStatusCategory.PN_RECONNECTED_CATEGORY:\r\n        dispatch(reconnected(payload));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  },\r\n});\r\n// end::RDX-method-listener-subscription[]\r\n","import Pubnub, {\r\n  PresenceEvent,\r\n  SignalEvent,\r\n  UserEvent,\r\n  SpaceEvent,\r\n  MessageActionEvent,\r\n  StatusEvent,\r\n  MembershipEvent,\r\n} from 'pubnub';\r\n\r\n/**\r\n * Combines multiple listener objects into one object that supports all of them.\r\n *\r\n * @param listeners Array of listener objects.\r\n * @returns The combined listener Object.\r\n */\r\nexport const combineListeners = (...listeners: Pubnub.ListenerParameters[]) => {\r\n  return Object.assign({}, ...mergeListenersByType(listeners));\r\n};\r\n\r\n/**\r\n * Take a list of listeners and combine listeners of the same type together.\r\n *\r\n * @param listeners Array of listener objects.\r\n * @returns Array of listener objects with like types combined to single listener object.\r\n */\r\nconst mergeListenersByType = (\r\n  listeners: Pubnub.ListenerParameters[]\r\n): Pubnub.ListenerParameters[] => {\r\n  const result: Pubnub.ListenerParameters[] = [];\r\n  const incomingListeners: {\r\n    [key in keyof Pubnub.ListenerParameters]: Pubnub.ListenerParameters[];\r\n  } = {};\r\n\r\n  // group the listeners by type so we can combine them\r\n  listeners.forEach((listener) => {\r\n    if (listener.message !== undefined) {\r\n      if (incomingListeners.message === undefined) {\r\n        incomingListeners['message'] = [];\r\n      }\r\n\r\n      incomingListeners['message'].push(listener);\r\n    }\r\n\r\n    if (listener.presence !== undefined) {\r\n      if (incomingListeners.presence === undefined) {\r\n        incomingListeners['presence'] = [];\r\n      }\r\n\r\n      incomingListeners['presence'].push(listener);\r\n    }\r\n\r\n    if (listener.signal !== undefined) {\r\n      if (incomingListeners.signal === undefined) {\r\n        incomingListeners['signal'] = [];\r\n      }\r\n\r\n      incomingListeners['signal'].push(listener);\r\n    }\r\n\r\n    if (listener.user !== undefined) {\r\n      if (incomingListeners.user === undefined) {\r\n        incomingListeners['user'] = [];\r\n      }\r\n\r\n      incomingListeners['user'].push(listener);\r\n    }\r\n\r\n    if (listener.space !== undefined) {\r\n      if (incomingListeners.space === undefined) {\r\n        incomingListeners['space'] = [];\r\n      }\r\n\r\n      incomingListeners['space'].push(listener);\r\n    }\r\n\r\n    if (listener.membership !== undefined) {\r\n      if (incomingListeners.membership === undefined) {\r\n        incomingListeners['membership'] = [];\r\n      }\r\n\r\n      incomingListeners['membership'].push(listener);\r\n    }\r\n\r\n    if (listener.status !== undefined) {\r\n      if (incomingListeners.status === undefined) {\r\n        incomingListeners['status'] = [];\r\n      }\r\n\r\n      incomingListeners['status'].push(listener);\r\n    }\r\n  });\r\n\r\n  // merge the grouped listeners and add to the result list\r\n  Object.entries(incomingListeners).forEach(\r\n    ([listenerType, listenersOfType]) => {\r\n      if (listenersOfType && listenersOfType.length === 1) {\r\n        // only one listener for this type so add directly to the result list\r\n        result.push(listenersOfType[0]);\r\n      } else if (listenersOfType && listenersOfType.length > 1) {\r\n        // multiple listeners for this type so combine them and add to the result list\r\n        result.push(\r\n          createCombinedListener(\r\n            listenerType as keyof Pubnub.ListenerParameters,\r\n            listenersOfType\r\n          )\r\n        );\r\n      }\r\n    }\r\n  );\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n * Take a list of listeners of the same type and combine to single listener object.\r\n * For example an array of status listener objects combined to a single status listener object.\r\n *\r\n * @param listenerType The listener type.\r\n * @param listeners The Array of listeners of the same type.\r\n */\r\nconst createCombinedListener = (\r\n  listenerType: keyof Pubnub.ListenerParameters,\r\n  listeners: Pubnub.ListenerParameters[]\r\n): Pubnub.ListenerParameters => {\r\n  // returns a single listener which invokes each of the incomming listeners\r\n  return {\r\n    [listenerType]: (\r\n      payload: MessageEvent &\r\n        PresenceEvent &\r\n        SignalEvent &\r\n        UserEvent &\r\n        SpaceEvent &\r\n        MembershipEvent &\r\n        StatusEvent &\r\n        MessageActionEvent\r\n    ) => {\r\n      listeners.forEach((listener) => {\r\n        const currentListener = listener[listenerType];\r\n\r\n        if (currentListener !== undefined) {\r\n          currentListener(payload);\r\n        }\r\n      });\r\n    },\r\n  };\r\n};\r\n","import { Dispatch } from 'redux';\r\nimport { createMessageListener } from '../message/MessageListener';\r\nimport { createPresenceListener } from '../presence/PresenceListener';\r\nimport { createSignalListener } from '../signal/SignalListener';\r\nimport { createErrorStatusListener } from '../errorStatus/ErrorStatusListener';\r\nimport { createNetworkStatusListener } from '../networkStatus/NetworkStatusListener';\r\nimport { createSubscriptionStatusListener } from '../subscriptionStatus/SubscriptionStatusListener';\r\nimport { createMembershipListener } from '../membership/MembershipListener';\r\nimport { createSpaceListener } from '../space/SpaceListener';\r\nimport { createUserListener } from '../user/UserListener';\r\nimport { combineListeners } from '../../foundations/CombineListeners';\r\n\r\n// tag::RDX-listener-pubnub[]\r\nexport const createPubNubListener = (dispatch: Dispatch) =>\r\n  combineListeners(\r\n    createMessageListener(dispatch),\r\n    createPresenceListener(dispatch),\r\n    createSignalListener(dispatch),\r\n    createErrorStatusListener(dispatch),\r\n    createErrorStatusListener(dispatch),\r\n    createNetworkStatusListener(dispatch),\r\n    createSubscriptionStatusListener(dispatch),\r\n    createUserListener(dispatch),\r\n    createSpaceListener(dispatch),\r\n    createMembershipListener(dispatch)\r\n  );\r\n// end::RDX-listener-pubnub[]\r\n","import {\r\n  Message,\r\n  MessageActions,\r\n  FetchMessageHistorySuccess,\r\n} from './MessageActions';\r\nimport { MessageActionType } from './MessageActionType.enum';\r\nimport { ActionMeta, AnyMeta } from '../../foundations/ActionMeta';\r\n\r\n// tag::RDX-type-messages[]\r\nexport type MessageState<MessageType extends Message> = {\r\n  byId: {\r\n    [channel: string]: MessageType[];\r\n  };\r\n};\r\n// end::RDX-type-messages[]\r\n\r\nconst createInitialState = <\r\n  MessageType extends Message\r\n>(): MessageState<MessageType> => ({\r\n  byId: {},\r\n});\r\n\r\nconst messageReceived = <MessageType extends Message>(\r\n  state: MessageState<MessageType>,\r\n  payload: MessageType\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  if (newState.byId[payload.channel] === undefined) {\r\n    newState.byId[payload.channel] = [];\r\n  }\r\n\r\n  newState.byId[payload.channel] = [...newState.byId[payload.channel], payload];\r\n\r\n  return newState;\r\n};\r\n\r\nconst messageHistoryRetrieved = <\r\n  MessageContentType,\r\n  MessageType extends Message\r\n>(\r\n  state: MessageState<MessageType>,\r\n  payload: FetchMessageHistorySuccess<MessageContentType>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  if (newState.byId[payload.request.channel] === undefined) {\r\n    newState.byId[payload.request.channel] = [];\r\n  }\r\n\r\n  const results: MessageType[] = payload.response.messages.map(\r\n    (m) =>\r\n      (({\r\n        channel: payload.request.channel,\r\n        message: m.entry as MessageContentType,\r\n        timetoken: m.timetoken,\r\n      } as unknown) as MessageType)\r\n  );\r\n\r\n  newState.byId[payload.request.channel] = [\r\n    ...newState.byId[payload.request.channel],\r\n    ...results,\r\n  ];\r\n\r\n  return newState;\r\n};\r\n\r\n// tag::RDX-reducer-messages[]\r\nexport const createMessageReducer = <\r\n  MessageType extends Message = Message,\r\n  MessageContentType extends object = {},\r\n  MessageMetaType extends object = {},\r\n  Meta extends ActionMeta = AnyMeta\r\n>() => (\r\n  state: MessageState<MessageType> = createInitialState<MessageType>(),\r\n  action: MessageActions<MessageType, MessageContentType, MessageMetaType, Meta>\r\n): MessageState<MessageType> => {\r\n  switch (action.type) {\r\n    case MessageActionType.MESSAGE_RECEIVED:\r\n      return messageReceived<MessageType>(state, action.payload);\r\n    case MessageActionType.MESSAGE_HISTORY_RETRIEVED:\r\n      return messageHistoryRetrieved<MessageContentType, MessageType>(\r\n        state,\r\n        action.payload\r\n      );\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n// end::RDX-reducer-messages[]\r\n","import { Signal, SignalActions } from './SignalActions';\r\nimport { SignalActionType } from './SignalActionType.enum';\r\nimport { ActionMeta, AnyMeta } from '../../foundations/ActionMeta';\r\n\r\n// tag::RDX-type-signals[]\r\nexport type SignalState<SignalType extends Signal> = {\r\n  byId: {\r\n    [channel: string]: SignalType[];\r\n  };\r\n};\r\n// end::RDX-type-signals[]\r\n\r\nconst createInitialState = <\r\n  SignalType extends Signal\r\n>(): SignalState<SignalType> => ({\r\n  byId: {},\r\n});\r\n\r\nconst signalReceived = <SignalType extends Signal>(\r\n  state: SignalState<SignalType>,\r\n  payload: SignalType\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  if (newState.byId[payload.channel] === undefined) {\r\n    newState.byId[payload.channel] = [];\r\n  }\r\n\r\n  newState.byId[payload.channel] = [...newState.byId[payload.channel], payload];\r\n\r\n  return newState;\r\n};\r\n\r\n// tag::RDX-reducer-signals[]\r\nexport const createSignalReducer = <\r\n  SignalType extends Signal = Signal,\r\n  SignalContentType extends object = {},\r\n  Meta extends ActionMeta = AnyMeta\r\n>() => (\r\n  state: SignalState<SignalType> = createInitialState<SignalType>(),\r\n  action: SignalActions<SignalType, SignalContentType, Meta>\r\n): SignalState<SignalType> => {\r\n  switch (action.type) {\r\n    case SignalActionType.SIGNAL_RECEIVED:\r\n      return signalReceived<SignalType>(state, action.payload);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n// end::RDX-reducer-signals[]\r\n","import { AnyAction } from 'redux';\r\nimport { PresenceActionType } from './PresenceActionType.enum';\r\nimport {\r\n  PresenceListenerActions,\r\n  PresenceEventMessage,\r\n  Presence,\r\n  HereNowResponse,\r\n  HereNowSuccess,\r\n  HereNowRetrievedAction,\r\n  PresenceStateRetrievedAction,\r\n} from './PresenceActions';\r\nimport { PresenceState } from './PresenceState';\r\n\r\n// tag::RDX-type-presence-byid[]\r\nexport interface PresencebyIdState<ReceivedPresence extends Presence> {\r\n  byId: {\r\n    [channelId: string]: {\r\n      name: string;\r\n      occupants: ReceivedPresence[];\r\n      occupancy: number;\r\n    };\r\n  };\r\n  totalOccupancy: number;\r\n}\r\n// end::RDX-type-presence-byid[]\r\n\r\nconst createInitialState = () => {\r\n  return {\r\n    byId: {},\r\n    totalOccupancy: 0,\r\n  };\r\n};\r\n\r\nconst hereNow = <ReceivedPresence extends Presence<PresenceState>>(\r\n  state: PresencebyIdState<ReceivedPresence>,\r\n  payload: HereNowSuccess<ReceivedPresence>\r\n) => {\r\n  const newState = {\r\n    byId: {\r\n      ...state.byId,\r\n      ...payload.response.channels,\r\n    },\r\n    totalOccupancy: payload.response.totalOccupancy,\r\n  };\r\n\r\n  return newState;\r\n};\r\n\r\nconst getState = <ReceivedPresence extends Presence<PresenceState>>(\r\n  state: PresencebyIdState<ReceivedPresence>,\r\n  payload: HereNowResponse<ReceivedPresence>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n    totalOccupancy: state.totalOccupancy,\r\n  };\r\n\r\n  Object.keys(payload.channels).forEach((channel) => {\r\n    // update occupant state if exists\r\n    if (newState.byId[channel]) {\r\n      newState.byId[channel] = payload.channels[channel];\r\n    }\r\n  });\r\n\r\n  return newState;\r\n};\r\n\r\nconst userJoined = <ReceivedPresence extends Presence<PresenceState>>(\r\n  state: PresencebyIdState<ReceivedPresence>,\r\n  payload: PresenceEventMessage<ReceivedPresence>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n    totalOccupancy: state.totalOccupancy,\r\n  };\r\n\r\n  let occupants: ReceivedPresence[] = [];\r\n\r\n  // remove occupant if exists\r\n  if (newState.byId[payload.channel]) {\r\n    occupants = newState.byId[payload.channel].occupants;\r\n\r\n    newState.byId[payload.channel].occupants = occupants.filter(\r\n      (occupant) => occupant.uuid !== payload.uuid\r\n    );\r\n\r\n    newState.byId[payload.channel].occupancy =\r\n      newState.byId[payload.channel].occupants.length;\r\n\r\n    if (occupants.length === newState.byId[payload.channel].occupants.length) {\r\n      newState.totalOccupancy++;\r\n    }\r\n  } else {\r\n    newState.totalOccupancy++;\r\n  }\r\n\r\n  // add occupant and update occupancy\r\n  newState.byId[payload.channel] = {\r\n    name: payload.channel,\r\n    occupants: [\r\n      ...occupants,\r\n      {\r\n        uuid: payload.uuid,\r\n        state: payload.state,\r\n      } as ReceivedPresence,\r\n    ],\r\n    occupancy: payload.occupancy,\r\n  };\r\n\r\n  return newState;\r\n};\r\n\r\nconst userLeft = <ReceivedPresence extends Presence<PresenceState>>(\r\n  state: PresencebyIdState<ReceivedPresence>,\r\n  payload: PresenceEventMessage<ReceivedPresence>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n    totalOccupancy: state.totalOccupancy,\r\n  };\r\n\r\n  // remove occupant if exists\r\n  if (newState.byId[payload.channel]) {\r\n    const occupants = newState.byId[payload.channel].occupants;\r\n\r\n    newState.byId[payload.channel].occupants = occupants.filter(\r\n      (occupant) => occupant.uuid !== payload.uuid\r\n    );\r\n\r\n    if (occupants.length > newState.byId[payload.channel].occupants.length) {\r\n      newState.byId[payload.channel].occupancy--;\r\n      newState.totalOccupancy--;\r\n    }\r\n  }\r\n\r\n  return newState;\r\n};\r\n\r\nconst userStateChange = <ReceivedPresence extends Presence<PresenceState>>(\r\n  state: PresencebyIdState<ReceivedPresence>,\r\n  payload: PresenceEventMessage<ReceivedPresence>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n    totalOccupancy: state.totalOccupancy,\r\n  };\r\n\r\n  // update occupant state if exists\r\n  if (newState.byId[payload.channel]) {\r\n    const occupants = newState.byId[payload.channel].occupants;\r\n\r\n    occupants.forEach((occupant) => {\r\n      if (occupant.uuid === payload.uuid) {\r\n        occupant.state = payload.state;\r\n      }\r\n    });\r\n  }\r\n\r\n  return newState;\r\n};\r\n\r\n// tag::RDX-type-presence-action[]\r\nexport type PresenceActions<RetrievedPresence extends Presence> =\r\n  | HereNowRetrievedAction<RetrievedPresence>\r\n  | PresenceStateRetrievedAction<RetrievedPresence>\r\n  | PresenceListenerActions;\r\n// end::RDX-type-presence-action[]\r\n\r\n// tag::RDX-type-presence[]\r\nexport type PresenceReducer<\r\n  StoredPresence extends Presence,\r\n  PresenceAction extends AnyAction\r\n> = (\r\n  state: PresencebyIdState<StoredPresence> | undefined,\r\n  action: PresenceAction\r\n) => PresencebyIdState<StoredPresence>;\r\n// end::RDX-type-presence[]\r\n\r\n// tag::RDX-method-reducer-presence[]\r\nexport const createPresenceReducer = <\r\n  StoredPresence extends Presence<PresenceState> = Presence,\r\n  PresenceAction extends AnyAction = PresenceActions<StoredPresence>\r\n>(): PresenceReducer<StoredPresence, PresenceAction> => (\r\n  state: PresencebyIdState<StoredPresence> = createInitialState(),\r\n  action: PresenceAction\r\n): PresencebyIdState<StoredPresence> => {\r\n  switch (action.type) {\r\n    case PresenceActionType.HERE_NOW_RETRIEVED:\r\n      return hereNow<StoredPresence>(state, action.payload);\r\n    case PresenceActionType.PRESENCE_STATE_RETRIEVED:\r\n      return getState<StoredPresence>(state, action.payload);\r\n    case PresenceActionType.JOIN_EVENT:\r\n      return userJoined<StoredPresence>(state, action.payload);\r\n    case PresenceActionType.LEAVE_EVENT:\r\n    case PresenceActionType.TIMEOUT_EVENT:\r\n      return userLeft<StoredPresence>(state, action.payload);\r\n    case PresenceActionType.STATE_CHANGE_EVENT:\r\n      return userStateChange<StoredPresence>(state, action.payload);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n// end::RDX-method-reducer-presence[]\r\n","import { NetworkStatusListenerActions } from './NetworkStatusListener';\r\nimport { NetworkStatusActionType } from './NetworkStatusActionType.enum';\r\n\r\n// tag::RDX-type-state-networkstatus[]\r\nexport interface NetworkStatusState {\r\n  isConnected: boolean;\r\n}\r\n// end::RDX-type-state-networkstatus[]\r\n\r\ntype NetworkStatusInitializerFunction = () => boolean;\r\n\r\n// tag::RDX-reducer-networkstatus[]\r\nexport const createNetworkStatusReducer = (\r\n  initializer: NetworkStatusInitializerFunction | boolean\r\n) => {\r\n  let initialState: NetworkStatusState;\r\n\r\n  if (typeof initializer === 'boolean') {\r\n    initialState = { isConnected: initializer };\r\n  } else if (typeof initializer === 'function') {\r\n    initialState = { isConnected: initializer() };\r\n    if (typeof initialState.isConnected !== 'boolean') {\r\n      throw new Error(\r\n        'The initializer function must return a boolean value (true or false)'\r\n      );\r\n    }\r\n  } else {\r\n    throw new Error(\r\n      'The initializer parameter must be a boolean value (true or false) or function'\r\n    );\r\n  }\r\n\r\n  return function networkStatusReducer(\r\n    state = initialState,\r\n    action: NetworkStatusListenerActions\r\n  ): NetworkStatusState {\r\n    switch (action.type) {\r\n      case NetworkStatusActionType.NETWORK_UP_EVENT:\r\n        return {\r\n          isConnected: true,\r\n        };\r\n      case NetworkStatusActionType.NETWORK_DOWN_EVENT:\r\n        return {\r\n          isConnected: false,\r\n        };\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n};\r\n// end::RDX-reducer-networkstatus[]\r\n","import { AnyAction } from 'redux';\r\nimport {\r\n  UserActions,\r\n  UserListenerActions,\r\n  UserSuccess,\r\n  DeleteUserSuccess,\r\n  FetchUsersSuccess,\r\n  FetchUserByIdSuccess,\r\n  User,\r\n  UserEventMessage,\r\n} from './UserActions';\r\nimport { UserActionType } from './UserActionType.enum';\r\nimport {\r\n  MembersActions,\r\n  FetchMembersSuccess,\r\n  Members,\r\n} from '../../features/members/MembersActions';\r\nimport {\r\n  MembershipActions,\r\n  Membership,\r\n} from '../../features/membership/MembershipActions';\r\nimport { MembersActionType } from '../../features/members/MembersActionType.enum';\r\nimport { AnyMeta } from '../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\nimport { Space } from 'features/space/SpaceActions';\r\n\r\n// tag::RDX-state-users-byid[]\r\nexport interface UsersByIdState<ReceivedUser extends User<ObjectsCustom>> {\r\n  byId: {\r\n    [userId: string]: ReceivedUser;\r\n  };\r\n}\r\n// end::RDX-state-users-byid[]\r\n\r\nconst createInitialState = () => ({\r\n  byId: {},\r\n});\r\n\r\nconst userCreated = <ReceivedUser extends User<ObjectsCustom>>(\r\n  state: UsersByIdState<ReceivedUser>,\r\n  payload: UserSuccess<ReceivedUser>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  newState.byId[payload.response.data.id] = payload.response.data;\r\n\r\n  return newState;\r\n};\r\n\r\nconst userUpdated = <ReceivedUser extends User<ObjectsCustom>>(\r\n  state: UsersByIdState<ReceivedUser>,\r\n  payload: UserSuccess<ReceivedUser>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  newState.byId[payload.response.data.id] = payload.response.data;\r\n\r\n  return newState;\r\n};\r\n\r\nconst userDeleted = <ReceivedUser extends User<ObjectsCustom>>(\r\n  state: UsersByIdState<ReceivedUser>,\r\n  payload: DeleteUserSuccess\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  delete newState.byId[payload.request.userId];\r\n\r\n  return newState;\r\n};\r\n\r\nconst usersRetrieved = <ReceivedUser extends User<ObjectsCustom>>(\r\n  state: UsersByIdState<ReceivedUser>,\r\n  payload: FetchUsersSuccess<ReceivedUser>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  payload.response.data.forEach((item) => {\r\n    newState.byId[item.id] = item;\r\n  });\r\n\r\n  return newState;\r\n};\r\n\r\nconst userRetrieved = <ReceivedUser extends User<ObjectsCustom>>(\r\n  state: UsersByIdState<ReceivedUser>,\r\n  payload: FetchUserByIdSuccess<ReceivedUser>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  newState.byId[payload.response.data.id] = payload.response.data;\r\n\r\n  return newState;\r\n};\r\n\r\nconst userUpdatedEventReceived = <ReceivedUser extends User<ObjectsCustom>>(\r\n  state: UsersByIdState<ReceivedUser>,\r\n  payload: UserEventMessage<ReceivedUser>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  newState.byId[payload.data.id] = payload.data;\r\n\r\n  return newState;\r\n};\r\n\r\nconst userDeletedEventReceived = <ReceivedUser extends User<ObjectsCustom>>(\r\n  state: UsersByIdState<ReceivedUser>,\r\n  payload: UserEventMessage<ReceivedUser>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  delete newState.byId[payload.data.id];\r\n\r\n  return newState;\r\n};\r\n\r\nconst membersRetrieved = <ReceivedUser extends User<ObjectsCustom>>(\r\n  state: UsersByIdState<ReceivedUser>,\r\n  payload: FetchMembersSuccess<Members<ObjectsCustom, ReceivedUser>>\r\n) => {\r\n  let newState = state;\r\n\r\n  if (payload.response.data.length > 0) {\r\n    newState = {\r\n      byId: {\r\n        ...state.byId,\r\n      },\r\n    };\r\n\r\n    for (let i = 0; i < payload.response.data.length; i++) {\r\n      const currentMember = payload.response.data[i];\r\n\r\n      if (currentMember.user) {\r\n        newState.byId[currentMember.id] = currentMember.user;\r\n      }\r\n    }\r\n  }\r\n\r\n  return newState;\r\n};\r\n\r\ntype UserReducerActions<StoredUser extends User<ObjectsCustom>> =\r\n  | UserActions<StoredUser, AnyMeta>\r\n  | UserListenerActions<StoredUser>\r\n  | MembersActions<Members<ObjectsCustom, Space>, AnyMeta>\r\n  | MembershipActions<Membership<ObjectsCustom, Space>, AnyMeta>;\r\n\r\n// tag::RDX-type-user[]\r\nexport type UserReducer<\r\n  StoredUser extends User<ObjectsCustom>,\r\n  UserAction extends AnyAction\r\n> = (\r\n  state: UsersByIdState<StoredUser> | undefined,\r\n  action: UserAction\r\n) => UsersByIdState<StoredUser>;\r\n// end::RDX-type-user[]\r\n\r\n// tag::RDX-method-reducer-user[]\r\nexport const createUserReducer = <\r\n  StoredUser extends User<ObjectsCustom> = User,\r\n  UserAction extends AnyAction = UserReducerActions<StoredUser>\r\n>(): UserReducer<StoredUser, UserAction> => (\r\n  state: UsersByIdState<StoredUser> = createInitialState(),\r\n  action: UserAction\r\n): UsersByIdState<StoredUser> => {\r\n  switch (action.type) {\r\n    case UserActionType.USER_CREATED:\r\n      return userCreated<StoredUser>(state, action.payload);\r\n    case UserActionType.USER_UPDATED:\r\n      return userUpdated<StoredUser>(state, action.payload);\r\n    case UserActionType.USER_DELETED:\r\n      return userDeleted<StoredUser>(state, action.payload);\r\n    case UserActionType.USERS_RETRIEVED:\r\n      return usersRetrieved<StoredUser>(state, action.payload);\r\n    case UserActionType.USER_RETRIEVED:\r\n      return userRetrieved<StoredUser>(state, action.payload);\r\n    case UserActionType.USER_UPDATED_EVENT:\r\n      return userUpdatedEventReceived<StoredUser>(state, action.payload);\r\n    case UserActionType.USER_DELETED_EVENT:\r\n      return userDeletedEventReceived<StoredUser>(state, action.payload);\r\n    case MembersActionType.MEMBERS_RETRIEVED:\r\n      return membersRetrieved<StoredUser>(state, action.payload);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n// end::RDX-method-reducer-user[]\r\n","import { UsersRetrievedAction, FetchUsersSuccess, User } from './UserActions';\r\nimport { UserActionType } from './UserActionType.enum';\r\nimport { ActionMeta, AnyMeta } from '../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\n\r\n// tag::RDX-state-userlist[]\r\ninterface UserListState {\r\n  userIds: string[];\r\n}\r\n// end::RDX-state-userlist[]\r\n\r\nconst createInitialState = (): UserListState => ({\r\n  userIds: [],\r\n});\r\n\r\nconst usersRetrieved = <UserType extends User<ObjectsCustom>>(\r\n  payload: FetchUsersSuccess<UserType>\r\n) => ({ userIds: payload.response.data.map((user) => user.id) });\r\n\r\n// tag::RDX-method-reducer-userlist[]\r\nexport const createUserListReducer = <\r\n  UserType extends User<ObjectsCustom> = User,\r\n  Meta extends ActionMeta = AnyMeta\r\n>() => (\r\n  state: UserListState = createInitialState(),\r\n  action: UsersRetrievedAction<UserType, Meta>\r\n): UserListState => {\r\n  switch (action.type) {\r\n    case UserActionType.USERS_RETRIEVED:\r\n      return usersRetrieved(action.payload);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n// end::RDX-method-reducer-userlist[]\r\n","import { AnyAction } from 'redux';\r\nimport {\r\n  SpaceActions,\r\n  SpaceListenerActions,\r\n  SpaceSuccess,\r\n  DeleteSpaceSuccess,\r\n  FetchSpacesSuccess,\r\n  FetchSpaceByIdSuccess,\r\n  Space,\r\n  SpaceEventMessage,\r\n} from './SpaceActions';\r\nimport { SpaceActionType } from './SpaceActionType.enum';\r\nimport {\r\n  MembershipActions,\r\n  FetchMembershipSuccess,\r\n  MembershipRetrievedAction,\r\n  Membership,\r\n} from '../membership/MembershipActions';\r\nimport { MembershipActionType } from '../../features/membership/MembershipActionType.enum';\r\nimport { AnyMeta } from '../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\n\r\n// tag::RDX-type-spacesbyid[]\r\nexport type SpacesByIdState<ReceivedSpace extends Space<ObjectsCustom>> = {\r\n  byId: {\r\n    [spaceId: string]: ReceivedSpace;\r\n  };\r\n};\r\n// end::RDX-type-spacesbyid[]\r\n\r\nconst createInitialState = () => ({\r\n  byId: {},\r\n});\r\n\r\nconst spaceCreated = <ReceivedSpace extends Space<ObjectsCustom>>(\r\n  state: SpacesByIdState<ReceivedSpace>,\r\n  payload: SpaceSuccess<ReceivedSpace>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  newState.byId[payload.response.data.id] = payload.response.data;\r\n\r\n  return newState;\r\n};\r\n\r\nconst spaceUpdated = <ReceivedSpace extends Space<ObjectsCustom>>(\r\n  state: SpacesByIdState<ReceivedSpace>,\r\n  payload: SpaceSuccess<ReceivedSpace>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  newState.byId[payload.response.data.id] = payload.response.data;\r\n\r\n  return newState;\r\n};\r\n\r\nconst spaceDeleted = <ReceivedSpace extends Space<ObjectsCustom>>(\r\n  state: SpacesByIdState<ReceivedSpace>,\r\n  payload: DeleteSpaceSuccess\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  delete newState.byId[payload.request.spaceId];\r\n\r\n  return newState;\r\n};\r\n\r\nconst spacesRetrieved = <ReceivedSpace extends Space<ObjectsCustom>>(\r\n  state: SpacesByIdState<ReceivedSpace>,\r\n  payload: FetchSpacesSuccess<ReceivedSpace>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  payload.response.data.forEach((item) => {\r\n    newState.byId[item.id] = item;\r\n  });\r\n\r\n  return newState;\r\n};\r\n\r\nconst spaceRetrieved = <ReceivedSpace extends Space<ObjectsCustom>>(\r\n  state: SpacesByIdState<ReceivedSpace>,\r\n  payload: FetchSpaceByIdSuccess<ReceivedSpace>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  newState.byId[payload.response.data.id] = payload.response.data;\r\n\r\n  return newState;\r\n};\r\n\r\nconst spaceUpdatedEventReceived = <ReceivedSpace extends Space<ObjectsCustom>>(\r\n  state: SpacesByIdState<ReceivedSpace>,\r\n  payload: SpaceEventMessage<ReceivedSpace>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  newState.byId[payload.data.id] = payload.data;\r\n\r\n  return newState;\r\n};\r\n\r\nconst spaceDeletedEventReceived = <ReceivedSpace extends Space<ObjectsCustom>>(\r\n  state: SpacesByIdState<ReceivedSpace>,\r\n  payload: SpaceEventMessage<ReceivedSpace>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  delete newState.byId[payload.data.id];\r\n\r\n  return newState;\r\n};\r\n\r\nconst membershipRetrieved = <ReceivedSpace extends Space<ObjectsCustom>>(\r\n  state: SpacesByIdState<ReceivedSpace>,\r\n  payload: FetchMembershipSuccess<Membership<ObjectsCustom, ReceivedSpace>>\r\n) => {\r\n  let newState = state;\r\n\r\n  if (payload.response.data.length > 0) {\r\n    newState = {\r\n      byId: {\r\n        ...state.byId,\r\n      },\r\n    };\r\n\r\n    for (let i = 0; i < payload.response.data.length; i++) {\r\n      const currentMembership = payload.response.data[i];\r\n\r\n      if (currentMembership.space) {\r\n        newState.byId[currentMembership.id] = currentMembership.space;\r\n      }\r\n    }\r\n  }\r\n\r\n  return newState;\r\n};\r\n\r\ntype SpaceReducerActions<StoredSpace extends Space<ObjectsCustom>> =\r\n  | SpaceActions<StoredSpace, AnyMeta>\r\n  | SpaceListenerActions<StoredSpace>\r\n  | MembershipRetrievedAction<Membership, AnyMeta>\r\n  | MembershipActions<Membership<ObjectsCustom, StoredSpace>, AnyMeta>;\r\n\r\n// tag::RDX-type-space[]\r\nexport type SpaceReducer<\r\n  StoredSpace extends Space<ObjectsCustom>,\r\n  SpaceAction extends AnyAction\r\n> = (\r\n  state: SpacesByIdState<StoredSpace> | undefined,\r\n  action: SpaceAction\r\n) => SpacesByIdState<StoredSpace>;\r\n// end::RDX-type-space[]\r\n\r\n// tag::RDX-method-reducer-space[]\r\nexport const createSpaceReducer = <\r\n  StoredSpace extends Space<ObjectsCustom> = Space,\r\n  SpaceAction extends AnyAction = SpaceReducerActions<StoredSpace>\r\n>(): SpaceReducer<StoredSpace, SpaceAction> => (\r\n  state: SpacesByIdState<StoredSpace> = createInitialState(),\r\n  action: SpaceAction\r\n): SpacesByIdState<StoredSpace> => {\r\n  switch (action.type) {\r\n    case SpaceActionType.SPACE_CREATED:\r\n      return spaceCreated<StoredSpace>(state, action.payload);\r\n    case SpaceActionType.SPACE_UPDATED:\r\n      return spaceUpdated<StoredSpace>(state, action.payload);\r\n    case SpaceActionType.SPACE_DELETED:\r\n      return spaceDeleted<StoredSpace>(state, action.payload);\r\n    case SpaceActionType.SPACES_RETRIEVED:\r\n      return spacesRetrieved<StoredSpace>(state, action.payload);\r\n    case SpaceActionType.SPACE_RETRIEVED:\r\n      return spaceRetrieved<StoredSpace>(state, action.payload);\r\n    case SpaceActionType.SPACE_UPDATED_EVENT:\r\n      return spaceUpdatedEventReceived<StoredSpace>(state, action.payload);\r\n    case SpaceActionType.SPACE_DELETED_EVENT:\r\n      return spaceDeletedEventReceived<StoredSpace>(state, action.payload);\r\n    case MembershipActionType.MEMBERSHIP_RETRIEVED:\r\n      return membershipRetrieved<StoredSpace>(state, action.payload);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n// end::RDX-method-reducer-space[]\r\n","import {\r\n  SpacesRetrievedAction,\r\n  FetchSpacesSuccess,\r\n  Space,\r\n} from './SpaceActions';\r\nimport { SpaceActionType } from './SpaceActionType.enum';\r\nimport { ActionMeta, AnyMeta } from '../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\n\r\ninterface SpaceListState {\r\n  spaceIds: string[];\r\n}\r\n\r\nconst createInitialState = (): SpaceListState => ({\r\n  spaceIds: [],\r\n});\r\n\r\nconst spacesRetrieved = <SpaceType extends Space<ObjectsCustom>>(\r\n  payload: FetchSpacesSuccess<SpaceType>\r\n) => ({ spaceIds: payload.response.data.map((space) => space.id) });\r\n\r\n// tag::RDX-method-reducer-spacelist[]\r\nexport const createSpaceListReducer = <\r\n  SpaceType extends Space<ObjectsCustom> = Space,\r\n  Meta extends ActionMeta = AnyMeta\r\n>() => (\r\n  state: SpaceListState = createInitialState(),\r\n  action: SpacesRetrievedAction<SpaceType, Meta>\r\n): SpaceListState => {\r\n  switch (action.type) {\r\n    case SpaceActionType.SPACES_RETRIEVED:\r\n      return spacesRetrieved<SpaceType>(action.payload);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n// end::RDX-method-reducer-spacelist[]\r\n","import { AnyAction } from 'redux';\r\nimport {\r\n  FetchMembershipSuccess,\r\n  MembershipSuccess,\r\n  MembershipListenerActions,\r\n  MembershipActions,\r\n  Membership,\r\n  MembershipEventMessage,\r\n} from './MembershipActions';\r\nimport { MembershipActionType } from './MembershipActionType.enum';\r\nimport { AnyMeta } from '../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\nimport { User } from 'features/user/UserActions';\r\n\r\n// tag::RDX-type-memberships-byuserid[]\r\nexport type MembershipByUserIdState<\r\n  ReceivedMembership extends Membership<ObjectsCustom, User<ObjectsCustom>>\r\n> = {\r\n  byId: {\r\n    [userId: string]: ReceivedMembership[];\r\n  };\r\n};\r\n// end::RDX-type-memberships-byuserid[]\r\n\r\nconst createInitialState = () => ({\r\n  byId: {},\r\n});\r\n\r\nconst userAddedToSpace = <\r\n  ReceivedMembership extends Membership<ObjectsCustom, User<ObjectsCustom>>\r\n>(\r\n  state: MembershipByUserIdState<ReceivedMembership>,\r\n  payload: MembershipEventMessage<ReceivedMembership>\r\n) => {\r\n  if (\r\n    state.byId[payload.data.userId] &&\r\n    state.byId[payload.data.userId].filter(\r\n      (membership) => membership.id === payload.data.spaceId\r\n    ).length === 0\r\n  ) {\r\n    const newState = {\r\n      byId: { ...state.byId },\r\n    };\r\n\r\n    const newMembership = {\r\n      id: payload.data.spaceId,\r\n      custom: payload.data.custom,\r\n    };\r\n\r\n    newState.byId[payload.data.userId] = [\r\n      ...newState.byId[payload.data.userId],\r\n      newMembership as ReceivedMembership,\r\n    ];\r\n\r\n    return newState;\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nconst userRemovedFromSpace = <\r\n  ReceivedMembership extends Membership<ObjectsCustom, User<ObjectsCustom>>\r\n>(\r\n  state: MembershipByUserIdState<ReceivedMembership>,\r\n  payload: MembershipEventMessage<ReceivedMembership>\r\n) => {\r\n  if (\r\n    state.byId[payload.data.userId] &&\r\n    state.byId[payload.data.userId].filter(\r\n      (membership) => membership.id === payload.data.spaceId\r\n    ).length > 0\r\n  ) {\r\n    const newState = {\r\n      byId: { ...state.byId },\r\n    };\r\n\r\n    newState.byId[payload.data.userId] = newState.byId[\r\n      payload.data.userId\r\n    ].filter((membership) => membership.id !== payload.data.spaceId);\r\n\r\n    return newState;\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nconst userMembershipUpdatedOnSpace = <\r\n  ReceivedMembership extends Membership<ObjectsCustom, User<ObjectsCustom>>\r\n>(\r\n  state: MembershipByUserIdState<ReceivedMembership>,\r\n  payload: MembershipEventMessage<ReceivedMembership>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  let clonedUser = newState.byId[payload.data.userId];\r\n\r\n  if (clonedUser !== undefined) {\r\n    clonedUser = clonedUser.map((space) => {\r\n      if (space.id === payload.data.spaceId) {\r\n        return {\r\n          ...space,\r\n          custom: payload.data.custom,\r\n        };\r\n      } else {\r\n        return space;\r\n      }\r\n    });\r\n  }\r\n\r\n  newState.byId[payload.data.userId] = clonedUser;\r\n\r\n  return newState;\r\n};\r\n\r\nconst membershipResult = <\r\n  ReceivedMembership extends Membership<ObjectsCustom, User<ObjectsCustom>>\r\n>(\r\n  state: MembershipByUserIdState<ReceivedMembership>,\r\n  payload:\r\n    | FetchMembershipSuccess<ReceivedMembership>\r\n    | MembershipSuccess<ReceivedMembership>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  newState.byId[payload.request.userId] = payload.response.data;\r\n\r\n  return newState;\r\n};\r\n\r\ntype MembershipReducerActions<\r\n  ReceivedMembership extends Membership<ObjectsCustom, User<ObjectsCustom>>\r\n> =\r\n  | MembershipActions<ReceivedMembership, AnyMeta>\r\n  | MembershipListenerActions<ReceivedMembership>;\r\n\r\n// tag::RDX-type-membership[]\r\nexport type MembershipReducer<\r\n  StoredMembership extends Membership<ObjectsCustom, User<ObjectsCustom>>,\r\n  MembershipAction extends AnyAction\r\n> = (\r\n  state: MembershipByUserIdState<StoredMembership> | undefined,\r\n  action: MembershipAction\r\n) => MembershipByUserIdState<StoredMembership>;\r\n// end::RDX-type-membership[]\r\n\r\n// tag::RDX-method-reducer-membership[]\r\nexport const createMembershipReducer = <\r\n  StoredMembership extends Membership<\r\n    ObjectsCustom,\r\n    User<ObjectsCustom>\r\n  > = Membership,\r\n  MembershipAction extends AnyAction = MembershipReducerActions<\r\n    StoredMembership\r\n  >\r\n>(): MembershipReducer<StoredMembership, MembershipAction> => (\r\n  state = createInitialState(),\r\n  action: MembershipAction\r\n): MembershipByUserIdState<StoredMembership> => {\r\n  switch (action.type) {\r\n    case MembershipActionType.MEMBERSHIP_RETRIEVED:\r\n    case MembershipActionType.MEMBERSHIP_UPDATED:\r\n    case MembershipActionType.SPACES_JOINED:\r\n    case MembershipActionType.SPACES_LEFT:\r\n      return membershipResult<StoredMembership>(state, action.payload);\r\n    case MembershipActionType.USER_ADDED_TO_SPACE_EVENT:\r\n      return userAddedToSpace<StoredMembership>(state, action.payload);\r\n    case MembershipActionType.USER_REMOVED_FROM_SPACE_EVENT:\r\n      return userRemovedFromSpace<StoredMembership>(state, action.payload);\r\n    case MembershipActionType.USER_MEMBERSHIP_UPDATED_ON_SPACE_EVENT:\r\n      return userMembershipUpdatedOnSpace<StoredMembership>(\r\n        state,\r\n        action.payload\r\n      );\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n// end::RDX-method-reducer-membership[]\r\n","import { AnyAction } from 'redux';\r\nimport {\r\n  MembersActions,\r\n  FetchMembersSuccess,\r\n  MembersSuccess,\r\n  Members,\r\n} from './MembersActions';\r\nimport { MembersActionType } from './MembersActionType.enum';\r\nimport {\r\n  MembershipListenerActions,\r\n  Membership,\r\n  MembershipEventMessage,\r\n} from '../../features/membership/MembershipActions';\r\nimport { MembershipActionType } from '../../features/membership/MembershipActionType.enum';\r\nimport { AnyMeta } from '../../foundations/ActionMeta';\r\nimport { ObjectsCustom } from 'foundations/ObjectsCustom';\r\nimport { Space } from 'features/space/SpaceActions';\r\n\r\n// tag::RDX-type-members-byspaceid[]\r\nexport type MembersBySpaceIdState<\r\n  ReceivedMembers extends Members<ObjectsCustom, Space<ObjectsCustom>>\r\n> = {\r\n  byId: {\r\n    [spaceId: string]: ReceivedMembers[];\r\n  };\r\n};\r\n// end::RDX-type-members-byspaceid[]\r\n\r\nconst createInitialState = () => ({\r\n  byId: {},\r\n});\r\n\r\nconst userAddedToSpace = <\r\n  ReceivedMembers extends Members<ObjectsCustom, Space<ObjectsCustom>>\r\n>(\r\n  state: MembersBySpaceIdState<ReceivedMembers>,\r\n  payload: MembershipEventMessage<Membership>\r\n) => {\r\n  if (\r\n    state.byId[payload.data.spaceId] &&\r\n    state.byId[payload.data.spaceId].filter(\r\n      (membership) => membership.id === payload.data.userId\r\n    ).length === 0\r\n  ) {\r\n    const newState = {\r\n      byId: { ...state.byId },\r\n    };\r\n\r\n    const newMembers = {\r\n      id: payload.data.userId,\r\n      custom: payload.data.custom,\r\n    };\r\n\r\n    newState.byId[payload.data.spaceId] = [\r\n      ...newState.byId[payload.data.spaceId],\r\n      newMembers as ReceivedMembers,\r\n    ];\r\n\r\n    return newState;\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nconst userRemovedFromSpace = <\r\n  ReceivedMembers extends Members<ObjectsCustom, Space<ObjectsCustom>>\r\n>(\r\n  state: MembersBySpaceIdState<ReceivedMembers>,\r\n  payload: MembershipEventMessage<Membership>\r\n) => {\r\n  if (\r\n    state.byId[payload.data.spaceId] &&\r\n    state.byId[payload.data.spaceId].filter(\r\n      (membership) => membership.id === payload.data.userId\r\n    ).length > 0\r\n  ) {\r\n    const newState = {\r\n      byId: { ...state.byId },\r\n    };\r\n\r\n    newState.byId[payload.data.spaceId] = newState.byId[\r\n      payload.data.spaceId\r\n    ].filter((membership) => membership.id !== payload.data.userId);\r\n\r\n    return newState;\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nconst userMembershipUpdatedOnSpace = <\r\n  ReceivedMembers extends Members<ObjectsCustom, Space<ObjectsCustom>>\r\n>(\r\n  state: MembersBySpaceIdState<ReceivedMembers>,\r\n  payload: MembershipEventMessage<Membership>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  let clonedSpace = newState.byId[payload.data.spaceId];\r\n\r\n  if (clonedSpace !== undefined) {\r\n    clonedSpace = clonedSpace.map((user) => {\r\n      if (user.id === payload.data.userId) {\r\n        return {\r\n          ...user,\r\n          custom: payload.data.custom,\r\n        };\r\n      } else {\r\n        return user;\r\n      }\r\n    });\r\n  }\r\n\r\n  newState.byId[payload.data.spaceId] = clonedSpace;\r\n\r\n  return newState;\r\n};\r\n\r\nconst membersResult = <\r\n  ReceivedMembers extends Members<ObjectsCustom, Space<ObjectsCustom>>\r\n>(\r\n  state: MembersBySpaceIdState<ReceivedMembers>,\r\n  payload:\r\n    | FetchMembersSuccess<ReceivedMembers>\r\n    | MembersSuccess<ReceivedMembers>\r\n) => {\r\n  const newState = {\r\n    byId: { ...state.byId },\r\n  };\r\n\r\n  newState.byId[payload.request.spaceId] = payload.response.data;\r\n\r\n  return newState;\r\n};\r\n\r\ntype MembersReducerActions<\r\n  ReceivedMembers extends Members<ObjectsCustom, Space<ObjectsCustom>>\r\n> =\r\n  | MembersActions<ReceivedMembers, AnyMeta>\r\n  | MembershipListenerActions<Membership>;\r\n\r\n// tag::RDX-type-member[]\r\nexport type MembersReducer<\r\n  StoredMembers extends Members<ObjectsCustom, Space<ObjectsCustom>>,\r\n  MembersAction extends AnyAction\r\n> = (\r\n  state: MembersBySpaceIdState<StoredMembers> | undefined,\r\n  action: MembersAction\r\n) => MembersBySpaceIdState<StoredMembers>;\r\n// end::RDX-type-member[]\r\n\r\n// tag::RDX-method-reducer-member[]\r\nexport const createMembersReducer = <\r\n  StoredMembers extends Members<ObjectsCustom, Space<ObjectsCustom>> = Members,\r\n  MembersAction extends AnyAction = MembersReducerActions<StoredMembers>\r\n>(): MembersReducer<StoredMembers, MembersAction> => (\r\n  state = createInitialState(),\r\n  action: MembersAction\r\n): MembersBySpaceIdState<StoredMembers> => {\r\n  switch (action.type) {\r\n    case MembersActionType.MEMBERS_RETRIEVED:\r\n    case MembersActionType.MEMBERS_UPDATED:\r\n    case MembersActionType.MEMBERS_ADDED:\r\n    case MembersActionType.MEMBERS_REMOVED:\r\n      return membersResult<StoredMembers>(state, action.payload);\r\n    case MembershipActionType.USER_ADDED_TO_SPACE_EVENT:\r\n      return userAddedToSpace<StoredMembers>(state, action.payload);\r\n    case MembershipActionType.USER_REMOVED_FROM_SPACE_EVENT:\r\n      return userRemovedFromSpace<StoredMembers>(state, action.payload);\r\n    case MembershipActionType.USER_MEMBERSHIP_UPDATED_ON_SPACE_EVENT:\r\n      return userMembershipUpdatedOnSpace<StoredMembers>(state, action.payload);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n// end::RDX-method-reducer-member[]\r\n"],"names":["MembershipActionType","joiningSpaces","payload","meta","type","JOINING_SPACES","spacesJoined","SPACES_JOINED","errorJoiningSpaces","ERROR_JOINING_SPACES","error","joinSpaces","request","thunkFunction","dispatch","_getState","pubnub","Promise","resolve","reject","api","status","response","JOIN_SPACES_COMMAND","leavingSpaces","LEAVING_SPACES","spacesLeft","SPACES_LEFT","errorLeavingSpaces","ERROR_LEAVING_SPACES","leaveSpaces","spaces","map","space","id","LEAVE_SPACES_COMMAND","fetchingMembership","FETCHING_MEMBERSHIP","membershipRetrieved","MEMBERSHIP_RETRIEVED","errorFetchingMembership","ERROR_FETCHING_MEMBERSHIP","fetchMemberships","getMemberships","FETCH_MEMBERSHIP_COMMAND","updatingMemberships","UPDATING_MEMBERSHIP","membershipUpdated","MEMBERSHIP_UPDATED","errorUpdatingMembership","ERROR_UPDATING_MEMBERSHIP","updateMembership","updateMemberships","UPDATE_MEMBERSHIP_COMMAND","MembersActionType","fetchingMembers","FETCHING_MEMBERS","membersRetrieved","MEMBERS_RETRIEVED","errorFetchingMembers","ERROR_FETCHING_MEMBERS","fetchMembers","getMembers","FETCH_MEMBERS_COMMAND","updatingMembers","UPDATING_MEMBERS","membersUpdated","MEMBERS_UPDATED","errorUpdatingMembers","ERROR_UPDATING_MEMBERS","updateMembers","UPDATE_MEMBERS_COMMAND","addingMembers","ADDING_MEMBERS","membersAdded","MEMBERS_ADDED","errorAddingMembers","ERROR_ADDING_MEMBERS","addMembers","ADD_MEMBERS_COMMAND","removingMembers","REMOVING_MEMBERS","membersRemoved","MEMBERS_REMOVED","errorRemovingMembers","ERROR_REMOVING_MEMBERS","removeMembers","users","user","REMOVE_MEMBERS_COMMAND","MessageActionType","sendingMessage","SENDING_MESSAGE","messageSent","MESSAGE_SENT","errorSendingMessage","ERROR_SENDING_MESSAGE","sendMessage","publish","SEND_MESSAGE_COMMAND","SignalActionType","sendingSignal","SENDING_SIGNAL","signalSent","SIGNAL_SENT","errorSendingSignal","ERROR_SENDING_SIGNAL","sendSignal","signal","SEND_SIGNAL_COMMAND","fetchingMessageHistory","FETCHING_MESSAGE_HISTORY","messageHistoryRetrieved","MESSAGE_HISTORY_RETRIEVED","errorFetchingMessageHistory","ERROR_FETCHING_MESSAGE_HISTORY","fetchMessageHistory","history","FETCH_MESSAGE_HISTORY_COMMAND","SpaceActionType","creatingSpace","CREATING_SPACE","spaceCreated","SPACE_CREATED","errorCreatingSpace","ERROR_CREATING_SPACE","createSpace","CREATE_SPACE_COMMAND","deletingSpace","DELETING_SPACE","spaceDeleted","SPACE_DELETED","errorDeletingSpace","ERROR_DELETING_SPACE","deleteSpace","spaceId","DELETE_SPACE_COMMAND","fetchingSpaceById","FETCHING_SPACE_BY_ID","spaceRetrieved","SPACE_RETRIEVED","errorFetchingSpaceById","ERROR_FETCHING_SPACE_BY_ID","fetchSpaceById","getSpace","FETCH_SPACE_BY_ID_COMMAND","fetchingSpaces","FETCHING_SPACES","spacesRetrieved","SPACES_RETRIEVED","errorFetchingSpaces","ERROR_FETCHING_SPACES","fetchSpaces","getSpaces","FETCH_SPACES_COMMAND","updatingSpace","UPDATING_SPACE","spaceUpdated","SPACE_UPDATED","errorUpdatingSpace","ERROR_UPDATING_SPACE","updateSpace","UPDATE_SPACE_COMMAND","UserActionType","creatingUser","CREATING_USER","userCreated","USER_CREATED","errorCreatingUser","ERROR_CREATING_USER","createUser","CREATE_USER_COMMAND","deletingUser","DELETING_USER","userDeleted","USER_DELETED","errorDeletingUser","ERROR_DELETING_USER","deleteUser","userId","DELETE_USER_COMMAND","fetchingUserById","FETCHING_USER_BY_ID","userRetrieved","USER_RETRIEVED","errorFetchingUserById","ERROR_FETCHING_USER_BY_ID","fetchUserById","getUser","FETCH_USER_BY_ID_COMMAND","fetchingUsers","FETCHING_USERS","usersRetrieved","USERS_RETRIEVED","errorFetchingUsers","ERROR_FETCHING_USERS","fetchUsers","getUsers","FETCH_USERS_COMMAND","updatingUser","UPDATING_USER","userUpdated","USER_UPDATED","errorUpdatingUser","ERROR_UPDATING_USER","updateUser","UPDATE_USER_COMMAND","PresenceActionType","fetchingHereNow","FETCHING_HERE_NOW","hereNowRetrieved","HERE_NOW_RETRIEVED","errorFetchingHereNow","ERROR_FETCHING_HERE_NOW","fetchHereNow","hereNow","includeUUIDs","includeState","HERE_NOW_COMMAND","fetchingPresenceState","FETCHING_PRESENCE_STATE","presenceStateRetrieved","PRESENCE_STATE_RETRIEVED","errorFetchingPresenceState","ERROR_FETCHING_PRESENCE_STATE","fetchPresenceState","getState","PRESENCE_STATE_COMMAND","USER_UPDATED_EVENT","USER_DELETED_EVENT","createUserListener","message","event","SPACE_UPDATED_EVENT","SPACE_DELETED_EVENT","createSpaceListener","userMembershipUpdatedOnSpace","USER_MEMBERSHIP_UPDATED_ON_SPACE_EVENT","userAddedToSpace","USER_ADDED_TO_SPACE_EVENT","userRemovedFromSpace","USER_REMOVED_FROM_SPACE_EVENT","createMembershipListener","membership","messageReceived","MESSAGE_RECEIVED","createMessageListener","PresenceCategory","userJoin","JOIN_EVENT","userLeave","LEAVE_EVENT","userTimeout","TIMEOUT_EVENT","userStateChange","STATE_CHANGE_EVENT","createPresenceListener","presence","action","JOIN","LEAVE","TIMEOUT","STATE_CHANGE","signalReceived","SIGNAL_RECEIVED","createSignalListener","ErrorStatusCategory","ErrorStatusActionType","networkIssues","NETWORK_ISSUES_EVENT","accessDenied","ACCESS_DENIED_EVENT","malformedResponse","MALFORMED_RESPONSE_EVENT","badRequest","BAD_REQUEST_EVENT","decryptionError","DECRYPTION_ERROR_EVENT","timeoutConnection","TIMEOUT_CONNECTION_EVENT","requestMessageCountExceeded","REQUEST_MESSAGE_COUNT_EXCEED_EVENT","unknown","UNKNOWN_EVENT","createErrorStatusListener","category","PN_ACCES_DENIED_CATEGORY","PN_MALFORMED_RESPONSE_CATEGORY","PN_BAD_REQUEST_CATEGORY","PN_DECRYPTION_ERROR_CATEGORY","PN_REQUEST_MESSAGE_COUNT_EXCEEDED_CATEGORY","PN_UNKNOWN_CATEGORY","NetworkStatusActionType","NetworkStatusCategory","networkUp","NETWORK_UP_EVENT","networkDown","NETWORK_DOWN_EVENT","createNetworkStatusListener","PN_NETWORK_UP_CATEGORY","PN_NETWORK_DOWN_CATEGORY","PN_RECONNECTED_CATEGORY","PN_CONNECTED_CATEGORY","PN_TIMEOUT_CATEGORY","SubscriptionStatusActionType","SubscriptionStatusCategory","reconnected","RECONNECTED_EVENT","connected","CONNECTED_EVENT","createSubscriptionStatusListener","combineListeners","listeners","Object","assign","mergeListenersByType","result","incomingListeners","forEach","listener","undefined","push","entries","listenerType","listenersOfType","length","createCombinedListener","currentListener","createPubNubListener","createInitialState","byId","state","newState","channel","results","messages","m","entry","timetoken","createMessageReducer","createSignalReducer","totalOccupancy","channels","keys","userJoined","occupants","filter","occupant","uuid","occupancy","name","userLeft","createPresenceReducer","createNetworkStatusReducer","initializer","initialState","isConnected","Error","networkStatusReducer","data","item","userUpdatedEventReceived","userDeletedEventReceived","i","currentMember","createUserReducer","userIds","createUserListReducer","spaceUpdatedEventReceived","spaceDeletedEventReceived","currentMembership","createSpaceReducer","spaceIds","createSpaceListReducer","newMembership","custom","clonedUser","membershipResult","createMembershipReducer","newMembers","clonedSpace","membersResult","createMembersReducer"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;IACYA;;AAAZ,WAAYA;AACVA,EAAAA,gDAAA,oCAAA;AACAA,EAAAA,2CAAA,+BAAA;AACAA,EAAAA,4CAAA,gCAAA;AACAA,EAAAA,iDAAA,qCAAA;AACAA,EAAAA,iDAAA,qCAAA;AACAA,EAAAA,qDAAA,yCAAA;AACAA,EAAAA,8DAAA,kDAAA;AACAA,EAAAA,2CAAA,+BAAA;AACAA,EAAAA,0CAAA,8BAAA;AACAA,EAAAA,iDAAA,qCAAA;AACAA,EAAAA,2CAAA,+BAAA;AACAA,EAAAA,4CAAA,gCAAA;AACAA,EAAAA,iDAAA,qCAAA;AACAA,EAAAA,sCAAA,0BAAA;AACAA,EAAAA,qCAAA,yBAAA;AACAA,EAAAA,4CAAA,gCAAA;AACAA,EAAAA,sCAAA,0BAAA;AACAA,EAAAA,mCAAA,uBAAA;AACAA,EAAAA,4CAAA,gCAAA;AACD,CApBD,EAAYA,oBAAoB,KAApBA,oBAAoB,KAAA,CAAhC;;ICiBaC,aAAa,GAAG,SAAhBA,aAAgB,CAI3BC,OAJ2B,EAK3BC,IAL2B;AAAA,SAMoB;AAC/CC,IAAAA,IAAI,EAAEJ,oBAAoB,CAACK,cADoB;AAE/CH,IAAAA,OAAO,EAAPA,OAF+C;AAG/CC,IAAAA,IAAI,EAAJA;AAH+C,GANpB;AAAA,CAAtB;AAaP;;AACA,IAAaG,YAAY,GAAG,SAAfA,YAAe,CAI1BJ,OAJ0B,EAK1BC,IAL0B;AAAA,SAMoB;AAC9CC,IAAAA,IAAI,EAAEJ,oBAAoB,CAACO,aADmB;AAE9CL,IAAAA,OAAO,EAAPA,OAF8C;AAG9CC,IAAAA,IAAI,EAAJA;AAH8C,GANpB;AAAA,CAArB;AAaP;;AACA,IAAaK,kBAAkB,GAAG,SAArBA,kBAAqB,CAIhCN,OAJgC,EAKhCC,IALgC;AAAA,SAMoB;AACpDC,IAAAA,IAAI,EAAEJ,oBAAoB,CAACS,oBADyB;AAEpDP,IAAAA,OAAO,EAAPA,OAFoD;AAGpDC,IAAAA,IAAI,EAAJA,IAHoD;AAIpDO,IAAAA,KAAK,EAAE;AAJ6C,GANpB;AAAA,CAA3B;AAcP;;AACA,IAAaC,UAAU,GAAG,SAAbA,UAAa,CAIxBC,OAJwB,EAKxBT,IALwB;AAOxB,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACb,aAAa,CAAuBW,OAAvB,EAAgCT,IAAhC,CAAd,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWT,UAAX,cAEOC,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACN,kBAAkB,CAAuBN,OAAvB,EAAgCC,IAAhC,CAAnB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAACR,YAAY,CAAuBJ,QAAvB,EAAgCC,IAAhC,CAAb,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KA5BD,CALoB;AAAA,GAAtB;;AAmCAL,EAAAA,aAAa,CAACT,IAAd,GAAqBJ,oBAAoB,CAACuB,mBAA1C;AAEA,SAAOV,aAAP;AACD,CA7CM;;IC3CMW,aAAa,GAAG,SAAhBA,aAAgB,CAI3BtB,OAJ2B,EAK3BC,IAL2B;AAAA,SAMoB;AAC/CC,IAAAA,IAAI,EAAEJ,oBAAoB,CAACyB,cADoB;AAE/CvB,IAAAA,OAAO,EAAPA,OAF+C;AAG/CC,IAAAA,IAAI,EAAJA;AAH+C,GANpB;AAAA,CAAtB;AAaP;;AACA,IAAauB,UAAU,GAAG,SAAbA,UAAa,CAIxBxB,OAJwB,EAKxBC,IALwB;AAAA,SAMoB;AAC5CC,IAAAA,IAAI,EAAEJ,oBAAoB,CAAC2B,WADiB;AAE5CzB,IAAAA,OAAO,EAAPA,OAF4C;AAG5CC,IAAAA,IAAI,EAAJA;AAH4C,GANpB;AAAA,CAAnB;AAaP;;AACA,IAAayB,kBAAkB,GAAG,SAArBA,kBAAqB,CAIhC1B,OAJgC,EAKhCC,IALgC;AAAA,SAMoB;AACpDC,IAAAA,IAAI,EAAEJ,oBAAoB,CAAC6B,oBADyB;AAEpD3B,IAAAA,OAAO,EAAPA,OAFoD;AAGpDC,IAAAA,IAAI,EAAJA,IAHoD;AAIpDO,IAAAA,KAAK,EAAE;AAJ6C,GANpB;AAAA,CAA3B;AAcP;;AACA,IAAaoB,WAAW,GAAG,SAAdA,WAAc,CAIzBlB,OAJyB,EAKzBT,IALyB;AAOzB,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACU,aAAa,CAAuBZ,OAAvB,EAAgCT,IAAhC,CAAd,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWU,WAAX,cAEOlB,OAFP;AAGImB,QAAAA,MAAM,EAAEnB,OAAO,CAACmB,MAAR,CAAeC,GAAf,CAAmB,UAACC,KAAD;AAAA,iBAAWA,KAAK,CAACC,EAAjB;AAAA,SAAnB;AAHZ,UAKE,UAACb,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACc,kBAAkB,CAAC1B,OAAD,EAAUC,IAAV,CAAnB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAACY,UAAU,CAAuBxB,QAAvB,EAAgCC,IAAhC,CAAX,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAxBH;AA0BD,KA7BD,CALoB;AAAA,GAAtB;;AAoCAL,EAAAA,aAAa,CAACT,IAAd,GAAqBJ,oBAAoB,CAACmC,oBAA1C;AAEA,SAAOtB,aAAP;AACD,CA9CM;;IC3CMuB,kBAAkB,GAAG,SAArBA,kBAAqB,CAChClC,OADgC,EAEhCC,IAFgC;AAAA,SAGI;AACpCC,IAAAA,IAAI,EAAEJ,oBAAoB,CAACqC,mBADS;AAEpCnC,IAAAA,OAAO,EAAPA,OAFoC;AAGpCC,IAAAA,IAAI,EAAJA;AAHoC,GAHJ;AAAA,CAA3B;AAUP;;AACA,IAAamC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAIjCpC,OAJiC,EAKjCC,IALiC;AAAA,SAMoB;AACrDC,IAAAA,IAAI,EAAEJ,oBAAoB,CAACuC,oBAD0B;AAErDrC,IAAAA,OAAO,EAAPA,OAFqD;AAGrDC,IAAAA,IAAI,EAAJA;AAHqD,GANpB;AAAA,CAA5B;AAaP;;AACA,IAAaqC,uBAAuB,GAAG,SAA1BA,uBAA0B,CACrCtC,OADqC,EAErCC,IAFqC;AAAA,SAGI;AACzCC,IAAAA,IAAI,EAAEJ,oBAAoB,CAACyC,yBADc;AAEzCvC,IAAAA,OAAO,EAAPA,OAFyC;AAGzCC,IAAAA,IAAI,EAAJA,IAHyC;AAIzCO,IAAAA,KAAK,EAAE;AAJkC,GAHJ;AAAA,CAAhC;AAWP;;AACA,IAAagC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAI9B9B,OAJ8B,EAK9BT,IAL8B;AAO9B,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACsB,kBAAkB,CAAOxB,OAAP,EAAgBT,IAAhB,CAAnB,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWuB,cAAX,cAEO/B,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAAC0B,uBAAuB,CAAOtC,OAAP,EAAgBC,IAAhB,CAAxB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAACwB,mBAAmB,CAAuBpC,QAAvB,EAAgCC,IAAhC,CAApB,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KA5BD,CALoB;AAAA,GAAtB;;AAmCAL,EAAAA,aAAa,CAACT,IAAd,GAAqBJ,oBAAoB,CAAC4C,wBAA1C;AAEA,SAAO/B,aAAP;AACD,CA7CM;;ICrCMgC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAIjC3C,OAJiC,EAKjCC,IALiC;AAAA,SAMmB;AACpDC,IAAAA,IAAI,EAAEJ,oBAAoB,CAAC8C,mBADyB;AAEpD5C,IAAAA,OAAO,EAAPA,OAFoD;AAGpDC,IAAAA,IAAI,EAAJA;AAHoD,GANnB;AAAA,CAA5B;AAaP;;AACA,IAAa4C,iBAAiB,GAAG,SAApBA,iBAAoB,CAI/B7C,OAJ+B,EAK/BC,IAL+B;AAAA,SAMoB;AACnDC,IAAAA,IAAI,EAAEJ,oBAAoB,CAACgD,kBADwB;AAEnD9C,IAAAA,OAAO,EAAPA,OAFmD;AAGnDC,IAAAA,IAAI,EAAJA;AAHmD,GANpB;AAAA,CAA1B;AAaP;;AACA,IAAa8C,uBAAuB,GAAG,SAA1BA,uBAA0B,CAIrC/C,OAJqC,EAKrCC,IALqC;AAAA,SAMoB;AACzDC,IAAAA,IAAI,EAAEJ,oBAAoB,CAACkD,yBAD8B;AAEzDhD,IAAAA,OAAO,EAAPA,OAFyD;AAGzDC,IAAAA,IAAI,EAAJA,IAHyD;AAIzDO,IAAAA,KAAK,EAAE;AAJkD,GANpB;AAAA,CAAhC;AAcP;;AACA,IAAayC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAI9BvC,OAJ8B,EAK9BT,IAL8B;AAO9B,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAAC+B,mBAAmB,CAAuBjC,OAAvB,EAAgCT,IAAhC,CAApB,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWgC,iBAAX,cAEOxC,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CACNmC,uBAAuB,CAAuB/C,OAAvB,EAAgCC,IAAhC,CADjB,CAAR;AAGAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SAVD,MAUO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAACiC,iBAAiB,CAAuB7C,QAAvB,EAAgCC,IAAhC,CAAlB,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAzBH;AA2BD,KA9BD,CALoB;AAAA,GAAtB;;AAqCAL,EAAAA,aAAa,CAACT,IAAd,GAAqBJ,oBAAoB,CAACqD,yBAA1C;AAEA,SAAOxC,aAAP;AACD,CA/CM;;AC7DP;AACA,IAAYyC,iBAAZ;;AAAA,WAAYA;AACVA,EAAAA,0CAAA,iCAAA;AACAA,EAAAA,2CAAA,kCAAA;AACAA,EAAAA,wCAAA,+BAAA;AACAA,EAAAA,2CAAA,kCAAA;AACAA,EAAAA,qCAAA,4BAAA;AACAA,EAAAA,sCAAA,6BAAA;AACAA,EAAAA,2CAAA,kCAAA;AACAA,EAAAA,qCAAA,4BAAA;AACAA,EAAAA,oCAAA,2BAAA;AACAA,EAAAA,2CAAA,kCAAA;AACAA,EAAAA,mCAAA,0BAAA;AACAA,EAAAA,kCAAA,yBAAA;AACAA,EAAAA,yCAAA,gCAAA;AACAA,EAAAA,qCAAA,4BAAA;AACAA,EAAAA,oCAAA,2BAAA;AACAA,EAAAA,2CAAA,kCAAA;AACD,CAjBD,EAAYA,iBAAiB,KAAjBA,iBAAiB,KAAA,CAA7B;;ICiBaC,eAAe,GAAG,SAAlBA,eAAkB,CAC7BrD,OAD6B,EAE7BC,IAF6B;AAAA,SAGI;AACjCC,IAAAA,IAAI,EAAEkD,iBAAiB,CAACE,gBADS;AAEjCtD,IAAAA,OAAO,EAAPA,OAFiC;AAGjCC,IAAAA,IAAI,EAAJA;AAHiC,GAHJ;AAAA,CAAxB;AAUP;;AACA,IAAasD,gBAAgB,GAAG,SAAnBA,gBAAmB,CAI9BvD,OAJ8B,EAK9BC,IAL8B;AAAA,SAMiB;AAC/CC,IAAAA,IAAI,EAAEkD,iBAAiB,CAACI,iBADuB;AAE/CxD,IAAAA,OAAO,EAAPA,OAF+C;AAG/CC,IAAAA,IAAI,EAAJA;AAH+C,GANjB;AAAA,CAAzB;AAaP;;AACA,IAAawD,oBAAoB,GAAG,SAAvBA,oBAAuB,CAClCzD,OADkC,EAElCC,IAFkC;AAAA,SAGI;AACtCC,IAAAA,IAAI,EAAEkD,iBAAiB,CAACM,sBADc;AAEtC1D,IAAAA,OAAO,EAAPA,OAFsC;AAGtCC,IAAAA,IAAI,EAAJA,IAHsC;AAItCO,IAAAA,KAAK,EAAE;AAJ+B,GAHJ;AAAA,CAA7B;AAWP;;AACA,IAAamD,YAAY,GAAG,SAAfA,YAAe,CAI1BjD,OAJ0B,EAK1BT,IAL0B;AAO1B,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACyC,eAAe,CAAO3C,OAAP,EAAgBT,IAAhB,CAAhB,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAW0C,UAAX,cAEOlD,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAAC6C,oBAAoB,CAAOzD,OAAP,EAAgBC,IAAhB,CAArB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAAC2C,gBAAgB,CAAoBvD,QAApB,EAA6BC,IAA7B,CAAjB,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KA5BD,CALoB;AAAA,GAAtB;;AAmCAL,EAAAA,aAAa,CAACT,IAAd,GAAqBkD,iBAAiB,CAACS,qBAAvC;AAEA,SAAOlD,aAAP;AACD,CA7CM;;ICrCMmD,eAAe,GAAG,SAAlBA,eAAkB,CAI7B9D,OAJ6B,EAK7BC,IAL6B;AAAA,SAMiB;AAC9CC,IAAAA,IAAI,EAAEkD,iBAAiB,CAACW,gBADsB;AAE9C/D,IAAAA,OAAO,EAAPA,OAF8C;AAG9CC,IAAAA,IAAI,EAAJA;AAH8C,GANjB;AAAA,CAAxB;AAaP;;AACA,IAAa+D,cAAc,GAAG,SAAjBA,cAAiB,CAI5BhE,OAJ4B,EAK5BC,IAL4B;AAAA,SAMiB;AAC7CC,IAAAA,IAAI,EAAEkD,iBAAiB,CAACa,eADqB;AAE7CjE,IAAAA,OAAO,EAAPA,OAF6C;AAG7CC,IAAAA,IAAI,EAAJA;AAH6C,GANjB;AAAA,CAAvB;AAaP;;AACA,IAAaiE,oBAAoB,GAAG,SAAvBA,oBAAuB,CAIlClE,OAJkC,EAKlCC,IALkC;AAAA,SAMiB;AACnDC,IAAAA,IAAI,EAAEkD,iBAAiB,CAACe,sBAD2B;AAEnDnE,IAAAA,OAAO,EAAPA,OAFmD;AAGnDC,IAAAA,IAAI,EAAJA,IAHmD;AAInDO,IAAAA,KAAK,EAAE;AAJ4C,GANjB;AAAA,CAA7B;AAcP;;AACA,IAAa4D,aAAa,GAAG,SAAhBA,aAAgB,CAI3B1D,OAJ2B,EAK3BT,IAL2B;AAO3B,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACkD,eAAe,CAACpD,OAAD,EAAUT,IAAV,CAAhB,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWkD,aAAX,cAEO1D,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACsD,oBAAoB,CAAoBlE,OAApB,EAA6BC,IAA7B,CAArB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAACoD,cAAc,CAAoBhE,QAApB,EAA6BC,IAA7B,CAAf,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KA5BD,CALoB;AAAA,GAAtB;;AAmCAL,EAAAA,aAAa,CAACT,IAAd,GAAqBkD,iBAAiB,CAACiB,sBAAvC;AAEA,SAAO1D,aAAP;AACD,CA7CM;;IC3CM2D,aAAa,GAAG,SAAhBA,aAAgB,CAI3BtE,OAJ2B,EAK3BC,IAL2B;AAAA,SAMiB;AAC5CC,IAAAA,IAAI,EAAEkD,iBAAiB,CAACmB,cADoB;AAE5CvE,IAAAA,OAAO,EAAPA,OAF4C;AAG5CC,IAAAA,IAAI,EAAJA;AAH4C,GANjB;AAAA,CAAtB;AAaP;;AACA,IAAauE,YAAY,GAAG,SAAfA,YAAe,CAI1BxE,OAJ0B,EAK1BC,IAL0B;AAAA,SAMiB;AAC3CC,IAAAA,IAAI,EAAEkD,iBAAiB,CAACqB,aADmB;AAE3CzE,IAAAA,OAAO,EAAPA,OAF2C;AAG3CC,IAAAA,IAAI,EAAJA;AAH2C,GANjB;AAAA,CAArB;AAaP;;AACA,IAAayE,kBAAkB,GAAG,SAArBA,kBAAqB,CAIhC1E,OAJgC,EAKhCC,IALgC;AAAA,SAMiB;AACjDC,IAAAA,IAAI,EAAEkD,iBAAiB,CAACuB,oBADyB;AAEjD3E,IAAAA,OAAO,EAAPA,OAFiD;AAGjDC,IAAAA,IAAI,EAAJA,IAHiD;AAIjDO,IAAAA,KAAK,EAAE;AAJ0C,GANjB;AAAA,CAA3B;AAcP;;AACA,IAAaoE,UAAU,GAAG,SAAbA,UAAa,CAIxBlE,OAJwB,EAKxBT,IALwB;AAOxB,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAAC0D,aAAa,CAAoB5D,OAApB,EAA6BT,IAA7B,CAAd,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAW0D,UAAX,cAEOlE,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAAC8D,kBAAkB,CAAoB1E,OAApB,EAA6BC,IAA7B,CAAnB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAAC4D,YAAY,CAAoBxE,QAApB,EAA6BC,IAA7B,CAAb,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KA5BD,CALoB;AAAA,GAAtB;;AAmCAL,EAAAA,aAAa,CAACT,IAAd,GAAqBkD,iBAAiB,CAACyB,mBAAvC;AAEA,SAAOlE,aAAP;AACD,CA7CM;;IC3CMmE,eAAe,GAAG,SAAlBA,eAAkB,CAI7B9E,OAJ6B,EAK7BC,IAL6B;AAAA,SAMiB;AAC9CC,IAAAA,IAAI,EAAEkD,iBAAiB,CAAC2B,gBADsB;AAE9C/E,IAAAA,OAAO,EAAPA,OAF8C;AAG9CC,IAAAA,IAAI,EAAJA;AAH8C,GANjB;AAAA,CAAxB;AAaP;;AACA,IAAa+E,cAAc,GAAG,SAAjBA,cAAiB,CAI5BhF,OAJ4B,EAK5BC,IAL4B;AAAA,SAMiB;AAC7CC,IAAAA,IAAI,EAAEkD,iBAAiB,CAAC6B,eADqB;AAE7CjF,IAAAA,OAAO,EAAPA,OAF6C;AAG7CC,IAAAA,IAAI,EAAJA;AAH6C,GANjB;AAAA,CAAvB;AAaP;;AACA,IAAaiF,oBAAoB,GAAG,SAAvBA,oBAAuB,CAIlClF,OAJkC,EAKlCC,IALkC;AAAA,SAMiB;AACnDC,IAAAA,IAAI,EAAEkD,iBAAiB,CAAC+B,sBAD2B;AAEnDnF,IAAAA,OAAO,EAAPA,OAFmD;AAGnDC,IAAAA,IAAI,EAAJA,IAHmD;AAInDO,IAAAA,KAAK,EAAE;AAJ4C,GANjB;AAAA,CAA7B;AAcP;;AACA,IAAa4E,aAAa,GAAG,SAAhBA,aAAgB,CAI3B1E,OAJ2B,EAK3BT,IAL2B;AAO3B,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACkE,eAAe,CAAoBpE,OAApB,EAA6BT,IAA7B,CAAhB,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWkE,aAAX,cAEO1E,OAFP;AAGI2E,QAAAA,KAAK,EAAE3E,OAAO,CAAC2E,KAAR,CAAcvD,GAAd,CAAkB,UAACwD,IAAD;AAAA,iBAAUA,IAAI,CAACtD,EAAf;AAAA,SAAlB;AAHX,UAKE,UAACb,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACsE,oBAAoB,CAAoBlF,OAApB,EAA6BC,IAA7B,CAArB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAACoE,cAAc,CAAoBhF,QAApB,EAA6BC,IAA7B,CAAf,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAxBH;AA0BD,KA7BD,CALoB;AAAA,GAAtB;;AAoCAL,EAAAA,aAAa,CAACT,IAAd,GAAqBkD,iBAAiB,CAACmC,sBAAvC;AAEA,SAAO5E,aAAP;AACD,CA9CM;;AC7DP;AACA,IAAY6E,iBAAZ;;AAAA,WAAYA;AACVA,EAAAA,yCAAA,gCAAA;AACAA,EAAAA,kDAAA,yCAAA;AACAA,EAAAA,qCAAA,4BAAA;AACAA,EAAAA,oCAAA,2BAAA;AACAA,EAAAA,iCAAA,wBAAA;AACAA,EAAAA,0CAAA,iCAAA;AACAA,EAAAA,6CAAA,oCAAA;AACAA,EAAAA,8CAAA,qCAAA;AACAA,EAAAA,mDAAA,0CAAA;AACD,CAVD,EAAYA,iBAAiB,KAAjBA,iBAAiB,KAAA,CAA7B;;ICaaC,cAAc,GAAG,SAAjBA,cAAiB,CAK5BzF,OAL4B,EAM5BC,IAN4B;AAAA,SAOqC;AACjEC,IAAAA,IAAI,EAAEsF,iBAAiB,CAACE,eADyC;AAEjE1F,IAAAA,OAAO,EAAPA,OAFiE;AAGjEC,IAAAA,IAAI,EAAJA;AAHiE,GAPrC;AAAA,CAAvB;AAcP;;AACA,IAAa0F,WAAW,GAAG,SAAdA,WAAc,CAKzB3F,OALyB,EAMzBC,IANyB;AAAA,SAOqC;AAC9DC,IAAAA,IAAI,EAAEsF,iBAAiB,CAACI,YADsC;AAE9D5F,IAAAA,OAAO,EAAPA,OAF8D;AAG9DC,IAAAA,IAAI,EAAJA;AAH8D,GAPrC;AAAA,CAApB;AAcP;;AACA,IAAa4F,mBAAmB,GAAG,SAAtBA,mBAAsB,CAKjC7F,OALiC,EAMjCC,IANiC;AAAA,SAOqC;AACtEC,IAAAA,IAAI,EAAEsF,iBAAiB,CAACM,qBAD8C;AAEtE9F,IAAAA,OAAO,EAAPA,OAFsE;AAGtEC,IAAAA,IAAI,EAAJA;AAHsE,GAPrC;AAAA,CAA5B;AAcP;;AACA,IAAa8F,WAAW,GAAG,SAAdA,WAAc,CAKzBrF,OALyB,EAMzBT,IANyB;AAQzB,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAAC6E,cAAc,CAAC/E,OAAD,EAAUT,IAAV,CAAf,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAW8E,OAAX,cAEOtF,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CACNiF,mBAAmB,CACjB7F,OADiB,EAEjBC,IAFiB,CADb,CAAR;AAMAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SAbD,MAaO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAARA,QAFc;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CACN+E,WAAW,CAAwC3F,QAAxC,EAAiDC,IAAjD,CADL,CAAR;AAGAe,UAAAA,OAAO;AACR;AACF,OA9BH;AAgCD,KAnCD,CALoB;AAAA,GAAtB;;AA0CAL,EAAAA,aAAa,CAACT,IAAd,GAAqBsF,iBAAiB,CAACS,oBAAvC;AAEA,SAAOtF,aAAP;AACD,CArDM;;AC3DP;AACA,IAAYuF,gBAAZ;;AAAA,WAAYA;AACVA,EAAAA,uCAAA,+BAAA;AACAA,EAAAA,mCAAA,2BAAA;AACAA,EAAAA,kCAAA,0BAAA;AACAA,EAAAA,+BAAA,uBAAA;AACAA,EAAAA,wCAAA,gCAAA;AACD,CAND,EAAYA,gBAAgB,KAAhBA,gBAAgB,KAAA,CAA5B;;ICaaC,aAAa,GAAG,SAAhBA,aAAgB,CAI3BnG,OAJ2B,EAK3BC,IAL2B;AAAA,SAMuB;AAClDC,IAAAA,IAAI,EAAEgG,gBAAgB,CAACE,cAD2B;AAElDpG,IAAAA,OAAO,EAAPA,OAFkD;AAGlDC,IAAAA,IAAI,EAAJA;AAHkD,GANvB;AAAA,CAAtB;AAaP;;AACA,IAAaoG,UAAU,GAAG,SAAbA,UAAa,CAIxBrG,OAJwB,EAKxBC,IALwB;AAAA,SAMuB;AAC/CC,IAAAA,IAAI,EAAEgG,gBAAgB,CAACI,WADwB;AAE/CtG,IAAAA,OAAO,EAAPA,OAF+C;AAG/CC,IAAAA,IAAI,EAAJA;AAH+C,GANvB;AAAA,CAAnB;AAaP;;AACA,IAAasG,kBAAkB,GAAG,SAArBA,kBAAqB,CAIhCvG,OAJgC,EAKhCC,IALgC;AAAA,SAMuB;AACvDC,IAAAA,IAAI,EAAEgG,gBAAgB,CAACM,oBADgC;AAEvDxG,IAAAA,OAAO,EAAPA,OAFuD;AAGvDC,IAAAA,IAAI,EAAJA;AAHuD,GANvB;AAAA,CAA3B;AAaP;;AACA,IAAawG,UAAU,GAAG,SAAbA,UAAa,CAIxB/F,OAJwB,EAKxBT,IALwB;AAOxB,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACuF,aAAa,CAACzF,OAAD,EAAUT,IAAV,CAAd,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWwF,MAAX,cAEOhG,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CACN2F,kBAAkB,CAA0BvG,OAA1B,EAAmCC,IAAnC,CADZ,CAAR;AAGAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SAVD,MAUO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAARA,QAFc;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAACyF,UAAU,CAA0BrG,QAA1B,EAAmCC,IAAnC,CAAX,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAzBH;AA2BD,KA9BD,CALoB;AAAA,GAAtB;;AAqCAL,EAAAA,aAAa,CAACT,IAAd,GAAqBgG,gBAAgB,CAACS,mBAAtC;AAEA,SAAOhG,aAAP;AACD,CA/CM;;ICxCMiG,sBAAsB,GAAG,SAAzBA,sBAAyB,CACpC5G,OADoC,EAEpCC,IAFoC;AAAA,SAGI;AACxCC,IAAAA,IAAI,EAAEsF,iBAAiB,CAACqB,wBADgB;AAExC7G,IAAAA,OAAO,EAAPA,OAFwC;AAGxCC,IAAAA,IAAI,EAAJA;AAHwC,GAHJ;AAAA,CAA/B;AAUP;;AACA,IAAa6G,uBAAuB,GAAG,SAA1BA,uBAA0B,CAIrC9G,OAJqC,EAKrCC,IALqC;AAAA,SAMwB;AAC7DC,IAAAA,IAAI,EAAEsF,iBAAiB,CAACuB,yBADqC;AAE7D/G,IAAAA,OAAO,EAAPA,OAF6D;AAG7DC,IAAAA,IAAI,EAAJA;AAH6D,GANxB;AAAA,CAAhC;AAaP;;AACA,IAAa+G,2BAA2B,GAAG,SAA9BA,2BAA8B,CACzChH,OADyC,EAEzCC,IAFyC;AAAA,SAGI;AAC7CC,IAAAA,IAAI,EAAEsF,iBAAiB,CAACyB,8BADqB;AAE7CjH,IAAAA,OAAO,EAAPA,OAF6C;AAG7CC,IAAAA,IAAI,EAAJA;AAH6C,GAHJ;AAAA,CAApC;AAUP;;AACA,IAAaiH,mBAAmB,GAAG,SAAtBA,mBAAsB,CAIjCxG,OAJiC,EAKjCT,IALiC;AAOjC,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACgG,sBAAsB,CAAClG,OAAD,EAAUT,IAAV,CAAvB,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWiG,OAAX,cAEQzG,OAFR,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACoG,2BAA2B,CAAOhH,OAAP,EAAgBC,IAAhB,CAA5B,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAKdD,YAAAA,MAAM,EAANA;AALc,WAAhB;AAQAP,UAAAA,QAAQ,CACNkG,uBAAuB,CAA2B9G,QAA3B,EAAoCC,IAApC,CADjB,CAAR;AAGAe,UAAAA,OAAO;AACR;AACF,OA3BH;AA6BD,KAhCD,CALoB;AAAA,GAAtB;;AAuCAL,EAAAA,aAAa,CAACT,IAAd,GAAqBsF,iBAAiB,CAAC4B,6BAAvC;AAEA,SAAOzG,aAAP;AACD,CAjDM;;ACpDP;AACA,IAAY0G,eAAZ;;AAAA,WAAYA;AACVA,EAAAA,uCAAA,gCAAA;AACAA,EAAAA,4CAAA,qCAAA;AACAA,EAAAA,uCAAA,gCAAA;AACAA,EAAAA,uCAAA,gCAAA;AACAA,EAAAA,uCAAA,gCAAA;AACAA,EAAAA,iCAAA,0BAAA;AACAA,EAAAA,gCAAA,yBAAA;AACAA,EAAAA,uCAAA,gCAAA;AACAA,EAAAA,iCAAA,0BAAA;AACAA,EAAAA,gCAAA,yBAAA;AACAA,EAAAA,uCAAA,gCAAA;AACAA,EAAAA,iCAAA,0BAAA;AACAA,EAAAA,gCAAA,yBAAA;AACAA,EAAAA,uCAAA,gCAAA;AACAA,EAAAA,kCAAA,2BAAA;AACAA,EAAAA,mCAAA,4BAAA;AACAA,EAAAA,wCAAA,iCAAA;AACAA,EAAAA,uCAAA,gCAAA;AACAA,EAAAA,kCAAA,2BAAA;AACAA,EAAAA,6CAAA,sCAAA;AACAA,EAAAA,sCAAA,+BAAA;AACAA,EAAAA,sCAAA,+BAAA;AACD,CAvBD,EAAYA,eAAe,KAAfA,eAAe,KAAA,CAA3B;;ICgBaC,aAAa,GAAG,SAAhBA,aAAgB,CAC3BtH,OAD2B,EAE3BC,IAF2B;AAAA,SAGI;AAC/BC,IAAAA,IAAI,EAAEmH,eAAe,CAACE,cADS;AAE/BvH,IAAAA,OAAO,EAAPA,OAF+B;AAG/BC,IAAAA,IAAI,EAAJA;AAH+B,GAHJ;AAAA,CAAtB;AAUP;;AACA,IAAauH,YAAY,GAAG,SAAfA,YAAe,CAI1BxH,OAJ0B,EAK1BC,IAL0B;AAAA,SAMe;AACzCC,IAAAA,IAAI,EAAEmH,eAAe,CAACI,aADmB;AAEzCzH,IAAAA,OAAO,EAAPA,OAFyC;AAGzCC,IAAAA,IAAI,EAAJA;AAHyC,GANf;AAAA,CAArB;AAaP;;AACA,IAAayH,kBAAkB,GAAG,SAArBA,kBAAqB,CAChC1H,OADgC,EAEhCC,IAFgC;AAAA,SAGI;AACpCC,IAAAA,IAAI,EAAEmH,eAAe,CAACM,oBADc;AAEpC3H,IAAAA,OAAO,EAAPA,OAFoC;AAGpCC,IAAAA,IAAI,EAAJA,IAHoC;AAIpCO,IAAAA,KAAK,EAAE;AAJ6B,GAHJ;AAAA,CAA3B;AAWP;;AACA,IAAaoH,WAAW,GAAG,SAAdA,WAAc,CAIzBlH,OAJyB,EAKzBT,IALyB;AAOzB,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAAC0G,aAAa,CAAO5G,OAAP,EAAgBT,IAAhB,CAAd,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAW0G,WAAX,cAEOlH,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAAC8G,kBAAkB,CAAO1H,OAAP,EAAgBC,IAAhB,CAAnB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAAC4G,YAAY,CAAkBxH,QAAlB,EAA2BC,IAA3B,CAAb,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KA5BD,CALoB;AAAA,GAAtB;;AAmCAL,EAAAA,aAAa,CAACT,IAAd,GAAqBmH,eAAe,CAACQ,oBAArC;AAEA,SAAOlH,aAAP;AACD,CA7CM;;ICxCMmH,aAAa,GAAG,SAAhBA,aAAgB,CAC3B9H,OAD2B,EAE3BC,IAF2B;AAAA,SAGI;AAC/BC,IAAAA,IAAI,EAAEmH,eAAe,CAACU,cADS;AAE/B/H,IAAAA,OAAO,EAAPA,OAF+B;AAG/BC,IAAAA,IAAI,EAAJA;AAH+B,GAHJ;AAAA,CAAtB;AAUP;;AACA,IAAa+H,YAAY,GAAG,SAAfA,YAAe,CAC1BhI,OAD0B,EAE1BC,IAF0B;AAAA,SAGI;AAC9BC,IAAAA,IAAI,EAAEmH,eAAe,CAACY,aADQ;AAE9BjI,IAAAA,OAAO,EAAPA,OAF8B;AAG9BC,IAAAA,IAAI,EAAJA;AAH8B,GAHJ;AAAA,CAArB;AAUP;;AACA,IAAaiI,kBAAkB,GAAG,SAArBA,kBAAqB,CAChClI,OADgC,EAEhCC,IAFgC;AAAA,SAGI;AACpCC,IAAAA,IAAI,EAAEmH,eAAe,CAACc,oBADc;AAEpCnI,IAAAA,OAAO,EAAPA,OAFoC;AAGpCC,IAAAA,IAAI,EAAJA,IAHoC;AAIpCO,IAAAA,KAAK,EAAE;AAJ6B,GAHJ;AAAA,CAA3B;AAWP;;AACA,IAAa4H,WAAW,GAAG,SAAdA,WAAc,CACzB1H,OADyB,EAEzBT,IAFyB;AAIzB,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACkH,aAAa,CAAOpH,OAAP,EAAgBT,IAAhB,CAAd,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWkH,WAAX,CAAuB1H,OAAO,CAAC2H,OAA/B,EAAwC,UAAClH,MAAD;AACtC,YAAIA,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACsH,kBAAkB,CAAOlI,OAAP,EAAgBC,IAAhB,CAAnB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACoH,YAAY,CAAOhI,QAAP,EAAgBC,IAAhB,CAAb,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAlBD;AAmBD,KAtBD,CALoB;AAAA,GAAtB;;AA6BAL,EAAAA,aAAa,CAACT,IAAd,GAAqBmH,eAAe,CAACiB,oBAArC;AAEA,SAAO3H,aAAP;AACD,CApCM;;IC/BM4H,iBAAiB,GAAG,SAApBA,iBAAoB,CAC/BvI,OAD+B,EAE/BC,IAF+B;AAAA,SAGI;AACnCC,IAAAA,IAAI,EAAEmH,eAAe,CAACmB,oBADa;AAEnCxI,IAAAA,OAAO,EAAPA,OAFmC;AAGnCC,IAAAA,IAAI,EAAJA;AAHmC,GAHJ;AAAA,CAA1B;AAUP;;AACA,IAAawI,cAAc,GAAG,SAAjBA,cAAiB,CAI5BzI,OAJ4B,EAK5BC,IAL4B;AAAA,SAMe;AAC3CC,IAAAA,IAAI,EAAEmH,eAAe,CAACqB,eADqB;AAE3C1I,IAAAA,OAAO,EAAPA,OAF2C;AAG3CC,IAAAA,IAAI,EAAJA;AAH2C,GANf;AAAA,CAAvB;AAaP;;AACA,IAAa0I,sBAAsB,GAAG,SAAzBA,sBAAyB,CACpC3I,OADoC,EAEpCC,IAFoC;AAAA,SAGI;AACxCC,IAAAA,IAAI,EAAEmH,eAAe,CAACuB,0BADkB;AAExC5I,IAAAA,OAAO,EAAPA,OAFwC;AAGxCC,IAAAA,IAAI,EAAJA,IAHwC;AAIxCO,IAAAA,KAAK,EAAE;AAJiC,GAHJ;AAAA,CAA/B;AAWP;;AACA,IAAaqI,cAAc,GAAG,SAAjBA,cAAiB,CAI5BnI,OAJ4B,EAK5BT,IAL4B;AAO5B,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CACN2H,iBAAiB,cAEV7H,OAFU,GAIfT,IAJe,CADX,CAAR;AASAa,MAAAA,MAAM,CAACI,GAAP,CAAW4H,QAAX,cAEOpI,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAAC+H,sBAAsB,CAAO3I,OAAP,EAAgBC,IAAhB,CAAvB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAAC6H,cAAc,CAAkBzI,QAAlB,EAA2BC,IAA3B,CAAf,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KAnCD,CALoB;AAAA,GAAtB;;AA0CAL,EAAAA,aAAa,CAACT,IAAd,GAAqBmH,eAAe,CAAC0B,yBAArC;AAEA,SAAOpI,aAAP;AACD,CApDM;;ICrCMqI,cAAc,GAAG,SAAjBA,cAAiB,CAC5BhJ,OAD4B,EAE5BC,IAF4B;AAAA,SAGI;AAChCC,IAAAA,IAAI,EAAEmH,eAAe,CAAC4B,eADU;AAEhCjJ,IAAAA,OAAO,EAAPA,OAFgC;AAGhCC,IAAAA,IAAI,EAAJA;AAHgC,GAHJ;AAAA,CAAvB;AAUP;;AACA,IAAaiJ,eAAe,GAAG,SAAlBA,eAAkB,CAI7BlJ,OAJ6B,EAK7BC,IAL6B;AAAA,SAMe;AAC5CC,IAAAA,IAAI,EAAEmH,eAAe,CAAC8B,gBADsB;AAE5CnJ,IAAAA,OAAO,EAAPA,OAF4C;AAG5CC,IAAAA,IAAI,EAAJA;AAH4C,GANf;AAAA,CAAxB;AAaP;;AACA,IAAamJ,mBAAmB,GAAG,SAAtBA,mBAAsB,CACjCpJ,OADiC,EAEjCC,IAFiC;AAAA,SAGI;AACrCC,IAAAA,IAAI,EAAEmH,eAAe,CAACgC,qBADe;AAErCrJ,IAAAA,OAAO,EAAPA,OAFqC;AAGrCC,IAAAA,IAAI,EAAJA,IAHqC;AAIrCO,IAAAA,KAAK,EAAE;AAJ8B,GAHJ;AAAA,CAA5B;AAWP;;AACA,IAAa8I,WAAW,GAAG,SAAdA,WAAc,CAIzB5I,OAJyB,EAKzBT,IALyB;MAIzBS;AAAAA,IAAAA,UAA8B;;;AAG9B,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACoI,cAAc,CAAOtI,OAAP,EAAgBT,IAAhB,CAAf,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWqI,SAAX,cAEO7I,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACwI,mBAAmB,CAAOpJ,OAAP,EAAgBC,IAAhB,CAApB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAACsI,eAAe,CAAkBlJ,QAAlB,EAA2BC,IAA3B,CAAhB,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KA5BD,CALoB;AAAA,GAAtB;;AAmCAL,EAAAA,aAAa,CAACT,IAAd,GAAqBmH,eAAe,CAACmC,oBAArC;AAEA,SAAO7I,aAAP;AACD,CA7CM;;ICrCM8I,aAAa,GAAG,SAAhBA,aAAgB,CAC3BzJ,OAD2B,EAE3BC,IAF2B;AAAA,SAGI;AAC/BC,IAAAA,IAAI,EAAEmH,eAAe,CAACqC,cADS;AAE/B1J,IAAAA,OAAO,EAAPA,OAF+B;AAG/BC,IAAAA,IAAI,EAAJA;AAH+B,GAHJ;AAAA,CAAtB;AAUP;;AACA,IAAa0J,YAAY,GAAG,SAAfA,YAAe,CAI1B3J,OAJ0B,EAK1BC,IAL0B;AAAA,SAMe;AACzCC,IAAAA,IAAI,EAAEmH,eAAe,CAACuC,aADmB;AAEzC5J,IAAAA,OAAO,EAAPA,OAFyC;AAGzCC,IAAAA,IAAI,EAAJA;AAHyC,GANf;AAAA,CAArB;AAaP;;AACA,IAAa4J,kBAAkB,GAAG,SAArBA,kBAAqB,CAChC7J,OADgC,EAEhCC,IAFgC;AAAA,SAGI;AACpCC,IAAAA,IAAI,EAAEmH,eAAe,CAACyC,oBADc;AAEpC9J,IAAAA,OAAO,EAAPA,OAFoC;AAGpCC,IAAAA,IAAI,EAAJA,IAHoC;AAIpCO,IAAAA,KAAK,EAAE;AAJ6B,GAHJ;AAAA,CAA3B;AAWP;;AACA,IAAauJ,WAAW,GAAG,SAAdA,WAAc,CAIzBrJ,OAJyB,EAKzBT,IALyB;AAOzB,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAAC6I,aAAa,CAAO/I,OAAP,EAAgBT,IAAhB,CAAd,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAW6I,WAAX,cAEOrJ,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACiJ,kBAAkB,CAAO7J,OAAP,EAAgBC,IAAhB,CAAnB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAAC+I,YAAY,CAAkB3J,QAAlB,EAA2BC,IAA3B,CAAb,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KA5BD,CALoB;AAAA,GAAtB;;AAmCAL,EAAAA,aAAa,CAACT,IAAd,GAAqBmH,eAAe,CAAC2C,oBAArC;AAEA,SAAOrJ,aAAP;AACD,CA7CM;;ACtDP;AACA,IAAYsJ,cAAZ;;AAAA,WAAYA;AACVA,EAAAA,qCAAA,+BAAA;AACAA,EAAAA,0CAAA,oCAAA;AACAA,EAAAA,qCAAA,+BAAA;AACAA,EAAAA,qCAAA,+BAAA;AACAA,EAAAA,qCAAA,+BAAA;AACAA,EAAAA,+BAAA,yBAAA;AACAA,EAAAA,8BAAA,wBAAA;AACAA,EAAAA,qCAAA,+BAAA;AACAA,EAAAA,+BAAA,yBAAA;AACAA,EAAAA,8BAAA,wBAAA;AACAA,EAAAA,qCAAA,+BAAA;AACAA,EAAAA,+BAAA,yBAAA;AACAA,EAAAA,8BAAA,wBAAA;AACAA,EAAAA,qCAAA,+BAAA;AACAA,EAAAA,gCAAA,0BAAA;AACAA,EAAAA,iCAAA,2BAAA;AACAA,EAAAA,sCAAA,gCAAA;AACAA,EAAAA,qCAAA,+BAAA;AACAA,EAAAA,gCAAA,0BAAA;AACAA,EAAAA,2CAAA,qCAAA;AACAA,EAAAA,oCAAA,8BAAA;AACAA,EAAAA,oCAAA,8BAAA;AACD,CAvBD,EAAYA,cAAc,KAAdA,cAAc,KAAA,CAA1B;;ICgBaC,YAAY,GAAG,SAAfA,YAAe,CAC1BlK,OAD0B,EAE1BC,IAF0B;AAAA,SAGI;AAC9BC,IAAAA,IAAI,EAAE+J,cAAc,CAACE,aADS;AAE9BnK,IAAAA,OAAO,EAAPA,OAF8B;AAG9BC,IAAAA,IAAI,EAAJA;AAH8B,GAHJ;AAAA,CAArB;AAUP;;AACA,IAAamK,WAAW,GAAG,SAAdA,WAAc,CAIzBpK,OAJyB,EAKzBC,IALyB;AAAA,SAMc;AACvCC,IAAAA,IAAI,EAAE+J,cAAc,CAACI,YADkB;AAEvCrK,IAAAA,OAAO,EAAPA,OAFuC;AAGvCC,IAAAA,IAAI,EAAJA;AAHuC,GANd;AAAA,CAApB;AAaP;;AACA,IAAaqK,iBAAiB,GAAG,SAApBA,iBAAoB,CAC/BtK,OAD+B,EAE/BC,IAF+B;AAAA,SAGI;AACnCC,IAAAA,IAAI,EAAE+J,cAAc,CAACM,mBADc;AAEnCvK,IAAAA,OAAO,EAAPA,OAFmC;AAGnCC,IAAAA,IAAI,EAAJA,IAHmC;AAInCO,IAAAA,KAAK,EAAE;AAJ4B,GAHJ;AAAA,CAA1B;AAWP;;AACA,IAAagK,UAAU,GAAG,SAAbA,UAAa,CAIxB9J,OAJwB,EAKxBT,IALwB;AAOxB,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACsJ,YAAY,CAAOxJ,OAAP,EAAgBT,IAAhB,CAAb,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWsJ,UAAX,cAEO9J,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAAC0J,iBAAiB,CAAOtK,OAAP,EAAgBC,IAAhB,CAAlB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAACwJ,WAAW,CAAiBpK,QAAjB,EAA0BC,IAA1B,CAAZ,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KA5BD,CALoB;AAAA,GAAtB;;AAmCAL,EAAAA,aAAa,CAACT,IAAd,GAAqB+J,cAAc,CAACQ,mBAApC;AAEA,SAAO9J,aAAP;AACD,CA7CM;;ICxCM+J,YAAY,GAAG,SAAfA,YAAe,CAC1B1K,OAD0B,EAE1BC,IAF0B;AAAA,SAGI;AAC9BC,IAAAA,IAAI,EAAE+J,cAAc,CAACU,aADS;AAE9B3K,IAAAA,OAAO,EAAPA,OAF8B;AAG9BC,IAAAA,IAAI,EAAJA;AAH8B,GAHJ;AAAA,CAArB;AAUP;;AACA,IAAa2K,WAAW,GAAG,SAAdA,WAAc,CACzB5K,OADyB,EAEzBC,IAFyB;AAAA,SAGI;AAC7BC,IAAAA,IAAI,EAAE+J,cAAc,CAACY,YADQ;AAE7B7K,IAAAA,OAAO,EAAPA,OAF6B;AAG7BC,IAAAA,IAAI,EAAJA;AAH6B,GAHJ;AAAA,CAApB;AAUP;;AACA,IAAa6K,iBAAiB,GAAG,SAApBA,iBAAoB,CAC/B9K,OAD+B,EAE/BC,IAF+B;AAAA,SAGI;AACnCC,IAAAA,IAAI,EAAE+J,cAAc,CAACc,mBADc;AAEnC/K,IAAAA,OAAO,EAAPA,OAFmC;AAGnCC,IAAAA,IAAI,EAAJA,IAHmC;AAInCO,IAAAA,KAAK,EAAE;AAJ4B,GAHJ;AAAA,CAA1B;AAWP;;AACA,IAAawK,UAAU,GAAG,SAAbA,UAAa,CACxBtK,OADwB,EAExBT,IAFwB;AAIxB,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAAC8J,YAAY,CAAOhK,OAAP,EAAgBT,IAAhB,CAAb,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAW8J,UAAX,CAAsBtK,OAAO,CAACuK,MAA9B,EAAsC,UAAC9J,MAAD;AACpC,YAAIA,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACkK,iBAAiB,CAAO9K,OAAP,EAAgBC,IAAhB,CAAlB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACgK,WAAW,CAAO5K,QAAP,EAAgBC,IAAhB,CAAZ,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAlBD;AAmBD,KAtBD,CALoB;AAAA,GAAtB;;AA6BAL,EAAAA,aAAa,CAACT,IAAd,GAAqB+J,cAAc,CAACiB,mBAApC;AAEA,SAAOvK,aAAP;AACD,CApCM;;IC/BMwK,gBAAgB,GAAG,SAAnBA,gBAAmB,CAC9BnL,OAD8B,EAE9BC,IAF8B;AAAA,SAGI;AAClCC,IAAAA,IAAI,EAAE+J,cAAc,CAACmB,mBADa;AAElCpL,IAAAA,OAAO,EAAPA,OAFkC;AAGlCC,IAAAA,IAAI,EAAJA;AAHkC,GAHJ;AAAA,CAAzB;AAUP;;AACA,IAAaoL,aAAa,GAAG,SAAhBA,aAAgB,CAI3BrL,OAJ2B,EAK3BC,IAL2B;AAAA,SAMc;AACzCC,IAAAA,IAAI,EAAE+J,cAAc,CAACqB,cADoB;AAEzCtL,IAAAA,OAAO,EAAPA,OAFyC;AAGzCC,IAAAA,IAAI,EAAJA;AAHyC,GANd;AAAA,CAAtB;AAaP;;AACA,IAAasL,qBAAqB,GAAG,SAAxBA,qBAAwB,CACnCvL,OADmC,EAEnCC,IAFmC;AAAA,SAGI;AACvCC,IAAAA,IAAI,EAAE+J,cAAc,CAACuB,yBADkB;AAEvCxL,IAAAA,OAAO,EAAPA,OAFuC;AAGvCC,IAAAA,IAAI,EAAJA,IAHuC;AAIvCO,IAAAA,KAAK,EAAE;AAJgC,GAHJ;AAAA,CAA9B;AAWP;;AACA,IAAaiL,aAAa,GAAG,SAAhBA,aAAgB,CAI3B/K,OAJ2B,EAK3BT,IAL2B;AAO3B,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CACNuK,gBAAgB,cAETzK,OAFS,GAIdT,IAJc,CADV,CAAR;AASAa,MAAAA,MAAM,CAACI,GAAP,CAAWwK,OAAX,cAEOhL,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAAC2K,qBAAqB,CAAOvL,OAAP,EAAgBC,IAAhB,CAAtB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAACyK,aAAa,CAAiBrL,QAAjB,EAA0BC,IAA1B,CAAd,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KAnCD,CALoB;AAAA,GAAtB;;AA0CAL,EAAAA,aAAa,CAACT,IAAd,GAAqB+J,cAAc,CAAC0B,wBAApC;AAEA,SAAOhL,aAAP;AACD,CApDM;;ICrCMiL,aAAa,GAAG,SAAhBA,aAAgB,CAC3B5L,OAD2B,EAE3BC,IAF2B;AAAA,SAGI;AAC/BC,IAAAA,IAAI,EAAE+J,cAAc,CAAC4B,cADU;AAE/B7L,IAAAA,OAAO,EAAPA,OAF+B;AAG/BC,IAAAA,IAAI,EAAJA;AAH+B,GAHJ;AAAA,CAAtB;AAUP;;AACA,IAAa6L,cAAc,GAAG,SAAjBA,cAAiB,CAI5B9L,OAJ4B,EAK5BC,IAL4B;AAAA,SAMc;AAC1CC,IAAAA,IAAI,EAAE+J,cAAc,CAAC8B,eADqB;AAE1C/L,IAAAA,OAAO,EAAPA,OAF0C;AAG1CC,IAAAA,IAAI,EAAJA;AAH0C,GANd;AAAA,CAAvB;AAaP;;AACA,IAAa+L,kBAAkB,GAAG,SAArBA,kBAAqB,CAChChM,OADgC,EAEhCC,IAFgC;AAAA,SAGI;AACpCC,IAAAA,IAAI,EAAE+J,cAAc,CAACgC,oBADe;AAEpCjM,IAAAA,OAAO,EAAPA,OAFoC;AAGpCC,IAAAA,IAAI,EAAJA,IAHoC;AAIpCO,IAAAA,KAAK,EAAE;AAJ6B,GAHJ;AAAA,CAA3B;AAWP;;AACA,IAAa0L,UAAU,GAAG,SAAbA,UAAa,CAIxBxL,OAJwB,EAKxBT,IALwB;MAIxBS;AAAAA,IAAAA,UAA6B;;;AAG7B,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACgL,aAAa,CAAOlL,OAAP,EAAgBT,IAAhB,CAAd,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWiL,QAAX,cAEOzL,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACoL,kBAAkB,CAAOhM,OAAP,EAAgBC,IAAhB,CAAnB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAACkL,cAAc,CAAiB9L,QAAjB,EAA0BC,IAA1B,CAAf,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KA5BD,CALoB;AAAA,GAAtB;;AAmCAL,EAAAA,aAAa,CAACT,IAAd,GAAqB+J,cAAc,CAACmC,mBAApC;AAEA,SAAOzL,aAAP;AACD,CA7CM;;ICrCM0L,YAAY,GAAG,SAAfA,YAAe,CAC1BrM,OAD0B,EAE1BC,IAF0B;AAAA,SAGI;AAC9BC,IAAAA,IAAI,EAAE+J,cAAc,CAACqC,aADS;AAE9BtM,IAAAA,OAAO,EAAPA,OAF8B;AAG9BC,IAAAA,IAAI,EAAJA;AAH8B,GAHJ;AAAA,CAArB;AAUP;;AACA,IAAasM,WAAW,GAAG,SAAdA,WAAc,CAIzBvM,OAJyB,EAKzBC,IALyB;AAAA,SAMc;AACvCC,IAAAA,IAAI,EAAE+J,cAAc,CAACuC,YADkB;AAEvCxM,IAAAA,OAAO,EAAPA,OAFuC;AAGvCC,IAAAA,IAAI,EAAJA;AAHuC,GANd;AAAA,CAApB;AAaP;;AACA,IAAawM,iBAAiB,GAAG,SAApBA,iBAAoB,CAC/BzM,OAD+B,EAE/BC,IAF+B;AAAA,SAGI;AACnCC,IAAAA,IAAI,EAAE+J,cAAc,CAACyC,mBADc;AAEnC1M,IAAAA,OAAO,EAAPA,OAFmC;AAGnCC,IAAAA,IAAI,EAAJA,IAHmC;AAInCO,IAAAA,KAAK,EAAE;AAJ4B,GAHJ;AAAA,CAA1B;AAWP;;AACA,IAAamM,UAAU,GAAG,SAAbA,UAAa,CAIxBjM,OAJwB,EAKxBT,IALwB;AAOxB,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACyL,YAAY,CAAO3L,OAAP,EAAgBT,IAAhB,CAAb,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWyL,UAAX,cAEOjM,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAAC6L,iBAAiB,CAAOzM,OAAP,EAAgBC,IAAhB,CAAlB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAAEA,QAFI;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAAC2L,WAAW,CAAiBvM,QAAjB,EAA0BC,IAA1B,CAAZ,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KA5BD,CALoB;AAAA,GAAtB;;AAmCAL,EAAAA,aAAa,CAACT,IAAd,GAAqB+J,cAAc,CAAC2C,mBAApC;AAEA,SAAOjM,aAAP;AACD,CA7CM;;ACtDP;AACA,IAAYkM,kBAAZ;;AAAA,WAAYA;AACVA,EAAAA,sCAAA,4BAAA;AACAA,EAAAA,4CAAA,kCAAA;AACAA,EAAAA,uCAAA,6BAAA;AACAA,EAAAA,wCAAA,8BAAA;AACAA,EAAAA,6CAAA,mCAAA;AACAA,EAAAA,6CAAA,mCAAA;AACAA,EAAAA,8CAAA,oCAAA;AACAA,EAAAA,mDAAA,yCAAA;AACAA,EAAAA,gCAAA,sBAAA;AACAA,EAAAA,iCAAA,uBAAA;AACAA,EAAAA,mCAAA,yBAAA;AACAA,EAAAA,wCAAA,8BAAA;AACD,CAbD,EAAYA,kBAAkB,KAAlBA,kBAAkB,KAAA,CAA9B;;ICaaC,eAAe,GAAG,SAAlBA,eAAkB,CAC7B9M,OAD6B,EAE7BC,IAF6B;AAAA,SAGI;AACjCC,IAAAA,IAAI,EAAE2M,kBAAkB,CAACE,iBADQ;AAEjC/M,IAAAA,OAAO,EAAPA,OAFiC;AAGjCC,IAAAA,IAAI,EAAJA;AAHiC,GAHJ;AAAA,CAAxB;AAUP;;AACA,IAAa+M,gBAAgB,GAAG,SAAnBA,gBAAmB,CAC9BhN,OAD8B,EAE9BC,IAF8B;AAAA,SAGI;AAClCC,IAAAA,IAAI,EAAE2M,kBAAkB,CAACI,kBADS;AAElCjN,IAAAA,OAAO,EAAPA,OAFkC;AAGlCC,IAAAA,IAAI,EAAJA;AAHkC,GAHJ;AAAA,CAAzB;AAUP;;AACA,IAAaiN,oBAAoB,GAAG,SAAvBA,oBAAuB,CAClClN,OADkC,EAElCC,IAFkC;AAAA,SAGI;AACtCC,IAAAA,IAAI,EAAE2M,kBAAkB,CAACM,uBADa;AAEtCnN,IAAAA,OAAO,EAAPA,OAFsC;AAGtCC,IAAAA,IAAI,EAAJA;AAHsC,GAHJ;AAAA,CAA7B;AAUP;;AACA,IAAamN,YAAY,GAAG,SAAfA,YAAe,CAC1B1M,OAD0B,EAE1BT,IAF0B;AAI1B,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAACkM,eAAe,CAACpM,OAAD,EAAUT,IAAV,CAAhB,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAWmM,OAAX,cAEO3M,OAFP;AAGI4M,QAAAA,YAAY,EAAE,IAHlB;AAIIC,QAAAA,YAAY,EAAE;AAJlB,UAME,UAACpM,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACsM,oBAAoB,CAAOlN,OAAP,EAAgBC,IAAhB,CAArB,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAARA,QAFc;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAACoM,gBAAgB,CAAOhN,QAAP,EAAgBC,IAAhB,CAAjB,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAzBH;AA2BD,KA9BD,CALoB;AAAA,GAAtB;;AAqCAL,EAAAA,aAAa,CAACT,IAAd,GAAqB2M,kBAAkB,CAACW,gBAAxC;AAEA,SAAO7M,aAAP;AACD,CA5CM;;ICjCM8M,qBAAqB,GAAG,SAAxBA,qBAAwB,CACnCzN,OADmC,EAEnCC,IAFmC;AAAA,SAGI;AACvCC,IAAAA,IAAI,EAAE2M,kBAAkB,CAACa,uBADc;AAEvC1N,IAAAA,OAAO,EAAPA,OAFuC;AAGvCC,IAAAA,IAAI,EAAJA;AAHuC,GAHJ;AAAA,CAA9B;AAUP;;AACA,IAAa0N,sBAAsB,GAAG,SAAzBA,sBAAyB,CACpC3N,OADoC,EAEpCC,IAFoC;AAAA,SAGI;AACxCC,IAAAA,IAAI,EAAE2M,kBAAkB,CAACe,wBADe;AAExC5N,IAAAA,OAAO,EAAPA,OAFwC;AAGxCC,IAAAA,IAAI,EAAJA;AAHwC,GAHJ;AAAA,CAA/B;AAUP;;AACA,IAAa4N,0BAA0B,GAAG,SAA7BA,0BAA6B,CACxC7N,OADwC,EAExCC,IAFwC;AAAA,SAGI;AAC5CC,IAAAA,IAAI,EAAE2M,kBAAkB,CAACiB,6BADmB;AAE5C9N,IAAAA,OAAO,EAAPA,OAF4C;AAG5CC,IAAAA,IAAI,EAAJA;AAH4C,GAHJ;AAAA,CAAnC;AAUP;;AACA,IAAa8N,kBAAkB,GAAG,SAArBA,kBAAqB,CAChCrN,OADgC,EAEhCT,IAFgC;AAIhC,MAAMU,aAAa,GAAG,SAAhBA,aAAgB,CACpBC,QADoB,EAEpBC,SAFoB;AAAA,QAGlBC,MAHkB,QAGlBA,MAHkB;AAAA,WAKpB,IAAIC,OAAJ,CAAkB,UAACC,OAAD,EAAUC,MAAV;AAChBL,MAAAA,QAAQ,CAAC6M,qBAAqB,CAAC/M,OAAD,EAAUT,IAAV,CAAtB,CAAR;AAEAa,MAAAA,MAAM,CAACI,GAAP,CAAW8M,QAAX,cAEOtN,OAFP,GAIE,UAACS,MAAD,EAASC,QAAT;AACE,YAAID,MAAM,CAACX,KAAX,EAAkB;AAChB,cAAMR,OAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdS,YAAAA,MAAM,EAANA;AAFc,WAAhB;AAKAP,UAAAA,QAAQ,CAACiN,0BAA0B,CAAO7N,OAAP,EAAgBC,IAAhB,CAA3B,CAAR;AACAgB,UAAAA,MAAM,CAACjB,OAAD,CAAN;AACD,SARD,MAQO;AACL,cAAMA,QAAO,GAAG;AACdU,YAAAA,OAAO,EAAPA,OADc;AAEdU,YAAAA,QAAQ,EAARA,QAFc;AAGdD,YAAAA,MAAM,EAANA;AAHc,WAAhB;AAMAP,UAAAA,QAAQ,CAAC+M,sBAAsB,CAAO3N,QAAP,EAAgBC,IAAhB,CAAvB,CAAR;AACAe,UAAAA,OAAO;AACR;AACF,OAvBH;AAyBD,KA5BD,CALoB;AAAA,GAAtB;;AAmCAL,EAAAA,aAAa,CAACT,IAAd,GAAqB2M,kBAAkB,CAACoB,sBAAxC;AAEA,SAAOtN,aAAP;AACD,CA1CM;;ACjCA,IAAM4L,aAAW,GAAG,SAAdA,WAAc,CACzBvM,OADyB;AAAA,SAEa;AACtCE,IAAAA,IAAI,EAAE+J,cAAc,CAACiE,kBADiB;AAEtClO,IAAAA,OAAO,EAAPA;AAFsC,GAFb;AAAA,CAApB;AAQP;;AACA,AAAO,IAAM4K,aAAW,GAAG,SAAdA,WAAc,CACzB5K,OADyB;AAAA,SAEa;AACtCE,IAAAA,IAAI,EAAE+J,cAAc,CAACkE,kBADiB;AAEtCnO,IAAAA,OAAO,EAAPA;AAFsC,GAFb;AAAA,CAApB;AAQP;;AACA,IAAaoO,kBAAkB,GAAG,SAArBA,kBAAqB,CAChCxN,QADgC;AAAA,SAE5B;AACJ0E,IAAAA,IAAI,EAAE,cAACtF,OAAD;AACJ,cAAQA,OAAO,CAACqO,OAAR,CAAgBC,KAAxB;AACE,aAAK,QAAL;AACE1N,UAAAA,QAAQ,CACN2L,aAAW,CACPvM,OAAqD,CAACqO,OAD/C,CADL,CAAR;AAKA;;AACF,aAAK,QAAL;AACEzN,UAAAA,QAAQ,CACNgK,aAAW,CACP5K,OAAqD,CAACqO,OAD/C,CADL,CAAR;AAKA;AAdJ;AAkBD;AApBG,GAF4B;AAAA,CAA3B;;AClBA,IAAM1E,cAAY,GAAG,SAAfA,YAAe,CAC1B3J,OAD0B;AAAA,SAEkB;AAC5CE,IAAAA,IAAI,EAAEmH,eAAe,CAACkH,mBADsB;AAE5CvO,IAAAA,OAAO,EAAPA;AAF4C,GAFlB;AAAA,CAArB;AAQP;;AACA,AAAO,IAAMgI,cAAY,GAAG,SAAfA,YAAe,CAC1BhI,OAD0B;AAAA,SAEkB;AAC5CE,IAAAA,IAAI,EAAEmH,eAAe,CAACmH,mBADsB;AAE5CxO,IAAAA,OAAO,EAAPA;AAF4C,GAFlB;AAAA,CAArB;AAQP;;AACA,IAAayO,mBAAmB,GAAG,SAAtBA,mBAAsB,CACjC7N,QADiC;AAAA,SAE7B;AACJmB,IAAAA,KAAK,EAAE,eAAC/B,OAAD;AACL,cAAQA,OAAO,CAACqO,OAAR,CAAgBC,KAAxB;AACE,aAAK,QAAL;AACE1N,UAAAA,QAAQ,CACN+I,cAAY,CACR3J,OAA2D,CAC1DqO,OAFO,CADN,CAAR;AAMA;;AACF,aAAK,QAAL;AACEzN,UAAAA,QAAQ,CACNoH,cAAY,CACRhI,OAA2D,CAC1DqO,OAFO,CADN,CAAR;AAMA;AAhBJ;AAoBD;AAtBG,GAF6B;AAAA,CAA5B;;ACjBP,IAAMK,4BAA4B,GAAG,SAA/BA,4BAA+B,CAGnC1O,OAHmC;AAAA,SAI8B;AACjEE,IAAAA,IAAI,EAAEJ,oBAAoB,CAAC6O,sCADsC;AAEjE3O,IAAAA,OAAO,EAAPA;AAFiE,GAJ9B;AAAA,CAArC;;AASA,IAAM4O,gBAAgB,GAAG,SAAnBA,gBAAmB,CAGvB5O,OAHuB;AAAA,SAI8B;AACrDE,IAAAA,IAAI,EAAEJ,oBAAoB,CAAC+O,yBAD0B;AAErD7O,IAAAA,OAAO,EAAPA;AAFqD,GAJ9B;AAAA,CAAzB;;AASA,IAAM8O,oBAAoB,GAAG,SAAvBA,oBAAuB,CAG3B9O,OAH2B;AAAA,SAI8B;AACzDE,IAAAA,IAAI,EAAEJ,oBAAoB,CAACiP,6BAD8B;AAEzD/O,IAAAA,OAAO,EAAPA;AAFyD,GAJ9B;AAAA,CAA7B;;;AAUA,IAAagP,wBAAwB,GAAG,SAA3BA,wBAA2B,CAMtCpO,QANsC;AAAA,SAOlC;AACJqO,IAAAA,UAAU,EAAE,oBAACjP,OAAD;AACV,cAAQA,OAAO,CAACqO,OAAR,CAAgBC,KAAxB;AACE,aAAK,QAAL;AACE1N,UAAAA,QAAQ,CACNgO,gBAAgB,CACZ5O,OAEA,CAACqO,OAHW,CADV,CAAR;AAOA;;AACF,aAAK,QAAL;AACEzN,UAAAA,QAAQ,CACN8N,4BAA4B,CACxB1O,OAEA,CAACqO,OAHuB,CADtB,CAAR;AAOA;;AACF,aAAK,QAAL;AACEzN,UAAAA,QAAQ,CACNkO,oBAAoB,CAChB9O,OAEA,CAACqO,OAHe,CADd,CAAR;AAOA;AA3BJ;AA+BD;AAjCG,GAPkC;AAAA,CAAjC;;ACrCA,IAAMa,eAAe,GAAG,SAAlBA,eAAkB,CAC7BlP,OAD6B;AAAA,SAEW;AACxCE,IAAAA,IAAI,EAAEsF,iBAAiB,CAAC2J,gBADgB;AAExCnP,IAAAA,OAAO,EAAPA;AAFwC,GAFX;AAAA,CAAxB;AAQP;;AACA,IAAaoP,qBAAqB,GAAG,SAAxBA,qBAAwB,CACnCxO,QADmC;AAAA,SAE/B;AACJyN,IAAAA,OAAO,EAAE,iBAACrO,OAAD;AAAA,aACPY,QAAQ,CAACsO,eAAe,CAAelP,OAAf,CAAhB,CADD;AAAA;AADL,GAF+B;AAAA,CAA9B;;ACfP;AACA,IAAYqP,gBAAZ;;AAAA,WAAYA;AACVA,EAAAA,wBAAA,SAAA;AACAA,EAAAA,gCAAA,iBAAA;AACAA,EAAAA,yBAAA,UAAA;AACAA,EAAAA,2BAAA,YAAA;AACD,CALD,EAAYA,gBAAgB,KAAhBA,gBAAgB,KAAA,CAA5B;;ACYO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACtP,OAAD;AAAA,SAAqD;AAC3EE,IAAAA,IAAI,EAAE2M,kBAAkB,CAAC0C,UADkD;AAE3EvP,IAAAA,OAAO,EAAPA;AAF2E,GAArD;AAAA,CAAjB;AAMP;;AACA,AAAO,IAAMwP,SAAS,GAAG,SAAZA,SAAY,CAACxP,OAAD;AAAA,SAAsD;AAC7EE,IAAAA,IAAI,EAAE2M,kBAAkB,CAAC4C,WADoD;AAE7EzP,IAAAA,OAAO,EAAPA;AAF6E,GAAtD;AAAA,CAAlB;AAMP;;AACA,AAAO,IAAM0P,WAAW,GAAG,SAAdA,WAAc,CACzB1P,OADyB;AAAA,SAED;AACxBE,IAAAA,IAAI,EAAE2M,kBAAkB,CAAC8C,aADD;AAExB3P,IAAAA,OAAO,EAAPA;AAFwB,GAFC;AAAA,CAApB;AAQP;;AACA,AAAO,IAAM4P,eAAe,GAAG,SAAlBA,eAAkB,CAC7B5P,OAD6B;AAAA,SAED;AAC5BE,IAAAA,IAAI,EAAE2M,kBAAkB,CAACgD,kBADG;AAE5B7P,IAAAA,OAAO,EAAPA;AAF4B,GAFC;AAAA,CAAxB;AAQP;;AACA,IAAa8P,sBAAsB,GAAG,SAAzBA,sBAAyB,CACpClP,QADoC;AAAA,SAEhC;AACJmP,IAAAA,QAAQ,EAAE,kBAAC/P,OAAD;AACR,cAAQA,OAAO,CAACgQ,MAAhB;AACE,aAAKX,gBAAgB,CAACY,IAAtB;AACErP,UAAAA,QAAQ,CAAC0O,QAAQ,CAACtP,OAAD,CAAT,CAAR;AACA;;AACF,aAAKqP,gBAAgB,CAACa,KAAtB;AACEtP,UAAAA,QAAQ,CAAC4O,SAAS,CAACxP,OAAD,CAAV,CAAR;AACA;;AACF,aAAKqP,gBAAgB,CAACc,OAAtB;AACEvP,UAAAA,QAAQ,CAAC8O,WAAW,CAAC1P,OAAD,CAAZ,CAAR;AACA;;AACF,aAAKqP,gBAAgB,CAACe,YAAtB;AACExP,UAAAA,QAAQ,CAACgP,eAAe,CAAC5P,OAAD,CAAhB,CAAR;AACA;AAZJ;AAgBD;AAlBG,GAFgC;AAAA,CAA/B;;ACvCA,IAAMqQ,cAAc,GAAG,SAAjBA,cAAiB,CAC5BrQ,OAD4B;AAAA,SAEU;AACtCE,IAAAA,IAAI,EAAEgG,gBAAgB,CAACoK,eADe;AAEtCtQ,IAAAA,OAAO,EAAPA;AAFsC,GAFV;AAAA,CAAvB;AAQP;;AACA,IAAauQ,oBAAoB,GAAG,SAAvBA,oBAAuB,CAClC3P,QADkC;AAAA,SAE9B;AACJ8F,IAAAA,MAAM,EAAE,gBAAC1G,OAAD;AAAA,aACNY,QAAQ,CAACyP,cAAc,CAAcrQ,OAAd,CAAf,CADF;AAAA;AADJ,GAF8B;AAAA,CAA7B;;ACfP;AACA,AAAA,IAAYwQ,mBAAZ;;AAAA,WAAYA;AACVA,EAAAA,iDAAA,4BAAA;AACAA,EAAAA,+CAAA,2BAAA;AACAA,EAAAA,qDAAA,gCAAA;AACAA,EAAAA,8CAAA,yBAAA;AACAA,EAAAA,mDAAA,8BAAA;AACAA,EAAAA,iEAAA,wCAAA;AACAA,EAAAA,0CAAA,sBAAA;AACD,CARD,EAAYA,mBAAmB,KAAnBA,mBAAmB,KAAA,CAA/B;;ACDA;AACA,IAAYC,qBAAZ;;AAAA,WAAYA;AACVA,EAAAA,6CAAA,gCAAA;AACAA,EAAAA,4CAAA,+BAAA;AACAA,EAAAA,iDAAA,oCAAA;AACAA,EAAAA,0CAAA,6BAAA;AACAA,EAAAA,+CAAA,kCAAA;AACAA,EAAAA,iDAAA,oCAAA;AACAA,EAAAA,2DAAA,8CAAA;AACAA,EAAAA,sCAAA,yBAAA;AACD,CATD,EAAYA,qBAAqB,KAArBA,qBAAqB,KAAA,CAAjC;;ICeaC,aAAa,GAAG,SAAhBA,aAAgB,CAC3B1Q,OAD2B;AAAA,SAEG;AAC9BE,IAAAA,IAAI,EAAEuQ,qBAAqB,CAACE,oBADE;AAE9B3Q,IAAAA,OAAO,EAAPA;AAF8B,GAFH;AAAA,CAAtB;AAQP;;AACA,IAAa4Q,YAAY,GAAG,SAAfA,YAAe,CAC1B5Q,OAD0B;AAAA,SAEG;AAC7BE,IAAAA,IAAI,EAAEuQ,qBAAqB,CAACI,mBADC;AAE7B7Q,IAAAA,OAAO,EAAPA;AAF6B,GAFH;AAAA,CAArB;AAQP;;AACA,IAAa8Q,iBAAiB,GAAG,SAApBA,iBAAoB,CAC/B9Q,OAD+B;AAAA,SAEG;AAClCE,IAAAA,IAAI,EAAEuQ,qBAAqB,CAACM,wBADM;AAElC/Q,IAAAA,OAAO,EAAPA;AAFkC,GAFH;AAAA,CAA1B;AAQP;;AACA,IAAagR,UAAU,GAAG,SAAbA,UAAa,CACxBhR,OADwB;AAAA,SAEG;AAC3BE,IAAAA,IAAI,EAAEuQ,qBAAqB,CAACQ,iBADD;AAE3BjR,IAAAA,OAAO,EAAPA;AAF2B,GAFH;AAAA,CAAnB;AAQP;;AACA,IAAakR,eAAe,GAAG,SAAlBA,eAAkB,CAC7BlR,OAD6B;AAAA,SAEG;AAChCE,IAAAA,IAAI,EAAEuQ,qBAAqB,CAACU,sBADI;AAEhCnR,IAAAA,OAAO,EAAPA;AAFgC,GAFH;AAAA,CAAxB;AAQP;;AACA,IAAaoR,iBAAiB,GAAG,SAApBA,iBAAoB,CAC/BpR,OAD+B;AAAA,SAEG;AAClCE,IAAAA,IAAI,EAAEuQ,qBAAqB,CAACY,wBADM;AAElCrR,IAAAA,OAAO,EAAPA;AAFkC,GAFH;AAAA,CAA1B;AAQP;;AACA,IAAasR,2BAA2B,GAAG,SAA9BA,2BAA8B,CACzCtR,OADyC;AAAA,SAEC;AAC1CE,IAAAA,IAAI,EAAEuQ,qBAAqB,CAACc,kCADc;AAE1CvR,IAAAA,OAAO,EAAPA;AAF0C,GAFD;AAAA,CAApC;AAQP;;AACA,IAAawR,OAAO,GAAG,SAAVA,OAAU,CAACxR,OAAD;AAAA,SAAuD;AAC5EE,IAAAA,IAAI,EAAEuQ,qBAAqB,CAACgB,aADgD;AAE5EzR,IAAAA,OAAO,EAAPA;AAF4E,GAAvD;AAAA,CAAhB;;AAiBP,IAAa0R,yBAAyB,GAAG,SAA5BA,yBAA4B,CACvC9Q,QADuC;AAAA,SAEnC;AACJO,IAAAA,MAAM,EAAE,gBAACnB,OAAD;AACN,cAAQA,OAAO,CAAC2R,QAAhB;AACE,aAAKnB,mBAAmB,CAACoB,wBAAzB;AACEhR,UAAAA,QAAQ,CAACgQ,YAAY,CAAC5Q,OAAD,CAAb,CAAR;AACA;;AACF,aAAKwQ,mBAAmB,CAACqB,8BAAzB;AACEjR,UAAAA,QAAQ,CAACkQ,iBAAiB,CAAC9Q,OAAD,CAAlB,CAAR;AACA;;AACF,aAAKwQ,mBAAmB,CAACsB,uBAAzB;AACElR,UAAAA,QAAQ,CAACoQ,UAAU,CAAChR,OAAD,CAAX,CAAR;AACA;;AACF,aAAKwQ,mBAAmB,CAACuB,4BAAzB;AACEnR,UAAAA,QAAQ,CAACsQ,eAAe,CAAClR,OAAD,CAAhB,CAAR;AACA;;AACF,aAAKwQ,mBAAmB,CAACwB,0CAAzB;AACEpR,UAAAA,QAAQ,CAAC0Q,2BAA2B,CAACtR,OAAD,CAA5B,CAAR;AACA;;AACF,aAAKwQ,mBAAmB,CAACyB,mBAAzB;AACErR,UAAAA,QAAQ,CAAC4Q,OAAO,CAACxR,OAAD,CAAR,CAAR;AACA;AAlBJ;AAsBD;AAxBG,GAFmC;AAAA,CAAlC;;AChGP;AACA,IAAYkS,uBAAZ;;AAAA,WAAYA;AACVA,EAAAA,2CAAA,4BAAA;AACAA,EAAAA,6CAAA,8BAAA;AACD,CAHD,EAAYA,uBAAuB,KAAvBA,uBAAuB,KAAA,CAAnC;;ACDA;AACA,AAAA,IAAYC,qBAAZ;;AAAA,WAAYA;AACVA,EAAAA,+CAAA,wBAAA;AACAA,EAAAA,iDAAA,0BAAA;AACAA,EAAAA,gDAAA,0BAAA;AACAA,EAAAA,8CAAA,wBAAA;AACAA,EAAAA,4CAAA,sBAAA;AACD,CAND,EAAYA,qBAAqB,KAArBA,qBAAqB,KAAA,CAAjC;;ICSaC,SAAS,GAAG,SAAZA,SAAY;AAAA,SAA6B;AACpDlS,IAAAA,IAAI,EAAEgS,uBAAuB,CAACG;AADsB,GAA7B;AAAA,CAAlB;AAKP;;AACA,IAAaC,WAAW,GAAG,SAAdA,WAAc;AAAA,SAA+B;AACxDpS,IAAAA,IAAI,EAAEgS,uBAAuB,CAACK;AAD0B,GAA/B;AAAA,CAApB;AAWP;;AACA,IAAaC,2BAA2B,GAAG,SAA9BA,2BAA8B,CACzC5R,QADyC;AAAA,SAErC;AACJO,IAAAA,MAAM,EAAE,gBAACnB,OAAD;AACN,cAAQA,OAAO,CAAC2R,QAAhB;AACE,aAAKQ,qBAAqB,CAACM,sBAA3B;AACE7R,UAAAA,QAAQ,CAACwR,SAAS,EAAV,CAAR;AACA;;AACF,aAAKD,qBAAqB,CAACO,wBAA3B;AACE9R,UAAAA,QAAQ,CAAC0R,WAAW,EAAZ,CAAR;AACA;;AACF,aAAKH,qBAAqB,CAACQ,uBAA3B;AACE/R,UAAAA,QAAQ,CAACwR,SAAS,EAAV,CAAR;AACA;;AACF,aAAKD,qBAAqB,CAACS,qBAA3B;AACEhS,UAAAA,QAAQ,CAACwR,SAAS,EAAV,CAAR;AACA;;AACF,aAAKD,qBAAqB,CAACU,mBAA3B;AACEjS,UAAAA,QAAQ,CAAC0R,WAAW,EAAZ,CAAR;AACA;AAfJ;AAmBD;AArBG,GAFqC;AAAA,CAApC;;AC5BP;AACA,IAAYQ,4BAAZ;;AAAA,WAAYA;AACVA,EAAAA,iDAAA,6BAAA;AACAA,EAAAA,+CAAA,2BAAA;AACD,CAHD,EAAYA,4BAA4B,KAA5BA,4BAA4B,KAAA,CAAxC;;ACDA;AACA,AAAA,IAAYC,0BAAZ;;AAAA,WAAYA;AACVA,EAAAA,mDAAA,wBAAA;AACAA,EAAAA,qDAAA,0BAAA;AACD,CAHD,EAAYA,0BAA0B,KAA1BA,0BAA0B,KAAA,CAAtC;;ICSaC,WAAW,GAAG,SAAdA,WAAc,CACzBhT,OADyB;AAAA,SAEF;AACvBE,IAAAA,IAAI,EAAE4S,4BAA4B,CAACG,iBADZ;AAEvBjT,IAAAA,OAAO,EAAPA;AAFuB,GAFE;AAAA,CAApB;AAQP;;AACA,IAAakT,SAAS,GAAG,SAAZA,SAAY,CACvBlT,OADuB;AAAA,SAEF;AACrBE,IAAAA,IAAI,EAAE4S,4BAA4B,CAACK,eADd;AAErBnT,IAAAA,OAAO,EAAPA;AAFqB,GAFE;AAAA,CAAlB;AAcP;;AACA,IAAaoT,gCAAgC,GAAG,SAAnCA,gCAAmC,CAC9CxS,QAD8C;AAAA,SAE1C;AACJO,IAAAA,MAAM,EAAE,gBAACnB,OAAD;AACN,cAAQA,OAAO,CAAC2R,QAAhB;AACE,aAAKoB,0BAA0B,CAACH,qBAAhC;AACEhS,UAAAA,QAAQ,CAACsS,SAAS,CAAClT,OAAD,CAAV,CAAR;AACA;;AACF,aAAK+S,0BAA0B,CAACJ,uBAAhC;AACE/R,UAAAA,QAAQ,CAACoS,WAAW,CAAChT,OAAD,CAAZ,CAAR;AACA;AANJ;AAUD;AAZG,GAF0C;AAAA,CAAzC;;ACxBP;;;;;;AAMA,IAAaqT,gBAAgB,GAAG,SAAnBA,gBAAmB;oCAAIC;AAAAA,IAAAA;;;AAClC,SAAOC,MAAM,CAACC,MAAP,OAAAD,MAAM,GAAQ,EAAR,SAAeE,oBAAoB,CAACH,SAAD,CAAnC,EAAb;AACD,CAFM;AAIP;;;;;;;AAMA,IAAMG,oBAAoB,GAAG,SAAvBA,oBAAuB,CAC3BH,SAD2B;AAG3B,MAAMI,MAAM,GAAgC,EAA5C;AACA,MAAMC,iBAAiB,GAEnB,EAFJ;;AAKAL,EAAAA,SAAS,CAACM,OAAV,CAAkB,UAACC,QAAD;AAChB,QAAIA,QAAQ,CAACxF,OAAT,KAAqByF,SAAzB,EAAoC;AAClC,UAAIH,iBAAiB,CAACtF,OAAlB,KAA8ByF,SAAlC,EAA6C;AAC3CH,QAAAA,iBAAiB,CAAC,SAAD,CAAjB,GAA+B,EAA/B;AACD;;AAEDA,MAAAA,iBAAiB,CAAC,SAAD,CAAjB,CAA6BI,IAA7B,CAAkCF,QAAlC;AACD;;AAED,QAAIA,QAAQ,CAAC9D,QAAT,KAAsB+D,SAA1B,EAAqC;AACnC,UAAIH,iBAAiB,CAAC5D,QAAlB,KAA+B+D,SAAnC,EAA8C;AAC5CH,QAAAA,iBAAiB,CAAC,UAAD,CAAjB,GAAgC,EAAhC;AACD;;AAEDA,MAAAA,iBAAiB,CAAC,UAAD,CAAjB,CAA8BI,IAA9B,CAAmCF,QAAnC;AACD;;AAED,QAAIA,QAAQ,CAACnN,MAAT,KAAoBoN,SAAxB,EAAmC;AACjC,UAAIH,iBAAiB,CAACjN,MAAlB,KAA6BoN,SAAjC,EAA4C;AAC1CH,QAAAA,iBAAiB,CAAC,QAAD,CAAjB,GAA8B,EAA9B;AACD;;AAEDA,MAAAA,iBAAiB,CAAC,QAAD,CAAjB,CAA4BI,IAA5B,CAAiCF,QAAjC;AACD;;AAED,QAAIA,QAAQ,CAACvO,IAAT,KAAkBwO,SAAtB,EAAiC;AAC/B,UAAIH,iBAAiB,CAACrO,IAAlB,KAA2BwO,SAA/B,EAA0C;AACxCH,QAAAA,iBAAiB,CAAC,MAAD,CAAjB,GAA4B,EAA5B;AACD;;AAEDA,MAAAA,iBAAiB,CAAC,MAAD,CAAjB,CAA0BI,IAA1B,CAA+BF,QAA/B;AACD;;AAED,QAAIA,QAAQ,CAAC9R,KAAT,KAAmB+R,SAAvB,EAAkC;AAChC,UAAIH,iBAAiB,CAAC5R,KAAlB,KAA4B+R,SAAhC,EAA2C;AACzCH,QAAAA,iBAAiB,CAAC,OAAD,CAAjB,GAA6B,EAA7B;AACD;;AAEDA,MAAAA,iBAAiB,CAAC,OAAD,CAAjB,CAA2BI,IAA3B,CAAgCF,QAAhC;AACD;;AAED,QAAIA,QAAQ,CAAC5E,UAAT,KAAwB6E,SAA5B,EAAuC;AACrC,UAAIH,iBAAiB,CAAC1E,UAAlB,KAAiC6E,SAArC,EAAgD;AAC9CH,QAAAA,iBAAiB,CAAC,YAAD,CAAjB,GAAkC,EAAlC;AACD;;AAEDA,MAAAA,iBAAiB,CAAC,YAAD,CAAjB,CAAgCI,IAAhC,CAAqCF,QAArC;AACD;;AAED,QAAIA,QAAQ,CAAC1S,MAAT,KAAoB2S,SAAxB,EAAmC;AACjC,UAAIH,iBAAiB,CAACxS,MAAlB,KAA6B2S,SAAjC,EAA4C;AAC1CH,QAAAA,iBAAiB,CAAC,QAAD,CAAjB,GAA8B,EAA9B;AACD;;AAEDA,MAAAA,iBAAiB,CAAC,QAAD,CAAjB,CAA4BI,IAA5B,CAAiCF,QAAjC;AACD;AACF,GAxDD;;AA2DAN,EAAAA,MAAM,CAACS,OAAP,CAAeL,iBAAf,EAAkCC,OAAlC,CACE;QAAEK;QAAcC;;AACd,QAAIA,eAAe,IAAIA,eAAe,CAACC,MAAhB,KAA2B,CAAlD,EAAqD;AACnD;AACAT,MAAAA,MAAM,CAACK,IAAP,CAAYG,eAAe,CAAC,CAAD,CAA3B;AACD,KAHD,MAGO,IAAIA,eAAe,IAAIA,eAAe,CAACC,MAAhB,GAAyB,CAAhD,EAAmD;AACxD;AACAT,MAAAA,MAAM,CAACK,IAAP,CACEK,sBAAsB,CACpBH,YADoB,EAEpBC,eAFoB,CADxB;AAMD;AACF,GAdH;AAiBA,SAAOR,MAAP;AACD,CAtFD;AAwFA;;;;;;;;;AAOA,IAAMU,sBAAsB,GAAG,SAAzBA,sBAAyB,CAC7BH,YAD6B,EAE7BX,SAF6B;;;AAI7B;AACA,2BACGW,YADH,IACkB,UACdjU,OADc;AAUdsT,IAAAA,SAAS,CAACM,OAAV,CAAkB,UAACC,QAAD;AAChB,UAAMQ,eAAe,GAAGR,QAAQ,CAACI,YAAD,CAAhC;;AAEA,UAAII,eAAe,KAAKP,SAAxB,EAAmC;AACjCO,QAAAA,eAAe,CAACrU,OAAD,CAAf;AACD;AACF,KAND;AAOD,GAlBH;AAoBD,CAzBD;;IC5GasU,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAC1T,QAAD;AAAA,SAClCyS,gBAAgB,CACdjE,qBAAqB,CAACxO,QAAD,CADP,EAEdkP,sBAAsB,CAAClP,QAAD,CAFR,EAGd2P,oBAAoB,CAAC3P,QAAD,CAHN,EAId8Q,yBAAyB,CAAC9Q,QAAD,CAJX,EAKd8Q,yBAAyB,CAAC9Q,QAAD,CALX,EAMd4R,2BAA2B,CAAC5R,QAAD,CANb,EAOdwS,gCAAgC,CAACxS,QAAD,CAPlB,EAQdwN,kBAAkB,CAACxN,QAAD,CARJ,EASd6N,mBAAmB,CAAC7N,QAAD,CATL,EAUdoO,wBAAwB,CAACpO,QAAD,CAVV,CADkB;AAAA,CAA7B;;ACGP,IAAM2T,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA,SAEQ;AACjCC,IAAAA,IAAI,EAAE;AAD2B,GAFR;AAAA,CAA3B;;AAMA,IAAMtF,iBAAe,GAAG,SAAlBA,eAAkB,CACtBuF,KADsB,EAEtBzU,OAFsB;AAItB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;;AAIA,MAAIE,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,MAAmCb,SAAvC,EAAkD;AAChDY,IAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,IAAiC,EAAjC;AACD;;AAEDD,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,cAAqCD,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,CAArC,GAAqE3U,OAArE;AAEA,SAAO0U,QAAP;AACD,CAfD;;AAiBA,IAAM5N,yBAAuB,GAAG,SAA1BA,uBAA0B,CAI9B2N,KAJ8B,EAK9BzU,OAL8B;AAO9B,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;;AAIA,MAAIE,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACU,OAAR,CAAgBiU,OAA9B,MAA2Cb,SAA/C,EAA0D;AACxDY,IAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACU,OAAR,CAAgBiU,OAA9B,IAAyC,EAAzC;AACD;;AAED,MAAMC,OAAO,GAAkB5U,OAAO,CAACoB,QAAR,CAAiByT,QAAjB,CAA0B/S,GAA1B,CAC7B,UAACgT,CAAD;AAAA,WACI;AACAH,MAAAA,OAAO,EAAE3U,OAAO,CAACU,OAAR,CAAgBiU,OADzB;AAEAtG,MAAAA,OAAO,EAAEyG,CAAC,CAACC,KAFX;AAGAC,MAAAA,SAAS,EAAEF,CAAC,CAACE;AAHb,KADJ;AAAA,GAD6B,CAA/B;AASAN,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACU,OAAR,CAAgBiU,OAA9B,cACKD,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACU,OAAR,CAAgBiU,OAA9B,CADL,EAEKC,OAFL;AAKA,SAAOF,QAAP;AACD,CA9BD;;;AAiCA,IAAaO,oBAAoB,GAAG,SAAvBA,oBAAuB;AAAA,SAK7B,UACLR,KADK,EAELzE,MAFK;QACLyE;AAAAA,MAAAA,QAAmCF,kBAAkB;;;AAGrD,YAAQvE,MAAM,CAAC9P,IAAf;AACE,WAAKsF,iBAAiB,CAAC2J,gBAAvB;AACE,eAAOD,iBAAe,CAAcuF,KAAd,EAAqBzE,MAAM,CAAChQ,OAA5B,CAAtB;;AACF,WAAKwF,iBAAiB,CAACuB,yBAAvB;AACE,eAAOD,yBAAuB,CAC5B2N,KAD4B,EAE5BzE,MAAM,CAAChQ,OAFqB,CAA9B;;AAIF;AACE,eAAOyU,KAAP;AATJ;AAWD,GApBmC;AAAA,CAA7B;;AC5DP,IAAMF,oBAAkB,GAAG,SAArBA,kBAAqB;AAAA,SAEM;AAC/BC,IAAAA,IAAI,EAAE;AADyB,GAFN;AAAA,CAA3B;;AAMA,IAAMnE,gBAAc,GAAG,SAAjBA,cAAiB,CACrBoE,KADqB,EAErBzU,OAFqB;AAIrB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;;AAIA,MAAIE,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,MAAmCb,SAAvC,EAAkD;AAChDY,IAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,IAAiC,EAAjC;AACD;;AAEDD,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,cAAqCD,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,CAArC,GAAqE3U,OAArE;AAEA,SAAO0U,QAAP;AACD,CAfD;;;AAkBA,IAAaQ,mBAAmB,GAAG,SAAtBA,mBAAsB;AAAA,SAI5B,UACLT,KADK,EAELzE,MAFK;QACLyE;AAAAA,MAAAA,QAAiCF,oBAAkB;;;AAGnD,YAAQvE,MAAM,CAAC9P,IAAf;AACE,WAAKgG,gBAAgB,CAACoK,eAAtB;AACE,eAAOD,gBAAc,CAAaoE,KAAb,EAAoBzE,MAAM,CAAChQ,OAA3B,CAArB;;AACF;AACE,eAAOyU,KAAP;AAJJ;AAMD,GAdkC;AAAA,CAA5B;;ACVP,IAAMF,oBAAkB,GAAG,SAArBA,kBAAqB;AACzB,SAAO;AACLC,IAAAA,IAAI,EAAE,EADD;AAELW,IAAAA,cAAc,EAAE;AAFX,GAAP;AAID,CALD;;AAOA,IAAM9H,OAAO,GAAG,SAAVA,OAAU,CACdoH,KADc,EAEdzU,OAFc;AAId,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eACCC,KAAK,CAACD,IADP,MAECxU,OAAO,CAACoB,QAAR,CAAiBgU,QAFlB,CADW;AAKfD,IAAAA,cAAc,EAAEnV,OAAO,CAACoB,QAAR,CAAiB+T;AALlB,GAAjB;AAQA,SAAOT,QAAP;AACD,CAbD;;AAeA,IAAM1G,QAAQ,GAAG,SAAXA,QAAW,CACfyG,KADe,EAEfzU,OAFe;AAIf,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb,CADW;AAEfW,IAAAA,cAAc,EAAEV,KAAK,CAACU;AAFP,GAAjB;AAKA5B,EAAAA,MAAM,CAAC8B,IAAP,CAAYrV,OAAO,CAACoV,QAApB,EAA8BxB,OAA9B,CAAsC,UAACe,OAAD;AACpC;AACA,QAAID,QAAQ,CAACF,IAAT,CAAcG,OAAd,CAAJ,EAA4B;AAC1BD,MAAAA,QAAQ,CAACF,IAAT,CAAcG,OAAd,IAAyB3U,OAAO,CAACoV,QAAR,CAAiBT,OAAjB,CAAzB;AACD;AACF,GALD;AAOA,SAAOD,QAAP;AACD,CAjBD;;AAmBA,IAAMY,UAAU,GAAG,SAAbA,UAAa,CACjBb,KADiB,EAEjBzU,OAFiB;AAIjB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb,CADW;AAEfW,IAAAA,cAAc,EAAEV,KAAK,CAACU;AAFP,GAAjB;AAKA,MAAII,SAAS,GAAuB,EAApC;;AAGA,MAAIb,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,CAAJ,EAAoC;AAClCY,IAAAA,SAAS,GAAGb,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,EAA+BY,SAA3C;AAEAb,IAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,EAA+BY,SAA/B,GAA2CA,SAAS,CAACC,MAAV,CACzC,UAACC,QAAD;AAAA,aAAcA,QAAQ,CAACC,IAAT,KAAkB1V,OAAO,CAAC0V,IAAxC;AAAA,KADyC,CAA3C;AAIAhB,IAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,EAA+BgB,SAA/B,GACEjB,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,EAA+BY,SAA/B,CAAyCpB,MAD3C;;AAGA,QAAIoB,SAAS,CAACpB,MAAV,KAAqBO,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,EAA+BY,SAA/B,CAAyCpB,MAAlE,EAA0E;AACxEO,MAAAA,QAAQ,CAACS,cAAT;AACD;AACF,GAbD,MAaO;AACLT,IAAAA,QAAQ,CAACS,cAAT;AACD;;;AAGDT,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,IAAiC;AAC/BiB,IAAAA,IAAI,EAAE5V,OAAO,CAAC2U,OADiB;AAE/BY,IAAAA,SAAS,YACJA,SADI,GAEP;AACEG,MAAAA,IAAI,EAAE1V,OAAO,CAAC0V,IADhB;AAEEjB,MAAAA,KAAK,EAAEzU,OAAO,CAACyU;AAFjB,KAFO,EAFsB;AAS/BkB,IAAAA,SAAS,EAAE3V,OAAO,CAAC2V;AATY,GAAjC;AAYA,SAAOjB,QAAP;AACD,CA3CD;;AA6CA,IAAMmB,QAAQ,GAAG,SAAXA,QAAW,CACfpB,KADe,EAEfzU,OAFe;AAIf,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb,CADW;AAEfW,IAAAA,cAAc,EAAEV,KAAK,CAACU;AAFP,GAAjB;;AAMA,MAAIT,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,CAAJ,EAAoC;AAClC,QAAMY,SAAS,GAAGb,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,EAA+BY,SAAjD;AAEAb,IAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,EAA+BY,SAA/B,GAA2CA,SAAS,CAACC,MAAV,CACzC,UAACC,QAAD;AAAA,aAAcA,QAAQ,CAACC,IAAT,KAAkB1V,OAAO,CAAC0V,IAAxC;AAAA,KADyC,CAA3C;;AAIA,QAAIH,SAAS,CAACpB,MAAV,GAAmBO,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,EAA+BY,SAA/B,CAAyCpB,MAAhE,EAAwE;AACtEO,MAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,EAA+BgB,SAA/B;AACAjB,MAAAA,QAAQ,CAACS,cAAT;AACD;AACF;;AAED,SAAOT,QAAP;AACD,CAxBD;;AA0BA,IAAM9E,iBAAe,GAAG,SAAlBA,eAAkB,CACtB6E,KADsB,EAEtBzU,OAFsB;AAItB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb,CADW;AAEfW,IAAAA,cAAc,EAAEV,KAAK,CAACU;AAFP,GAAjB;;AAMA,MAAIT,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,CAAJ,EAAoC;AAClC,QAAMY,SAAS,GAAGb,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAAC2U,OAAtB,EAA+BY,SAAjD;AAEAA,IAAAA,SAAS,CAAC3B,OAAV,CAAkB,UAAC6B,QAAD;AAChB,UAAIA,QAAQ,CAACC,IAAT,KAAkB1V,OAAO,CAAC0V,IAA9B,EAAoC;AAClCD,QAAAA,QAAQ,CAAChB,KAAT,GAAiBzU,OAAO,CAACyU,KAAzB;AACD;AACF,KAJD;AAKD;;AAED,SAAOC,QAAP;AACD,CArBD;AAwCA;;;AACA,IAAaoB,qBAAqB,GAAG,SAAxBA,qBAAwB;AAAA,SAGmB,UACtDrB,KADsD,EAEtDzE,MAFsD;QACtDyE;AAAAA,MAAAA,QAA2CF,oBAAkB;;;AAG7D,YAAQvE,MAAM,CAAC9P,IAAf;AACE,WAAK2M,kBAAkB,CAACI,kBAAxB;AACE,eAAOI,OAAO,CAAiBoH,KAAjB,EAAwBzE,MAAM,CAAChQ,OAA/B,CAAd;;AACF,WAAK6M,kBAAkB,CAACe,wBAAxB;AACE,eAAOI,QAAQ,CAAiByG,KAAjB,EAAwBzE,MAAM,CAAChQ,OAA/B,CAAf;;AACF,WAAK6M,kBAAkB,CAAC0C,UAAxB;AACE,eAAO+F,UAAU,CAAiBb,KAAjB,EAAwBzE,MAAM,CAAChQ,OAA/B,CAAjB;;AACF,WAAK6M,kBAAkB,CAAC4C,WAAxB;AACA,WAAK5C,kBAAkB,CAAC8C,aAAxB;AACE,eAAOkG,QAAQ,CAAiBpB,KAAjB,EAAwBzE,MAAM,CAAChQ,OAA/B,CAAf;;AACF,WAAK6M,kBAAkB,CAACgD,kBAAxB;AACE,eAAOD,iBAAe,CAAiB6E,KAAjB,EAAwBzE,MAAM,CAAChQ,OAA/B,CAAtB;;AACF;AACE,eAAOyU,KAAP;AAbJ;AAeD,GAtBoC;AAAA,CAA9B;;ICvKMsB,0BAA0B,GAAG,SAA7BA,0BAA6B,CACxCC,WADwC;AAGxC,MAAIC,YAAJ;;AAEA,MAAI,OAAOD,WAAP,KAAuB,SAA3B,EAAsC;AACpCC,IAAAA,YAAY,GAAG;AAAEC,MAAAA,WAAW,EAAEF;AAAf,KAAf;AACD,GAFD,MAEO,IAAI,OAAOA,WAAP,KAAuB,UAA3B,EAAuC;AAC5CC,IAAAA,YAAY,GAAG;AAAEC,MAAAA,WAAW,EAAEF,WAAW;AAA1B,KAAf;;AACA,QAAI,OAAOC,YAAY,CAACC,WAApB,KAAoC,SAAxC,EAAmD;AACjD,YAAM,IAAIC,KAAJ,CACJ,sEADI,CAAN;AAGD;AACF,GAPM,MAOA;AACL,UAAM,IAAIA,KAAJ,CACJ,+EADI,CAAN;AAGD;;AAED,SAAO,SAASC,oBAAT,CACL3B,KADK,EAELzE,MAFK;QACLyE;AAAAA,MAAAA,QAAQwB;;;AAGR,YAAQjG,MAAM,CAAC9P,IAAf;AACE,WAAKgS,uBAAuB,CAACG,gBAA7B;AACE,eAAO;AACL6D,UAAAA,WAAW,EAAE;AADR,SAAP;;AAGF,WAAKhE,uBAAuB,CAACK,kBAA7B;AACE,eAAO;AACL2D,UAAAA,WAAW,EAAE;AADR,SAAP;;AAGF;AACE,eAAOzB,KAAP;AAVJ;AAYD,GAhBD;AAiBD,CArCM;;ACsBP,IAAMF,oBAAkB,GAAG,SAArBA,kBAAqB;AAAA,SAAO;AAChCC,IAAAA,IAAI,EAAE;AAD0B,GAAP;AAAA,CAA3B;;AAIA,IAAMpK,aAAW,GAAG,SAAdA,WAAc,CAClBqK,KADkB,EAElBzU,OAFkB;AAIlB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIAE,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBrU,EAApC,IAA0ChC,OAAO,CAACoB,QAAR,CAAiBiV,IAA3D;AAEA,SAAO3B,QAAP;AACD,CAXD;;AAaA,IAAMnI,aAAW,GAAG,SAAdA,WAAc,CAClBkI,KADkB,EAElBzU,OAFkB;AAIlB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIAE,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBrU,EAApC,IAA0ChC,OAAO,CAACoB,QAAR,CAAiBiV,IAA3D;AAEA,SAAO3B,QAAP;AACD,CAXD;;AAaA,IAAM9J,aAAW,GAAG,SAAdA,WAAc,CAClB6J,KADkB,EAElBzU,OAFkB;AAIlB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIA,SAAOE,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACU,OAAR,CAAgBuK,MAA9B,CAAP;AAEA,SAAOyJ,QAAP;AACD,CAXD;;AAaA,IAAM5I,gBAAc,GAAG,SAAjBA,cAAiB,CACrB2I,KADqB,EAErBzU,OAFqB;AAIrB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIAxU,EAAAA,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBzC,OAAtB,CAA8B,UAAC0C,IAAD;AAC5B5B,IAAAA,QAAQ,CAACF,IAAT,CAAc8B,IAAI,CAACtU,EAAnB,IAAyBsU,IAAzB;AACD,GAFD;AAIA,SAAO5B,QAAP;AACD,CAbD;;AAeA,IAAMrJ,eAAa,GAAG,SAAhBA,aAAgB,CACpBoJ,KADoB,EAEpBzU,OAFoB;AAIpB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIAE,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBrU,EAApC,IAA0ChC,OAAO,CAACoB,QAAR,CAAiBiV,IAA3D;AAEA,SAAO3B,QAAP;AACD,CAXD;;AAaA,IAAM6B,wBAAwB,GAAG,SAA3BA,wBAA2B,CAC/B9B,KAD+B,EAE/BzU,OAF+B;AAI/B,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIAE,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAarU,EAA3B,IAAiChC,OAAO,CAACqW,IAAzC;AAEA,SAAO3B,QAAP;AACD,CAXD;;AAaA,IAAM8B,wBAAwB,GAAG,SAA3BA,wBAA2B,CAC/B/B,KAD+B,EAE/BzU,OAF+B;AAI/B,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIA,SAAOE,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAarU,EAA3B,CAAP;AAEA,SAAO0S,QAAP;AACD,CAXD;;AAaA,IAAMnR,kBAAgB,GAAG,SAAnBA,gBAAmB,CACvBkR,KADuB,EAEvBzU,OAFuB;AAIvB,MAAI0U,QAAQ,GAAGD,KAAf;;AAEA,MAAIzU,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBlC,MAAtB,GAA+B,CAAnC,EAAsC;AACpCO,IAAAA,QAAQ,GAAG;AACTF,MAAAA,IAAI,eACCC,KAAK,CAACD,IADP;AADK,KAAX;;AAMA,SAAK,IAAIiC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzW,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBlC,MAA1C,EAAkDsC,CAAC,EAAnD,EAAuD;AACrD,UAAMC,aAAa,GAAG1W,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBI,CAAtB,CAAtB;;AAEA,UAAIC,aAAa,CAACpR,IAAlB,EAAwB;AACtBoP,QAAAA,QAAQ,CAACF,IAAT,CAAckC,aAAa,CAAC1U,EAA5B,IAAkC0U,aAAa,CAACpR,IAAhD;AACD;AACF;AACF;;AAED,SAAOoP,QAAP;AACD,CAvBD;AAyCA;;;AACA,IAAaiC,iBAAiB,GAAG,SAApBA,iBAAoB;AAAA,SAGW,UAC1ClC,KAD0C,EAE1CzE,MAF0C;QAC1CyE;AAAAA,MAAAA,QAAoCF,oBAAkB;;;AAGtD,YAAQvE,MAAM,CAAC9P,IAAf;AACE,WAAK+J,cAAc,CAACI,YAApB;AACE,eAAOD,aAAW,CAAaqK,KAAb,EAAoBzE,MAAM,CAAChQ,OAA3B,CAAlB;;AACF,WAAKiK,cAAc,CAACuC,YAApB;AACE,eAAOD,aAAW,CAAakI,KAAb,EAAoBzE,MAAM,CAAChQ,OAA3B,CAAlB;;AACF,WAAKiK,cAAc,CAACY,YAApB;AACE,eAAOD,aAAW,CAAa6J,KAAb,EAAoBzE,MAAM,CAAChQ,OAA3B,CAAlB;;AACF,WAAKiK,cAAc,CAAC8B,eAApB;AACE,eAAOD,gBAAc,CAAa2I,KAAb,EAAoBzE,MAAM,CAAChQ,OAA3B,CAArB;;AACF,WAAKiK,cAAc,CAACqB,cAApB;AACE,eAAOD,eAAa,CAAaoJ,KAAb,EAAoBzE,MAAM,CAAChQ,OAA3B,CAApB;;AACF,WAAKiK,cAAc,CAACiE,kBAApB;AACE,eAAOqI,wBAAwB,CAAa9B,KAAb,EAAoBzE,MAAM,CAAChQ,OAA3B,CAA/B;;AACF,WAAKiK,cAAc,CAACkE,kBAApB;AACE,eAAOqI,wBAAwB,CAAa/B,KAAb,EAAoBzE,MAAM,CAAChQ,OAA3B,CAA/B;;AACF,WAAKoD,iBAAiB,CAACI,iBAAvB;AACE,eAAOD,kBAAgB,CAAakR,KAAb,EAAoBzE,MAAM,CAAChQ,OAA3B,CAAvB;;AACF;AACE,eAAOyU,KAAP;AAlBJ;AAoBD,GA3BgC;AAAA,CAA1B;;AClKP,IAAMF,oBAAkB,GAAG,SAArBA,kBAAqB;AAAA,SAAsB;AAC/CqC,IAAAA,OAAO,EAAE;AADsC,GAAtB;AAAA,CAA3B;;AAIA,IAAM9K,gBAAc,GAAG,SAAjBA,cAAiB,CACrB9L,OADqB;AAAA,SAEjB;AAAE4W,IAAAA,OAAO,EAAE5W,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBvU,GAAtB,CAA0B,UAACwD,IAAD;AAAA,aAAUA,IAAI,CAACtD,EAAf;AAAA,KAA1B;AAAX,GAFiB;AAAA,CAAvB;;;AAKA,IAAa6U,qBAAqB,GAAG,SAAxBA,qBAAwB;AAAA,SAG9B,UACLpC,KADK,EAELzE,MAFK;QACLyE;AAAAA,MAAAA,QAAuBF,oBAAkB;;;AAGzC,YAAQvE,MAAM,CAAC9P,IAAf;AACE,WAAK+J,cAAc,CAAC8B,eAApB;AACE,eAAOD,gBAAc,CAACkE,MAAM,CAAChQ,OAAR,CAArB;;AACF;AACE,eAAOyU,KAAP;AAJJ;AAMD,GAboC;AAAA,CAA9B;;ACUP,IAAMF,oBAAkB,GAAG,SAArBA,kBAAqB;AAAA,SAAO;AAChCC,IAAAA,IAAI,EAAE;AAD0B,GAAP;AAAA,CAA3B;;AAIA,IAAMhN,cAAY,GAAG,SAAfA,YAAe,CACnBiN,KADmB,EAEnBzU,OAFmB;AAInB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIAE,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBrU,EAApC,IAA0ChC,OAAO,CAACoB,QAAR,CAAiBiV,IAA3D;AAEA,SAAO3B,QAAP;AACD,CAXD;;AAaA,IAAM/K,cAAY,GAAG,SAAfA,YAAe,CACnB8K,KADmB,EAEnBzU,OAFmB;AAInB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIAE,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBrU,EAApC,IAA0ChC,OAAO,CAACoB,QAAR,CAAiBiV,IAA3D;AAEA,SAAO3B,QAAP;AACD,CAXD;;AAaA,IAAM1M,cAAY,GAAG,SAAfA,YAAe,CACnByM,KADmB,EAEnBzU,OAFmB;AAInB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIA,SAAOE,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACU,OAAR,CAAgB2H,OAA9B,CAAP;AAEA,SAAOqM,QAAP;AACD,CAXD;;AAaA,IAAMxL,iBAAe,GAAG,SAAlBA,eAAkB,CACtBuL,KADsB,EAEtBzU,OAFsB;AAItB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIAxU,EAAAA,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBzC,OAAtB,CAA8B,UAAC0C,IAAD;AAC5B5B,IAAAA,QAAQ,CAACF,IAAT,CAAc8B,IAAI,CAACtU,EAAnB,IAAyBsU,IAAzB;AACD,GAFD;AAIA,SAAO5B,QAAP;AACD,CAbD;;AAeA,IAAMjM,gBAAc,GAAG,SAAjBA,cAAiB,CACrBgM,KADqB,EAErBzU,OAFqB;AAIrB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIAE,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBrU,EAApC,IAA0ChC,OAAO,CAACoB,QAAR,CAAiBiV,IAA3D;AAEA,SAAO3B,QAAP;AACD,CAXD;;AAaA,IAAMoC,yBAAyB,GAAG,SAA5BA,yBAA4B,CAChCrC,KADgC,EAEhCzU,OAFgC;AAIhC,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIAE,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAarU,EAA3B,IAAiChC,OAAO,CAACqW,IAAzC;AAEA,SAAO3B,QAAP;AACD,CAXD;;AAaA,IAAMqC,yBAAyB,GAAG,SAA5BA,yBAA4B,CAChCtC,KADgC,EAEhCzU,OAFgC;AAIhC,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIA,SAAOE,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAarU,EAA3B,CAAP;AAEA,SAAO0S,QAAP;AACD,CAXD;;AAaA,IAAMtS,qBAAmB,GAAG,SAAtBA,mBAAsB,CAC1BqS,KAD0B,EAE1BzU,OAF0B;AAI1B,MAAI0U,QAAQ,GAAGD,KAAf;;AAEA,MAAIzU,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBlC,MAAtB,GAA+B,CAAnC,EAAsC;AACpCO,IAAAA,QAAQ,GAAG;AACTF,MAAAA,IAAI,eACCC,KAAK,CAACD,IADP;AADK,KAAX;;AAMA,SAAK,IAAIiC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzW,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBlC,MAA1C,EAAkDsC,CAAC,EAAnD,EAAuD;AACrD,UAAMO,iBAAiB,GAAGhX,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBI,CAAtB,CAA1B;;AAEA,UAAIO,iBAAiB,CAACjV,KAAtB,EAA6B;AAC3B2S,QAAAA,QAAQ,CAACF,IAAT,CAAcwC,iBAAiB,CAAChV,EAAhC,IAAsCgV,iBAAiB,CAACjV,KAAxD;AACD;AACF;AACF;;AAED,SAAO2S,QAAP;AACD,CAvBD;AAyCA;;;AACA,IAAauC,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA,SAGa,UAC7CxC,KAD6C,EAE7CzE,MAF6C;QAC7CyE;AAAAA,MAAAA,QAAsCF,oBAAkB;;;AAGxD,YAAQvE,MAAM,CAAC9P,IAAf;AACE,WAAKmH,eAAe,CAACI,aAArB;AACE,eAAOD,cAAY,CAAciN,KAAd,EAAqBzE,MAAM,CAAChQ,OAA5B,CAAnB;;AACF,WAAKqH,eAAe,CAACuC,aAArB;AACE,eAAOD,cAAY,CAAc8K,KAAd,EAAqBzE,MAAM,CAAChQ,OAA5B,CAAnB;;AACF,WAAKqH,eAAe,CAACY,aAArB;AACE,eAAOD,cAAY,CAAcyM,KAAd,EAAqBzE,MAAM,CAAChQ,OAA5B,CAAnB;;AACF,WAAKqH,eAAe,CAAC8B,gBAArB;AACE,eAAOD,iBAAe,CAAcuL,KAAd,EAAqBzE,MAAM,CAAChQ,OAA5B,CAAtB;;AACF,WAAKqH,eAAe,CAACqB,eAArB;AACE,eAAOD,gBAAc,CAAcgM,KAAd,EAAqBzE,MAAM,CAAChQ,OAA5B,CAArB;;AACF,WAAKqH,eAAe,CAACkH,mBAArB;AACE,eAAOuI,yBAAyB,CAAcrC,KAAd,EAAqBzE,MAAM,CAAChQ,OAA5B,CAAhC;;AACF,WAAKqH,eAAe,CAACmH,mBAArB;AACE,eAAOuI,yBAAyB,CAActC,KAAd,EAAqBzE,MAAM,CAAChQ,OAA5B,CAAhC;;AACF,WAAKF,oBAAoB,CAACuC,oBAA1B;AACE,eAAOD,qBAAmB,CAAcqS,KAAd,EAAqBzE,MAAM,CAAChQ,OAA5B,CAA1B;;AACF;AACE,eAAOyU,KAAP;AAlBJ;AAoBD,GA3BiC;AAAA,CAA3B;;AC5JP,IAAMF,oBAAkB,GAAG,SAArBA,kBAAqB;AAAA,SAAuB;AAChD2C,IAAAA,QAAQ,EAAE;AADsC,GAAvB;AAAA,CAA3B;;AAIA,IAAMhO,iBAAe,GAAG,SAAlBA,eAAkB,CACtBlJ,OADsB;AAAA,SAElB;AAAEkX,IAAAA,QAAQ,EAAElX,OAAO,CAACoB,QAAR,CAAiBiV,IAAjB,CAAsBvU,GAAtB,CAA0B,UAACC,KAAD;AAAA,aAAWA,KAAK,CAACC,EAAjB;AAAA,KAA1B;AAAZ,GAFkB;AAAA,CAAxB;;;AAKA,IAAamV,sBAAsB,GAAG,SAAzBA,sBAAyB;AAAA,SAG/B,UACL1C,KADK,EAELzE,MAFK;QACLyE;AAAAA,MAAAA,QAAwBF,oBAAkB;;;AAG1C,YAAQvE,MAAM,CAAC9P,IAAf;AACE,WAAKmH,eAAe,CAAC8B,gBAArB;AACE,eAAOD,iBAAe,CAAY8G,MAAM,CAAChQ,OAAnB,CAAtB;;AACF;AACE,eAAOyU,KAAP;AAJJ;AAMD,GAbqC;AAAA,CAA/B;;ACEP,IAAMF,oBAAkB,GAAG,SAArBA,kBAAqB;AAAA,SAAO;AAChCC,IAAAA,IAAI,EAAE;AAD0B,GAAP;AAAA,CAA3B;;AAIA,IAAM5F,kBAAgB,GAAG,SAAnBA,gBAAmB,CAGvB6F,KAHuB,EAIvBzU,OAJuB;AAMvB,MACEyU,KAAK,CAACD,IAAN,CAAWxU,OAAO,CAACqW,IAAR,CAAapL,MAAxB,KACAwJ,KAAK,CAACD,IAAN,CAAWxU,OAAO,CAACqW,IAAR,CAAapL,MAAxB,EAAgCuK,MAAhC,CACE,UAACvG,UAAD;AAAA,WAAgBA,UAAU,CAACjN,EAAX,KAAkBhC,OAAO,CAACqW,IAAR,CAAahO,OAA/C;AAAA,GADF,EAEE8L,MAFF,KAEa,CAJf,EAKE;AACA,QAAMO,QAAQ,GAAG;AACfF,MAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,KAAjB;AAIA,QAAM4C,aAAa,GAAG;AACpBpV,MAAAA,EAAE,EAAEhC,OAAO,CAACqW,IAAR,CAAahO,OADG;AAEpBgP,MAAAA,MAAM,EAAErX,OAAO,CAACqW,IAAR,CAAagB;AAFD,KAAtB;AAKA3C,IAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAapL,MAA3B,cACKyJ,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAapL,MAA3B,CADL,GAEEmM,aAFF;AAKA,WAAO1C,QAAP;AACD;;AAED,SAAOD,KAAP;AACD,CA9BD;;AAgCA,IAAM3F,sBAAoB,GAAG,SAAvBA,oBAAuB,CAG3B2F,KAH2B,EAI3BzU,OAJ2B;AAM3B,MACEyU,KAAK,CAACD,IAAN,CAAWxU,OAAO,CAACqW,IAAR,CAAapL,MAAxB,KACAwJ,KAAK,CAACD,IAAN,CAAWxU,OAAO,CAACqW,IAAR,CAAapL,MAAxB,EAAgCuK,MAAhC,CACE,UAACvG,UAAD;AAAA,WAAgBA,UAAU,CAACjN,EAAX,KAAkBhC,OAAO,CAACqW,IAAR,CAAahO,OAA/C;AAAA,GADF,EAEE8L,MAFF,GAEW,CAJb,EAKE;AACA,QAAMO,QAAQ,GAAG;AACfF,MAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,KAAjB;AAIAE,IAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAapL,MAA3B,IAAqCyJ,QAAQ,CAACF,IAAT,CACnCxU,OAAO,CAACqW,IAAR,CAAapL,MADsB,EAEnCuK,MAFmC,CAE5B,UAACvG,UAAD;AAAA,aAAgBA,UAAU,CAACjN,EAAX,KAAkBhC,OAAO,CAACqW,IAAR,CAAahO,OAA/C;AAAA,KAF4B,CAArC;AAIA,WAAOqM,QAAP;AACD;;AAED,SAAOD,KAAP;AACD,CAxBD;;AA0BA,IAAM/F,8BAA4B,GAAG,SAA/BA,4BAA+B,CAGnC+F,KAHmC,EAInCzU,OAJmC;AAMnC,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIA,MAAI8C,UAAU,GAAG5C,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAapL,MAA3B,CAAjB;;AAEA,MAAIqM,UAAU,KAAKxD,SAAnB,EAA8B;AAC5BwD,IAAAA,UAAU,GAAGA,UAAU,CAACxV,GAAX,CAAe,UAACC,KAAD;AAC1B,UAAIA,KAAK,CAACC,EAAN,KAAahC,OAAO,CAACqW,IAAR,CAAahO,OAA9B,EAAuC;AACrC,4BACKtG,KADL;AAEEsV,UAAAA,MAAM,EAAErX,OAAO,CAACqW,IAAR,CAAagB;AAFvB;AAID,OALD,MAKO;AACL,eAAOtV,KAAP;AACD;AACF,KATY,CAAb;AAUD;;AAED2S,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAapL,MAA3B,IAAqCqM,UAArC;AAEA,SAAO5C,QAAP;AACD,CA5BD;;AA8BA,IAAM6C,gBAAgB,GAAG,SAAnBA,gBAAmB,CAGvB9C,KAHuB,EAIvBzU,OAJuB;AAQvB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIAE,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACU,OAAR,CAAgBuK,MAA9B,IAAwCjL,OAAO,CAACoB,QAAR,CAAiBiV,IAAzD;AAEA,SAAO3B,QAAP;AACD,CAfD;AAiCA;;;AACA,IAAa8C,uBAAuB,GAAG,SAA1BA,uBAA0B;AAAA,SAQuB,UAC5D/C,KAD4D,EAE5DzE,MAF4D;QAC5DyE;AAAAA,MAAAA,QAAQF,oBAAkB;;;AAG1B,YAAQvE,MAAM,CAAC9P,IAAf;AACE,WAAKJ,oBAAoB,CAACuC,oBAA1B;AACA,WAAKvC,oBAAoB,CAACgD,kBAA1B;AACA,WAAKhD,oBAAoB,CAACO,aAA1B;AACA,WAAKP,oBAAoB,CAAC2B,WAA1B;AACE,eAAO8V,gBAAgB,CAAmB9C,KAAnB,EAA0BzE,MAAM,CAAChQ,OAAjC,CAAvB;;AACF,WAAKF,oBAAoB,CAAC+O,yBAA1B;AACE,eAAOD,kBAAgB,CAAmB6F,KAAnB,EAA0BzE,MAAM,CAAChQ,OAAjC,CAAvB;;AACF,WAAKF,oBAAoB,CAACiP,6BAA1B;AACE,eAAOD,sBAAoB,CAAmB2F,KAAnB,EAA0BzE,MAAM,CAAChQ,OAAjC,CAA3B;;AACF,WAAKF,oBAAoB,CAAC6O,sCAA1B;AACE,eAAOD,8BAA4B,CACjC+F,KADiC,EAEjCzE,MAAM,CAAChQ,OAF0B,CAAnC;;AAIF;AACE,eAAOyU,KAAP;AAhBJ;AAkBD,GA9BsC;AAAA,CAAhC;;AC1HP,IAAMF,oBAAkB,GAAG,SAArBA,kBAAqB;AAAA,SAAO;AAChCC,IAAAA,IAAI,EAAE;AAD0B,GAAP;AAAA,CAA3B;;AAIA,IAAM5F,kBAAgB,GAAG,SAAnBA,gBAAmB,CAGvB6F,KAHuB,EAIvBzU,OAJuB;AAMvB,MACEyU,KAAK,CAACD,IAAN,CAAWxU,OAAO,CAACqW,IAAR,CAAahO,OAAxB,KACAoM,KAAK,CAACD,IAAN,CAAWxU,OAAO,CAACqW,IAAR,CAAahO,OAAxB,EAAiCmN,MAAjC,CACE,UAACvG,UAAD;AAAA,WAAgBA,UAAU,CAACjN,EAAX,KAAkBhC,OAAO,CAACqW,IAAR,CAAapL,MAA/C;AAAA,GADF,EAEEkJ,MAFF,KAEa,CAJf,EAKE;AACA,QAAMO,QAAQ,GAAG;AACfF,MAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,KAAjB;AAIA,QAAMiD,UAAU,GAAG;AACjBzV,MAAAA,EAAE,EAAEhC,OAAO,CAACqW,IAAR,CAAapL,MADA;AAEjBoM,MAAAA,MAAM,EAAErX,OAAO,CAACqW,IAAR,CAAagB;AAFJ,KAAnB;AAKA3C,IAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAahO,OAA3B,cACKqM,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAahO,OAA3B,CADL,GAEEoP,UAFF;AAKA,WAAO/C,QAAP;AACD;;AAED,SAAOD,KAAP;AACD,CA9BD;;AAgCA,IAAM3F,sBAAoB,GAAG,SAAvBA,oBAAuB,CAG3B2F,KAH2B,EAI3BzU,OAJ2B;AAM3B,MACEyU,KAAK,CAACD,IAAN,CAAWxU,OAAO,CAACqW,IAAR,CAAahO,OAAxB,KACAoM,KAAK,CAACD,IAAN,CAAWxU,OAAO,CAACqW,IAAR,CAAahO,OAAxB,EAAiCmN,MAAjC,CACE,UAACvG,UAAD;AAAA,WAAgBA,UAAU,CAACjN,EAAX,KAAkBhC,OAAO,CAACqW,IAAR,CAAapL,MAA/C;AAAA,GADF,EAEEkJ,MAFF,GAEW,CAJb,EAKE;AACA,QAAMO,QAAQ,GAAG;AACfF,MAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,KAAjB;AAIAE,IAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAahO,OAA3B,IAAsCqM,QAAQ,CAACF,IAAT,CACpCxU,OAAO,CAACqW,IAAR,CAAahO,OADuB,EAEpCmN,MAFoC,CAE7B,UAACvG,UAAD;AAAA,aAAgBA,UAAU,CAACjN,EAAX,KAAkBhC,OAAO,CAACqW,IAAR,CAAapL,MAA/C;AAAA,KAF6B,CAAtC;AAIA,WAAOyJ,QAAP;AACD;;AAED,SAAOD,KAAP;AACD,CAxBD;;AA0BA,IAAM/F,8BAA4B,GAAG,SAA/BA,4BAA+B,CAGnC+F,KAHmC,EAInCzU,OAJmC;AAMnC,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIA,MAAIkD,WAAW,GAAGhD,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAahO,OAA3B,CAAlB;;AAEA,MAAIqP,WAAW,KAAK5D,SAApB,EAA+B;AAC7B4D,IAAAA,WAAW,GAAGA,WAAW,CAAC5V,GAAZ,CAAgB,UAACwD,IAAD;AAC5B,UAAIA,IAAI,CAACtD,EAAL,KAAYhC,OAAO,CAACqW,IAAR,CAAapL,MAA7B,EAAqC;AACnC,4BACK3F,IADL;AAEE+R,UAAAA,MAAM,EAAErX,OAAO,CAACqW,IAAR,CAAagB;AAFvB;AAID,OALD,MAKO;AACL,eAAO/R,IAAP;AACD;AACF,KATa,CAAd;AAUD;;AAEDoP,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACqW,IAAR,CAAahO,OAA3B,IAAsCqP,WAAtC;AAEA,SAAOhD,QAAP;AACD,CA5BD;;AA8BA,IAAMiD,aAAa,GAAG,SAAhBA,aAAgB,CAGpBlD,KAHoB,EAIpBzU,OAJoB;AAQpB,MAAM0U,QAAQ,GAAG;AACfF,IAAAA,IAAI,eAAOC,KAAK,CAACD,IAAb;AADW,GAAjB;AAIAE,EAAAA,QAAQ,CAACF,IAAT,CAAcxU,OAAO,CAACU,OAAR,CAAgB2H,OAA9B,IAAyCrI,OAAO,CAACoB,QAAR,CAAiBiV,IAA1D;AAEA,SAAO3B,QAAP;AACD,CAfD;AAiCA;;;AACA,IAAakD,oBAAoB,GAAG,SAAvBA,oBAAuB;AAAA,SAGiB,UACnDnD,KADmD,EAEnDzE,MAFmD;QACnDyE;AAAAA,MAAAA,QAAQF,oBAAkB;;;AAG1B,YAAQvE,MAAM,CAAC9P,IAAf;AACE,WAAKkD,iBAAiB,CAACI,iBAAvB;AACA,WAAKJ,iBAAiB,CAACa,eAAvB;AACA,WAAKb,iBAAiB,CAACqB,aAAvB;AACA,WAAKrB,iBAAiB,CAAC6B,eAAvB;AACE,eAAO0S,aAAa,CAAgBlD,KAAhB,EAAuBzE,MAAM,CAAChQ,OAA9B,CAApB;;AACF,WAAKF,oBAAoB,CAAC+O,yBAA1B;AACE,eAAOD,kBAAgB,CAAgB6F,KAAhB,EAAuBzE,MAAM,CAAChQ,OAA9B,CAAvB;;AACF,WAAKF,oBAAoB,CAACiP,6BAA1B;AACE,eAAOD,sBAAoB,CAAgB2F,KAAhB,EAAuBzE,MAAM,CAAChQ,OAA9B,CAA3B;;AACF,WAAKF,oBAAoB,CAAC6O,sCAA1B;AACE,eAAOD,8BAA4B,CAAgB+F,KAAhB,EAAuBzE,MAAM,CAAChQ,OAA9B,CAAnC;;AACF;AACE,eAAOyU,KAAP;AAbJ;AAeD,GAtBmC;AAAA,CAA7B;;;;"}